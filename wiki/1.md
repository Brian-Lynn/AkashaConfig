# Stash Wiki æ–‡æ¡£ç›®å½• (ç²¾ç®€ç‰ˆ)

- [æ¬¢è¿ä½¿ç”¨ Stash App ğŸ‘‹](#æ¬¢è¿ä½¿ç”¨-stash-app)
- [å¿«é€Ÿä¸Šæ‰‹](#å¿«é€Ÿä¸Šæ‰‹)
- [iOS](#ios)
- [è§„åˆ™ç±»å‹](#è§„åˆ™ç±»å‹)
- [è§„åˆ™é›†åˆ](#è§„åˆ™é›†åˆ)
- [åè®®ç±»å‹](#åè®®ç±»å‹)
- [ç­–ç•¥ç»„](#ç­–ç•¥ç»„)
- [è¿œç¨‹ä»£ç†é›†](#è¿œç¨‹ä»£ç†é›†)
- [å»¶è¿Ÿæµ‹è¯•](#å»¶è¿Ÿæµ‹è¯•)
- [é…ç½®æ ·ä¾‹](#é…ç½®æ ·ä¾‹)
- [è¦†å†™æ–‡ä»¶ï¼ˆOverrideï¼‰](#è¦†å†™æ–‡ä»¶override)
- [ç­–ç•¥ç»„å›¾æ ‡](#ç­–ç•¥ç»„å›¾æ ‡)
- [Stash HTTP Engine](#stash-http-engine)
- [MitM](#mitm)
- [Force HTTP Engine](#force-http-engine)
- [HTTP é‡å†™](#http-é‡å†™)
- [è¯­æ³•ä¸æ¥å£](#è¯­æ³•ä¸æ¥å£)
- [æ”¹å†™ HTTP](#æ”¹å†™-http)
- [é¢æ¿ (Tile)](#é¢æ¿-tile)
- [å®šæ—¶ä»»åŠ¡](#å®šæ—¶ä»»åŠ¡)
- [å†…ç½® DNS æœåŠ¡](#å†…ç½®-dns-æœåŠ¡)
- [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](#ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†)
- [æœåŠ¡æä¾›å•†è®¢é˜…](#æœåŠ¡æä¾›å•†è®¢é˜…)
- [ç½‘ç»œæ€§èƒ½å¢å¼º](#ç½‘ç»œæ€§èƒ½å¢å¼º)
- [æŒ‰éœ€å¯åŠ¨](#æŒ‰éœ€å¯åŠ¨)
- [Stash Mac](#stash-mac)
- [ç¼–å†™é«˜æ•ˆçš„é…ç½®æ–‡ä»¶](#ç¼–å†™é«˜æ•ˆçš„é…ç½®æ–‡ä»¶)
- [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](#é˜²æ­¢ä»£ç†è¢«æ£€æµ‹)
- [æˆæƒä¸æ¿€æ´»](#æˆæƒä¸æ¿€æ´»)
- [TestFlight ç›¸å…³é—®é¢˜](#testflight-ç›¸å…³é—®é¢˜)
- [IPv6 å…¼å®¹æ€§](#ipv6-å…¼å®¹æ€§)
- [URL Schema](#url-schema)
- [è¶Šç‹± iOS ç³»ç»Ÿå†…å­˜é™åˆ¶ä¿®æ”¹](#è¶Šç‹±-ios-ç³»ç»Ÿå†…å­˜é™åˆ¶ä¿®æ”¹)
- [æ— æ³•å®‰è£… Stash Mac å¸®åŠ©ç¨‹åº (Helper)](#æ— æ³•å®‰è£…-stash-mac-å¸®åŠ©ç¨‹åº-helper)
- [Stash ä¸å…¶ä»– VPN çš„å†²çªè§£å†³æ–¹æ³•](#stash-ä¸å…¶ä»–-vpn-çš„å†²çªè§£å†³æ–¹æ³•)

---

# æ¬¢è¿ä½¿ç”¨ Stash App ğŸ‘‹

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [ç¤¾äº¤åª’ä½“](#ç¤¾äº¤åª’ä½“)
* [å’¨è¯¢åˆä½œ](#å’¨è¯¢åˆä½œ)
* [Stash on iOS](#stash-on-ios)
* [Stash on tvOS](#stash-on-tvos)
* [Stash on macOS](#stash-on-macos)

Stash ç®€ä»‹

# æ¬¢è¿ä½¿ç”¨ Stash App ğŸ‘‹

Stash æ˜¯ Clash Premium å†…æ ¸åœ¨ Apple è®¾å¤‡ä¸Šçš„æœ€ä½³å®ç°å®¢æˆ·ç«¯ï¼Œä¸º iOSã€tvOSã€macOS ä¸ visionOS å¹³å°å®Œæ•´é€‚é… Clash åŠŸèƒ½ã€‚

æ­¤å¤–ï¼ŒåŸºäº Apple å¹³å°ç‰¹æ€§ï¼ŒStash åœ¨ Clash Premium åŠŸèƒ½åŸºç¡€ä¸Šé¢å¤–æä¾›äº†ä»¥ä¸‹ç‰¹æ€§ï¼š

* **é…ç½®åŒæ­¥**ï¼šStash çš„é…ç½®æ–‡ä»¶ã€è§„åˆ™ã€è®¢é˜…ç­‰ä¿¡æ¯å¯ä»¥é€šè¿‡ iCloud åŒæ­¥åˆ°æ‰€æœ‰è®¾å¤‡ä¸Šï¼Œå®ç°ä¸€æ¬¡é…ç½®ï¼Œå¤šè®¾å¤‡å…±äº«ã€‚
* **è¿œç¨‹æ§åˆ¶**ï¼šStash è®¾å¤‡çš„åœ°å€å‡å®‰å…¨å­˜å‚¨äº iCloudï¼Œç™»å½•ç›¸åŒ iCloud è´¦å·çš„è®¾å¤‡å¯ä»¥ç›´æ¥è¿œç¨‹æ§åˆ¶å±€åŸŸç½‘å†…çš„ Stash è®¾å¤‡ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†åœ°å€å’Œå¯†ç ã€‚
* **å¿«æ·æ“ä½œ**ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡å°ç»„ä»¶ã€Today è§†å›¾ã€Widgetã€Siri å¿«æ·æŒ‡ä»¤ç­‰æ–¹å¼å¿«é€Ÿå¯åŠ¨ã€åœæ­¢ã€åˆ‡æ¢èŠ‚ç‚¹ç­‰æ“ä½œ Stashã€‚
* **æŒ‰éœ€è¿æ¥**ï¼šåŸºäº Apple å¹³å°çš„ VPN On Demand åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ® SSIDã€åŸŸåã€åº”ç”¨ç­‰æ¡ä»¶è‡ªåŠ¨è¿æ¥æˆ–æ–­å¼€ Stashã€‚
* **å¢å¼ºçš„ç½‘ç»œå¼•æ“**ï¼šStash æ”¯æŒ MitM åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·æŸ¥çœ‹ HTTPS æµé‡ï¼Œå¹¶åŸºäº Apple WebKit å¼•æ“æä¾› JavaScript è„šæœ¬æ”¹å†™å…¶ä¸­çš„å†…å®¹ã€‚
* **æ·±åº¦å®šåˆ¶**ï¼šä¸ºäº†æ›´å¥½åœ°é€‚é…ç§»åŠ¨è®¾å¤‡ï¼ŒStash æ·±å…¥å®šåˆ¶äº†å†…æ ¸ä¸è¿è¡Œæ—¶ä»£ç ï¼Œä¼˜ç§€åœ°æ§åˆ¶äº†å†…å­˜ã€ç”µé‡ä¸ç½‘ç»œèµ„æºæ¶ˆè€—ã€‚
* **ä¸°å¯Œä»£ç†åè®®**ï¼šç´§è·Ÿå¼€æºç¤¾åŒºçš„å‘å±•ï¼ŒStash æ”¯æŒ Hysteriaã€VLESSã€TUICã€WireGuard ç­‰å¤šç§çƒ­é—¨ä»£ç†åè®®ã€‚

## ç¤¾äº¤åª’ä½“

æ¬¢è¿è®¢é˜… [Telegram é¢‘é“ (opens in a new tab)](https://t.me/StashFeed) æˆ–å…³æ³¨ [X (Twitter) (opens in a new tab)](https://x.com/StashAppDev) ä»¥è·å–æœ€æ–°æ¶ˆæ¯ã€‚

æ¬¢è¿åŠ å…¥ [Telegram è®¨è®ºç»„ (opens in a new tab)](https://t.me/StashFans)ï¼Œä¸æ•°ä¸‡å Stash ç”¨æˆ·åœ¨çº¿äº¤æµã€‚

## å’¨è¯¢åˆä½œ

å¦‚æœ‰ä»»ä½•å’¨è¯¢æˆ–åˆä½œäº‹å®œï¼Œè¯·å‘é€ç”µå­é‚®ä»¶è‡³ [info@stash.ws](mailto:info@stash.ws)ã€‚

## Stash on iOS

Stash å·²ç»ä¸Šæ¶äº iOS App Storeã€‚

[(opens in a new tab)](https://apps.apple.com/app/stash/id1596063349?platform=iphone&l=zh-CN)

## Stash on tvOS

Stash å·²ç»ä¸Šæ¶äº tvOS App Storeã€‚

[(opens in a new tab)](https://apps.apple.com/app/stash/id1596063349?platform=appleTV&l=zh-CN)

## Stash on macOS

Stash Mac ç‰ˆæœ¬ä¸“ä¸º macOS å¹³å°è®¾è®¡ï¼Œæ¬²äº†è§£æ›´å¤šè¯¦æƒ…ï¼Œè¯·[ç‚¹å‡»è¿™é‡Œ](/stash-mac)ã€‚

[è¯·ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ Stash Mac çš„ä»·æ ¼ä¿¡æ¯ (opens in a new tab)](https://stash.ws/macos/pricing/)

Last updated on 2025å¹´4æœˆ18æ—¥

[å¿«é€Ÿä¸Šæ‰‹](/get-started "å¿«é€Ÿä¸Šæ‰‹")

---

# å¿«é€Ÿä¸Šæ‰‹

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [å¯¼å…¥è¿œç¨‹é…ç½®](#å¯¼å…¥è¿œç¨‹é…ç½®)
* [ä½¿ç”¨æœ¬åœ°é…ç½®](#ä½¿ç”¨æœ¬åœ°é…ç½®)

å¿«é€Ÿä¸Šæ‰‹

# å¿«é€Ÿä¸Šæ‰‹

è¦åœ¨ä½ çš„ iOS è®¾å¤‡ä¸Šå¯ç”¨ Stashï¼Œåªéœ€å¯¼å…¥ä¸€ä»½ Stash/Clash æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚Stash éœ€è¦é…ç½®æ–‡ä»¶æ¥æŒ‡å®šä»£ç†æœåŠ¡å™¨å’Œç½‘ç»œç­–ç•¥ï¼Œä½ å¯ä»¥é€šè¿‡ URL ä¸‹è½½æœåŠ¡æä¾›å•†çš„é…ç½®ï¼Œæˆ–è€…å¯¼å…¥å­˜æ”¾åœ¨ iCloud/OneDrive ä¸­çš„æœ¬åœ°æ–‡ä»¶æ¥ä½¿ç”¨ Stashã€‚

## å¯¼å…¥è¿œç¨‹é…ç½®

å¦‚æœä½ çš„æœåŠ¡æä¾›å•†æä¾›äº† Stash/Clash Premium/Clash çš„è®¢é˜…é“¾æ¥ï¼Œåœ¨ Stash ä¸­å¯¼å…¥è¿œç¨‹é…ç½®æ˜¯æœ€ç®€å•çš„æ–¹å¼ã€‚

1. åœ¨ Stash çš„è®¾ç½®é¡µé¢ï¼Œé€‰æ‹©é…ç½®æ–‡ä»¶ï¼›
2. åœ¨ Stash çš„é…ç½®åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©ä» URL ä¸‹è½½ï¼›
3. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ‚¨çš„è®¢é˜…åœ°å€ï¼Œç„¶åç‚¹å‡»ä¸‹è½½ï¼›
4. ç¡®ä¿æ‚¨å¸Œæœ›ä½¿ç”¨çš„é…ç½®æ–‡ä»¶å·²è¢«é€‰ä¸­ï¼›
5. è¿”å›åˆ° Stash é¦–é¡µï¼Œç‚¹å‡»å¯åŠ¨ï¼›

ç°åœ¨ï¼Œæ‚¨çš„ Stash å·²ç»å‡†å¤‡å°±ç»ªï¼Œå°½æƒ…äº«ç”¨å§ï¼ğŸ˜‰

## ä½¿ç”¨æœ¬åœ°é…ç½®

ä½¿ç”¨æœ¬åœ°é…ç½®å¯ä»¥å……åˆ†è‡ªå®šä¹‰ä½ çš„ Stash åˆ†æµç­–ç•¥ï¼Œå¹¶åˆ©ç”¨ Stash ä¸­å¼ºå¤§çš„å¯è§†åŒ–ç¼–è¾‘åŠŸèƒ½æ¥å®Œæˆé…ç½®ç¼–å†™ã€‚

1. æ‚¨å¯ä»¥é€šè¿‡ AirDrop æˆ–è€…æ‰“å¼€å­˜æ”¾åœ¨ iCloud/OneDrive ä¸­çš„ Stash/Clash Premium/Clash é…ç½®æ–‡ä»¶ï¼Œé€‰æ‹© Stash æ‰“å¼€ï¼›
2. ç¡®ä¿æ‚¨å¸Œæœ›ä½¿ç”¨çš„é…ç½®æ–‡ä»¶å·²è¢«é€‰ä¸­ï¼›
3. è¿”å›åˆ° Stash é¦–é¡µï¼Œç‚¹å‡»å¯åŠ¨ï¼›

ç°åœ¨ï¼Œæ‚¨çš„ Stash å·²ç»å‡†å¤‡å°±ç»ªï¼Œå°½æƒ…äº«ç”¨å§ï¼ğŸ˜‰

Last updated on 2024å¹´8æœˆ4æ—¥

[Stash ç®€ä»‹](/ "Stash ç®€ä»‹")[iOS](/release-notes/ios "iOS")

---

# iOS

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [3.0.0](#300)
* [æ–°å¢](#æ–°å¢)
* [ä¼˜åŒ–](#ä¼˜åŒ–)
* [ä¿®å¤](#ä¿®å¤)
* [2.7.1](#271)
* [2.7.0](#270)
* [æ–°å¢](#æ–°å¢-1)
* [ä¼˜åŒ–](#ä¼˜åŒ–-1)
* [ä¿®å¤](#ä¿®å¤-1)
* [2.6.6](#266)
* [2.6.5](#265)
* [2.6.4](#264)
* [æ–°å¢](#æ–°å¢-2)
* [ä¼˜åŒ–](#ä¼˜åŒ–-2)
* [ä¿®å¤](#ä¿®å¤-2)
* [2.6.3](#263)
* [2.6.2](#262)
* [2.6.1](#261)
* [æ–°å¢](#æ–°å¢-3)
* [ä¼˜åŒ–](#ä¼˜åŒ–-3)
* [ä¿®å¤](#ä¿®å¤-3)
* [2.6.0](#260)
* [æ–°å¢](#æ–°å¢-4)
* [ä¼˜åŒ–](#ä¼˜åŒ–-4)
* [ä¿®å¤](#ä¿®å¤-4)
* [2.5.6](#256)
* [2.5.5](#255)
* [2.5.4](#254)
* [2.5.3](#253)
* [2.5.2](#252)
* [2.5.0](#250)
* [2.4.7](#247)
* [2.4.6](#246)
* [2.4.4](#244)
* [2.4.2](#242)
* [2.4.1](#241)
* [2.4.0](#240)
* [2.3.1](#231)
* [2.3.0](#230)
* [ç»è¿‡é‡æ„åå…¨æ–°çš„å¯è§†åŒ–ç¼–è¾‘å™¨](#ç»è¿‡é‡æ„åå…¨æ–°çš„å¯è§†åŒ–ç¼–è¾‘å™¨)
* [2.2.4](#224)
* [2.2.3](#223)
* [2.2.2](#222)
* [2.2.1](#221)
* [æ–°åŠŸèƒ½](#æ–°åŠŸèƒ½)
* [æ”¹è¿›](#æ”¹è¿›)
* [Bug ä¿®å¤](#bug-ä¿®å¤)
* [2.2.0](#220)
* [åŠŸèƒ½](#åŠŸèƒ½)
* [æ”¹è¿›](#æ”¹è¿›-1)
* [ä¿®å¤](#ä¿®å¤-5)
* [2.1.1](#211)
* [2.1.0](#210)
* [2.0.0](#200)
* [1.6.9](#169)
* [1.6.8](#168)
* [1.6.7](#167)
* [1.6.6](#166)
* [1.6.5](#165)
* [1.6.4](#164)
* [1.6.3](#163)
* [1.6.2](#162)
* [1.6.1](#161)
* [1.6.0](#160)
* [1.5.4](#154)
* [1.5.3](#153)
* [1.5.2](#152)
* [1.5.1](#151)
* [1.5.0](#150)
* [1.4.3](#143)
* [1.4.2](#142)
* [1.4.1](#141)
* [1.4.0](#140)
* [1.3.1](#131)
* [1.3.0](#130)
* [1.2.1](#121)
* [1.2.0](#120)
* [1.1.1](#111)
* [1.1.0](#110)
* [1.0.4](#104)
* [æ–°åŠŸèƒ½](#æ–°åŠŸèƒ½-1)
* [ä¼˜åŒ–](#ä¼˜åŒ–-5)

æ›´æ–°æ—¥å¿—

iOS

## 3.0.0

### æ–°å¢

* æ”¯æŒ ShadowSocks2022 åè®®
* æ”¯æŒ ShadowTLS
* æ”¯æŒ ANDã€ORã€NOT é€»è¾‘è§„åˆ™
* æ–°å¢ DOMAIN-WILDCARD è§„åˆ™
* æ–°å¢ DOMAIN-REGEX è§„åˆ™
* æ–°å¢ NETWORK è§„åˆ™ï¼Œå¯é€‰å€¼ tcp, udp
* æ–°å¢ PROTOCOL è§„åˆ™ï¼Œå¯é€‰å€¼ TCP, HTTP, HTTPS, UDP, QUIC
* æ–°å¢ URL-REGEX è§„åˆ™
* æ–°å¢ USER-AGENT è§„åˆ™
* æ–°å¢ body-rewrite é‡å†™ï¼Œæ”¯æŒï¼š
* request-jq, request-replace-regex, request-json-replace, request-json-add, request-json-del
* response-jq, response-replace-regex, response-json-replace, response-json-add, response-json-del
* æ”¯æŒå—…æ¢ TLS Client Helloï¼Œè·å– SNI åŸŸå
* åœ¨å‘èµ· UDP è¿æ¥æ—¶ï¼Œç°åœ¨ä¼šå°è¯•ä½¿ç”¨ç›®æ ‡ä»£ç†å‘èµ· DNS æŸ¥è¯¢ä»¥ç¡®å®šç›®çš„åœ°å€çš„ IP
* æ”¯æŒå—…æ¢ QUIC / HTTP3
* è¿æ¥é¡µç°åœ¨èƒ½å±•ç¤ºæ›´è¯¦ç»†çš„ TCP / UDP åè®®ä¿¡æ¯
* DoH å’Œ DoH3 æ”¯æŒé…ç½® UserAgent
* IP ä¿¡æ¯æä¾›å•†æ–°å¢ BGP.Tools
* é‡å†™æ”¯æŒè¯»å– zstd å‹ç¼©ç®—æ³•
* å¯è§†åŒ–ç¼–è¾‘ï¼š
* æ–°å¢ reject-drop
* æ”¯æŒä¿®æ”¹ url-rewriteã€header-rewriteã€body-rewrite
* æ”¯æŒä¿®æ”¹è„šæœ¬
* æ”¯æŒé•¿æŒ‰å¤åˆ¶å›¾æ ‡ URL

### ä¼˜åŒ–

* å¤§å¹…ä¼˜åŒ–è€—ç”µï¼Œå°¤å…¶æ—¶åœ¨ä½è´Ÿè½½åœºæ™¯ä¸‹çš„åŠŸè€—
* ä¼˜åŒ– QUIC å—…æ¢
* ä¼˜åŒ–å¤§é‡è¿œç¨‹èµ„æºæ›´æ–°
* ä¼˜åŒ– UDP é«˜å¹¶å‘ä¸‹çš„å†…å­˜ä½¿ç”¨
* ä¼˜åŒ–å†…å­˜æ± åˆ†é…ç­–ç•¥
* ä¼˜åŒ–å¯è§†åŒ–ç¼–è¾‘é•¿æ–‡æœ¬æ˜¾ç¤º
* ä¼˜åŒ– ECH å®ç°

### ä¿®å¤

* ä¿®å¤å›¾æ ‡ç¬¬äºŒæ¬¡å¯¼å…¥å¯èƒ½ä¼šå¼‚å¸¸çš„é—®é¢˜
* ä¿®å¤å¯è§†åŒ–ç¼–è¾‘æ’åºçš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2025 å¹´ 3 æœˆ 30 æ—¥

## 2.7.1

æ–°å¹´å¿«ä¹ï¼

* ä¿®å¤éƒ¨åˆ†æœåŠ¡æä¾›å•†é…ç½®å¯èƒ½ä¼šé—ªé€€çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2025 å¹´ 1 æœˆ 1 æ—¥

## 2.7.0

### æ–°å¢

* iOS 18 Control Widget
* æ–°å¢ REJECT-DROP ç­–ç•¥
* æ–°å¢åœ¨ Stash è¿è¡Œæ—¶æ›´æ–° GEOIP æ•°æ®åº“
* æ–°å¢é€šè¿‡å¯è§†åŒ–ç¼–è¾‘å™¨ç¼–è¾‘åŸºæœ¬é‡å†™
* æ–°å¢ ip.im IP ä¿¡æ¯æä¾›å•†
* å›¾æ ‡é€‚é… iOS 18 Dark å’Œ Tinted

### ä¼˜åŒ–

* æ›´æ–°è¿œç¨‹èµ„æºæ—¶ï¼Œç°åœ¨ Stash å°†ä½¿ç”¨ ETag åå•†ç¼“å­˜ã€‚åœ¨èµ„æºæœªå˜åŒ–æ—¶ï¼ŒStash ä¸ä¼šé‡æ–°ä¸‹è½½èµ„æºï¼Œä»¥èŠ‚çœç”¨æˆ·åŠè§„åˆ™é›†åˆæä¾›æ–¹çš„å¸¦å®½ã€‚
* å½“è®¾ç½® server-cert-fingerprint æ—¶ï¼Œæ— éœ€é…ç½® skip-cert-verify ä¸º true
* ä¼˜åŒ–å¤šè¯­è¨€ç¿»è¯‘
* ä¼˜åŒ–ç³»ç»Ÿ DNS

### ä¿®å¤

* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹é…ç½®æ–‡ä»¶åç§°å¼‚å¸¸çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2024 å¹´ 10 æœˆ 21 æ—¥

## 2.6.6

* ä¿®å¤ 2.6.5 ç‰ˆæœ¬ YAML ç©ºæ ¼å¯èƒ½å¯¼è‡´é…ç½®æ–‡ä»¶è¯†åˆ«é”™è¯¯çš„é—®é¢˜
* ä¼˜åŒ– QUIC

â„¹ï¸

å‘å¸ƒäº 2024 å¹´ 9 æœˆ 11 æ—¥

## 2.6.5

* ä¼˜åŒ–å—…æ¢
  å½“è¿æ¥åˆ°åŸŸåæ—¶ï¼ŒStash ä¼šå¯¹æ‰€æœ‰è§£æç»“æœåŒæ—¶å‘èµ· TCP æ¡æ‰‹å¹¶ä½¿ç”¨æœ€å¿«æˆåŠŸçš„è¿æ¥ã€‚å½“å—…æ¢åˆ°åŸŸåæ—¶ï¼ŒStash ä¼šè§¦å‘ä¸€æ¬¡ DNS è§£æä»¥è¿›è¡Œä¸Šè¿°åŠŸèƒ½ã€‚å½“åŸŸååœ¨å…¬å…±è§£ææœæ— è§£ææ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿æ¥é”™è¯¯ï¼Œæœ¬æ¬¡ç‰ˆæœ¬æé«˜äº†ä¸æ— è§£æåŸŸåçš„å…¼å®¹æ€§ã€‚
* ä¼˜åŒ– HTTP å¼•æ“å¯¹å¸¦ç«¯å£çš„ Host çš„å…¼å®¹æ€§
* Happy Eyeballs Dual Stack ä»å®éªŒæ€§åŠŸèƒ½ç§»åŠ¨åˆ°æ­£å¼ç‰ˆï¼Œå¼€å¯åä¼šä¼˜åŒ– IPv4 ä¸ IPv6 åŒæ ˆçš„å…¼å®¹æ€§
* æ”¯æŒ Proxy-Providers ä¸­è®¾ç½® benchmark-url ä¸ benchmark-timeout
* ä¿®å¤éƒ¨åˆ† UI åˆ—è¡¨çš„æ„å¤–è·³åŠ¨

â„¹ï¸

å‘å¸ƒäº 2024 å¹´ 9 æœˆ 7 æ—¥

## 2.6.4

### æ–°å¢

* æ”¯æŒ Hysteria 2 ç«¯å£è·³è·ƒç‰¹æ€§
* æ–°å¢ SSH åè®®æ”¯æŒ
* æ–°å¢ Juicity åè®®æ”¯æŒ
* Shortcuts æ”¯æŒ match\_geosite è¯­æ³•
* å½“ CA è¯ä¹¦ä¸å—ä¿¡ä»»æ—¶ï¼ŒMitM åŠŸèƒ½ä¼šè‡ªåŠ¨å…³é—­
* æ”¯æŒåœ¨ MitM è®¾ç½®é¡µé¢åˆ é™¤å·²åˆ›å»ºçš„è¯ä¹¦
* æ–°å¢ä¿„è¯­æ”¯æŒ

### ä¼˜åŒ–

* ä¼˜åŒ– QUIC åè®® 0-RTT
* ä¼˜åŒ–è„šæœ¬ Header å…¼å®¹æ€§
* ä¼˜åŒ–è·³è¿‡ä»£ç† / è·¯ç”±é¡µé¢äº¤äº’
* ä¼˜åŒ– App ä½“ç§¯
* ä¼˜åŒ– CA è¯ä¹¦é€»è¾‘ï¼Œç°åœ¨ç­¾å‘çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 10 å¹´
* ä¼˜åŒ–å®‰è£… CA è¯ä¹¦äº¤äº’é€»è¾‘

### ä¿®å¤

* ä¿®å¤äº†å¯è§†åŒ–ç¼–è¾‘ä¸­æ‹–æ‹½æ’åºæ—¶ UI å¯èƒ½é”™ä½çš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹ç¼“å­˜æ–‡ä»¶å ç”¨ç©ºé—´è¿‡å¤§çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2024 å¹´ 8 æœˆ 2 æ—¥

## 2.6.3

* ä¼˜åŒ– WireGuard è¿æ¥ç¨³å®šæ€§
* ä¼˜åŒ– Hysteria2 åœ¨éƒ¨ä»½ç½‘ç»œä¸‹ 0-RTT çš„å…¼å®¹æ€§
* ä¼˜åŒ–è¿è¡Œæ—¶ MitM è¯ä¹¦ç”Ÿæˆè¿‡ç¨‹ï¼Œå‡å°‘é‡å¤è®¡ç®—ã€æé«˜æ€§èƒ½å’ŒèŠ‚çœç”µæºæ¶ˆè€—
* ä¼˜åŒ–ä½¿ç”¨ underlying-proxy çš„ WireGuardï¼Œåœ¨è¿æ¥å‡ºé”™æ—¶èƒ½è‡ªåŠ¨æ¢å¤
* ä¿®å¤ 15.4 ä»¥ä¸‹ç³»ç»Ÿè„šæœ¬æ— æ³•è¿è¡Œçš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2024 å¹´ 6 æœˆ 18 æ—¥

## 2.6.2

* ä¿®å¤éƒ¨åˆ†æƒ…å†µ $persistentStore å¯èƒ½æ— æ³•æ­£ç¡®ä¿å­˜çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2024 å¹´ 5 æœˆ 29 æ—¥

## 2.6.1

### æ–°å¢

* Stash ç°å·²ä¼˜åŒ–å—…æ¢ï¼Œæ”¯æŒåœ¨ã€Œä»…ä½¿ç”¨ Tunnel ä»£ç†ã€ä¸‹ä½¿ç”¨æ›´å¤šçš„è¦†å†™
* ç°å·²æ”¯æŒå—…æ¢ TCP è¿æ¥ä¸­å¯èƒ½çš„ HTTP è¯·æ±‚ï¼ŒåŒ…æ‹¬ Method Host URL
* æ”¯æŒ DNS over HTTP/3
* æ”¯æŒä»£ç†æœåŠ¡å™¨çš„ Server Certificate Fingerprint Pinningï¼Œå¼€å¯åä¼šåœ¨ TLS æ¡æ‰‹æ—¶éªŒè¯æœåŠ¡å™¨è¯ä¹¦ SHA256 æŒ‡çº¹
* å·¥å…·æ–°å¢ Script Hub
* æ”¯æŒç‚¹å‡»ç­–ç•¥ç»„å›¾æ ‡æŠ˜å ç­–ç•¥ç»„

### ä¼˜åŒ–

* ä¼˜åŒ–è„šæœ¬æ€§èƒ½å’Œå†…å­˜å ç”¨ï¼Œè„šæœ¬æ€§èƒ½å¤§å¹…æå‡
* ä¼˜åŒ–åŸºäº QUIC åè®®çš„æ€§èƒ½
* ä¼˜åŒ–æ–­å¼€ VPN è¿æ¥æ—¶çš„é€Ÿåº¦

### ä¿®å¤

* ä¿®å¤ iPad ä¸Šæ— æ³•æ‰«æ QR Code çš„é—®é¢˜
* ä¿®å¤ä¸€ä¸ªå¯è§†åŒ–ç¼–è¾‘å¯èƒ½çš„å´©æºƒ
* ä¿®å¤æœ€è¿‘å¼•å…¥çš„ä¸€ä¸ªè„šæœ¬å†…å­˜å ç”¨å»¶è¿Ÿé‡Šæ”¾é—®é¢˜
* ä¿®å¤è„šæœ¬ $httpClient å¼‚å¸¸å¤„ç†ä¸æ­£ç¡®çš„é—®é¢˜
* ä¿®å¤è„šæœ¬ $persistentStore.write ä¼ å…¥å€¼ä¸º null æˆ– undefined æ—¶ä¸èƒ½ä¿å­˜çš„é—®é¢˜
* ä¿®å¤ Today Widget ç‚¹å‡»å¼€å…³åçŠ¶æ€å¯èƒ½ä¸åˆ·æ–°çš„é—®é¢˜
* ä¿®å¤è„šæœ¬è¶…æ—¶å¼‚å¸¸çš„é—®é¢˜
* ä¿®å¤éƒ¨ä»½è„šæœ¬æ‰§è¡Œå¤±è´¥é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2024 å¹´ 5 æœˆ 22 æ—¥

## 2.6.0

### æ–°å¢

* æ”¯æŒ iOS 17 Interactive Widget
* æ›´æ¢ JavaScript å¼•æ“ï¼Œæ–°å¼•æ“æ”¯æŒ WebAPI
* æ”¯æŒ DNS æŸ¥è¯¢è·Ÿéšè§„åˆ™
* æ–°å¢æ”¯æŒ classical text è§„åˆ™é›†åˆ
* æ–°å¢æ”¯æŒä¸€é”®æ›´æ–°å…¨éƒ¨è¦†å†™
* æ–°å¢è¦†å†™åˆ†ç±»
* æ–°å¢è¦†å†™å›¾æ ‡
* æ”¯æŒä»£ç†ã€ŒApple æ¨é€é€šçŸ¥ã€ã€ã€ŒWi-Fi Callingï¼Œå½©ä¿¡ï¼ŒçŸ­ä¿¡ã€ã€ã€ŒAirPlayï¼Œ AirDropã€
* è„šæœ¬ $environment æ”¯æŒ device-model
* è„šæœ¬ $httpClient æ”¯æŒå‚æ•° timeoutã€insecureã€auto-cookieã€auto-redirect

### ä¼˜åŒ–

* ä¼˜åŒ– UDP å…¼å®¹æ€§
* ä¼˜åŒ– Script å†…å­˜
* ä¼˜åŒ–è¦†å†™é¢„è§ˆ
* ä¼˜åŒ–è„šæœ¬ $httpclient å…¼å®¹æ€§ï¼Œä¿®å¤ä¸éƒ¨åˆ†æœåŠ¡å™¨çš„é€šä¿¡å¯èƒ½ä¼šå¼‚å¸¸çš„é—®é¢˜
* ä¼˜åŒ–å¯è§†åŒ– DNS ç¼–è¾‘ï¼Œæ”¯æŒä»é¦–é¡µè¿›å…¥

### ä¿®å¤

* ä¿®å¤ DNS over QUIC å“åº”è¶…æ—¶çš„é—®é¢˜
* ä¿®æ­£è„šæœ¬ $argument å‚æ•°è¡Œä¸ºï¼Œå½“æœªè®¾ç½® argument æ—¶ï¼Œ$argument ä¸º undefined
* ä¿®æ­£éƒ¨åˆ†å·¨å‹è§„åˆ™åŒ¹é…å¯èƒ½ä¸å‡†ç¡®çš„é—®é¢˜
* ä¿®å¤ doq å¯èƒ½ä¼šå¯¼è‡´æ–­å¼€çš„é—®é¢˜
* ä¿®å¤ç½‘ç»œè¿æ¥ä¸èƒ½æ­£ç¡®è¯†åˆ«æ¥è‡ª Stash å†…éƒ¨çš„è¿æ¥çš„é—®é¢˜
* ä¿®å¤å¯¼å…¥é…ç½®å¯èƒ½ä¼šæ²¡å“åº”çš„é—®é¢˜
* ä¿®å¤ä¸€å¤„ç­–ç•¥ç»„å´©æºƒ
* ä¿®å¤åŒåè¦†å†™æ— æ³•å®‰è£…çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2024 å¹´ 4 æœˆ 2 æ—¥

## 2.5.6

* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒæŒ‰é’®å¼€å…³çŠ¶æ€ä¸æ­£ç¡®çš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ†è½¬æ¢åçš„è„šæœ¬æ— æ³•å®‰è£…çš„é—®é¢˜
* ä¿®æ­£å¹¶å‘è„šæœ¬éƒ¨åˆ†æƒ…å†µä¸‹å¼‚å¸¸çš„é—®é¢˜
* ä¼˜åŒ–è„šæœ¬å†…å­˜å ç”¨
* è„šæœ¬ setTimeout() æ”¯æŒä¼ å…¥å‚æ•°ï¼š
  setTimeout(function, delay, param1, param2, /\* â€¦, \*/ paramN)

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 12 æœˆ 15 æ—¥

## 2.5.5

* ä¿®å¤ä¸Šä¸€ä¸ªç‰ˆæœ¬ä½¿ç”¨è„šæœ¬æ—¶å†…å­˜å¼‚å¸¸å¯¼è‡´æ–­å¼€çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 12 æœˆ 6 æ—¥

## 2.5.4

* ä¿®å¤ä¸€äº›æ½œåœ¨çš„å´©æºƒ
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹è„šæœ¬æ— æ³•è¿è¡Œçš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 12 æœˆ 4 æ—¥

## 2.5.3

* ä¿®å¤ Network Extension éƒ¨åˆ†å°æ¦‚ç‡å´©æºƒã€‚
* ä¿®å¤å®šæ—¶è„šæœ¬å¯èƒ½ä¸å‡†æ—¶çš„é—®é¢˜ã€‚
* ä¿®å¤åœ¨è®¾ç½®é¡µé¢åˆ‡æ¢é…ç½®é¦–é¡µä¿¡æ¯å¯èƒ½ä¸åˆ·æ–°çš„é—®é¢˜ã€‚
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹æ— æ³•ç‚¹å¼€é¦–é¡µè§„åˆ™çš„é—®é¢˜ã€‚
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹é‡å¤æç¤ºé…ç½®è‡ªåŠ¨æ›´æ–°çš„é—®é¢˜ã€‚

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 11 æœˆ 18 æ—¥

## 2.5.2

* ä¿®å¤ Hysteria 2 éƒ¨åˆ†æƒ…å†µä¸‹è¶…æ—¶çš„é—®é¢˜
* é”™è¯¯ä¿®å¤å’Œæ”¹è¿›

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 11 æœˆ 9 æ—¥

## 2.5.0

* æå‡äº†è™šæ‹Ÿç½‘å¡æ€§èƒ½
* æ”¯æŒ Hysteria 2 åè®®
* ä¿®å¤ GEOSITE ç›¸å…³é—®é¢˜
* ä¿®å¤ WireGuard åè®®åœ¨æ¼«æ¸¸æ—¶çš„é—®é¢˜
* å½“ä»èœ‚çªæ•°æ®åˆ‡æ¢è‡³ Wi-Fi æ—¶ï¼ŒåŸºäº QUIC çš„åè®®å°†å°è¯•æ¼«æ¸¸è‡³ Wi-Fi
* å½“ä»èœ‚çªæ•°æ®åˆ‡æ¢è‡³ Wi-Fi æ—¶ï¼ŒDoH/DoQ å°†é‡æ–°å»ºç«‹è¿æ¥ï¼Œä»¥ç¡®ä¿æ›´å‡†ç¡®çš„ DNS æŸ¥è¯¢è®°å½•
* Stash ç°åœ¨èƒ½å¤Ÿè‡ªåŠ¨å±è”½ MitM åˆ—è¡¨ä¸­çš„ QUIC æµé‡ï¼Œå¹¶è®©å®ƒå›é€€è‡³ HTTP1/2
* ä¿®æ­£äº†é¦–é¡µä¿¡æ¯æ›´æ–°æ»åçš„é—®é¢˜
* ä¿®å¤ IPv6 ç¯å¢ƒä¸‹è·¯ç”±è¡¨å¯èƒ½é—ªé€€çš„é—®é¢˜
* å®éªŒæ€§åœ°å¼•å…¥äº† Happy Eyeballs Dual Stack åŠŸèƒ½
  å¼€å¯æ­¤åŠŸèƒ½åï¼ŒIPv6 å’Œ IPv4 å°†è¢«åŒç­‰å¯¹å¾…ã€‚åœ¨å¹¶å‘æ¨¡å¼ä¸‹ï¼Œä¾‹å¦‚ï¼ŒStash ä¼šåŒæ—¶å¯¹åŸŸåçš„æ‰€æœ‰ A è®°å½•å’Œ AAAA è®°å½•è¿›è¡Œ TCP æ¡æ‰‹å°è¯•ï¼Œå¹¶é€‰æ‹©æœ€å¿«æ¡æ‰‹æˆåŠŸçš„è¿›è¡Œè¿æ¥ã€‚

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 11 æœˆ 7 æ—¥

## 2.4.7

* ä¿®å¤ Sub-Storeâ„¢

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 10 æœˆ 9 æ—¥

## 2.4.6

* ä¿®å¤åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ Network Extension å¯èƒ½ä¼šæ–­å¼€çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 10 æœˆ 4 æ—¥

## 2.4.4

* ä¼˜åŒ– JavaScript å¼•æ“
* æ–°å¢ã€Œå¼€å…³ã€å¿«æ·æŒ‡ä»¤

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 9 æœˆ 27 æ—¥

## 2.4.2

* ä¼˜åŒ– HTTP å¼•æ“çš„å…¼å®¹æ€§
* é”™è¯¯ä¿®å¤å’Œæ”¹è¿›

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 9 æœˆ 22 æ—¥

## 2.4.1

* é”™è¯¯ä¿®å¤å’Œæ”¹è¿›

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 9 æœˆ 20 æ—¥

## 2.4.0

* é…ç½®åŒæ­¥æ”¯æŒå°†é…ç½®æ–‡ä»¶ä¼ è¾“åˆ° tvOS
* è¿œç¨‹æ§åˆ¶å™¨æ”¯æŒè‡ªåŠ¨æ³¨å†Œè®¾å¤‡
* ä¼˜åŒ– QUIC åè®®
* ä¼˜åŒ–è€—ç”µ
* ä¼˜åŒ– UI åŠ¨ç”»
* é”™è¯¯ä¿®å¤å’Œæ”¹è¿›

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 9 æœˆ 16 æ—¥

## 2.3.1

* ä¿®å¤ Country.mmdb æ— æ³•è‡ªåŠ¨æ›´æ–°çš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹åœ¨æœªå¯åŠ¨æ—¶ç­–ç•¥ç»„é¡µé¢ä¸æ˜¾ç¤ºçš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹æ— æ³•è¯»å– iCloud æ–‡ä»¶çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 7 æœˆ 9 æ—¥

## 2.3.0

* æ–°å¢æ”¯æŒ Tuic v5 åè®®
* è‡ªåŠ¨ç”Ÿæˆåç§°ä¸º PROXY çš„ç­–ç•¥ç»„ï¼Œé»˜è®¤åŒ…å«æ‰€æœ‰ä»£ç†ï¼Œæ–¹ä¾¿å¤–éƒ¨ Override å¼•ç”¨

### ç»è¿‡é‡æ„åå…¨æ–°çš„å¯è§†åŒ–ç¼–è¾‘å™¨

* å¯è§†åŒ–ç¼–è¾‘å™¨æ”¯æŒä¿ç•™æ³¨é‡Šå’Œæ ·å¼
* æœ¬åœ°ä»£ç†ç¼–è¾‘æ”¯æŒæ›´å¤šä»£ç†åè®®å’Œå­—æ®µ
* è§„åˆ™ç¼–è¾‘æ”¯æŒæ›´å¤šå­—æ®µå’Œæ‹–åŠ¨æ’åº
* ç­–ç•¥ç»„ç¼–è¾‘æ”¯æŒæ›´å¤šå­—æ®µå’Œæ”¯æŒåœ¨ç•Œé¢éšè—ç­–ç•¥ç»„
* è¿œç¨‹ä»£ç†é›†ç¼–è¾‘æ”¯æŒæ›´å¤šå­—æ®µ
* è§„åˆ™é›†ç¼–è¾‘æ”¯æŒæ›´å¤šå­—æ®µå’Œç›´æ¥é€‰æ‹©è¿œç¨‹è§„åˆ™é›†
* ä»£ç†é“¾æ”¯æŒå•ç‹¬è®¾ç½®å»¶è¿Ÿæµ‹è¯•ï¼Œä»¥æ•´ä½“æ–¹å¼è¿›è¡Œæµ‹è¯•ï¼Œæä¾›æ›´å‡†ç¡®çš„ç»“æœ
* åˆ é™¤æˆ–é‡å‘½åä»£ç†ã€ç­–ç•¥ç»„ä»¥åŠè¿œç¨‹ä»£ç†ç­‰æ“ä½œï¼Œä¼šè”åŠ¨ä¿®æ”¹å¼•ç”¨ï¼Œç¡®ä¿æ“ä½œçš„ä¸€è‡´æ€§
* è®¢é˜…å¡ç‰‡æ”¯æŒå±•ç¤ºå¤šä¸ªæœåŠ¡æä¾›å•†çš„è®¢é˜…ä¿¡æ¯
* é¦–é¡µç‚¹å‡»ç›¸å…³å¡ç‰‡ï¼Œå¿«é€Ÿè¿›å…¥å¯è§†åŒ–ç¼–è¾‘ç•Œé¢è¿›è¡Œç¼–è¾‘å’Œç®¡ç†
* æ‰«æäºŒç»´ç å¯¼å…¥æ”¯æŒä»ç›¸å†Œé€‰æ‹©å›¾ç‰‡
* æ‰«æäºŒç»´ç å¯¼å…¥æ”¯æŒæ›´å¤šæ ¼å¼çš„äºŒç»´ç 
* æ‰«æäºŒç»´ç å¯¼å…¥æ”¯æŒå¯¼å…¥å¸¦æ’ä»¶ã€æ··æ·†ã€æ‰¿è½½ç½‘ç»œã€TLS çš„äºŒç»´ç 
* ä¼˜åŒ–èœå•æ˜¾ç¤º
* ä¼˜åŒ–å›¾æ ‡é›†åˆå®‰è£…å’Œåˆ é™¤
* ä¼˜åŒ–ä¸€é”®åˆ é™¤æ—¥å¿—ï¼Œä¿ç•™æœ€æ–°æ—¥å¿—
* ä¼˜åŒ–åœ¨ iOS 15+ è®¾å¤‡ä¸Šçš„äº¤äº’
* ä¿®å¤ä¸Šæ¸¸ DNS æœåŠ¡å™¨è¿”å› Fake IP æƒ…å†µä¸‹çš„å…¼å®¹æ€§
* ä¿®å¤å¯è§†åŒ–ç¼–è¾‘ DNSã€æ—¥å¿—ç­‰çº§æ—¶å¯èƒ½é€ æˆé…ç½®é”™è¯¯çš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ† UI é”™ä½
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹ iOS 13 é—ªé€€
* ä¿®å¤ä¸€ç³»åˆ—é”™è¯¯

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 6 æœˆ 24 æ—¥

## 2.2.4

* æœ€è¿‘è¯·æ±‚æ˜¾ç¤ºæ›´å¤šä¿¡æ¯
* å…¨é¢ä¼˜åŒ–è½¯ä»¶æ€§èƒ½
* ä¼˜åŒ– iCloud æ–‡ä»¶å‚¨å­˜
* ä¼˜åŒ– UI ç»†èŠ‚
* iCloud ä¸­çš„é…ç½®æ–‡ä»¶å˜æ›´æ”¯æŒå®æ—¶é‡æ–°åŠ è½½
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹è‡ªåŠ¨æµ‹é€Ÿå¤±æ•ˆçš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹æ— æ³•è‡ªåŠ¨æ›´æ–°è¿œç¨‹èµ„æºçš„é—®é¢˜
* é”™è¯¯ä¿®å¤å’Œæ”¹è¿›

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 5 æœˆ 24 æ—¥

## 2.2.3

* æ”¹å–„ Vmess çš„æ€§èƒ½é—®é¢˜
* é”™è¯¯ä¿®å¤å’Œæ”¹è¿›

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 5 æœˆ 10 æ—¥

## 2.2.2

* æ–°å¢è‡ªå®šä¹‰ Host åŠŸèƒ½
* ä¿®å¤ iPad å³ä¾§é¡µé¢åœ¨éƒ¨åˆ†æƒ…å†µä¸‹ä¸æ›´æ–°çš„é—®é¢˜
* ä¿®å¤é¦–é¡µé…ç½®æ–‡ä»¶åœ¨éƒ¨åˆ†æƒ…å†µä¸‹ä¸æ›´æ–°çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 4 æœˆ 28 æ—¥

## 2.2.1

### æ–°åŠŸèƒ½

* æ–°å¢ GEOSITE è§„åˆ™ç±»å‹ã€‚
* è„šæœ¬ $httpClient ç°æ”¯æŒäºŒè¿›åˆ¶æ¨¡å¼ã€‚
* è„šæœ¬ $httpClient ç°æ”¯æŒé€šè¿‡ HTTP Header æŒ‡å®šå‡ºç«™ä»£ç†ç­–ç•¥ã€‚
* æ–°å¢ Stash è¿œç¨‹æ§åˆ¶å™¨ï¼Œå¯é€šè¿‡ Stash iOS / Stash Mac Dashboard æ§åˆ¶å…¶ä»–è®¾å¤‡ä¸Šçš„ Stashã€‚å·²ä¿å­˜çš„è¿œç¨‹è®¾å¤‡å°†é€šè¿‡ iCloud åŒæ­¥ã€‚
* æ”¯æŒ TLS Session Resumptionï¼Œæå‡ TLS æ¡æ‰‹æ•ˆç‡ã€‚æ­¤åŠŸèƒ½éœ€æœåŠ¡å™¨ç«¯æ”¯æŒï¼Œå¯åœ¨è¿æ¥é¡µé¢ç¡®è®¤æ˜¯å¦æˆåŠŸå¯ç”¨ã€‚
* æ–°å¢ Lite æ¨¡å¼ï¼Œä¼˜åŒ–å†…å­˜å ç”¨ä¸ç”µæ± è€—ç”µï¼Œéƒ¨åˆ†åŠŸèƒ½å°†è¢«ç¦ç”¨ã€‚
* æ–°å¢ no-track å‚æ•°ï¼ŒåŒ¹é…åˆ°æ­¤è§„åˆ™çš„è¿æ¥å°†åœ¨è¿æ¥åˆ—è¡¨ä¸­éšè—ã€‚

### æ”¹è¿›

* ä¼˜åŒ–å¤§é‡ nameserver-policy åœºæ™¯ä¸‹çš„å†…å­˜å ç”¨ã€‚
* æ”¹è¿›ç½‘ç»œè¯Šæ–­é¡µé¢ã€‚
* æå‡ HTTP / TLS å—…æ¢èƒ½åŠ›ã€‚
* æé«˜ relay ç­–ç•¥ç»„ç¨³å®šæ€§ã€‚
* ä¼˜åŒ–é¦–é¡µä¸ç­–ç•¥ç»„é¡µé¢æ€§èƒ½ï¼Œä¿®å¤å¡é¡¿é—®é¢˜ã€‚
* æé«˜ Stash Tile è®¡æ—¶å™¨å‡†ç¡®æ€§ã€‚
* ä¼˜åŒ–ç½‘ç»œåˆ‡æ¢ä¸‹ DNS ç¼“å­˜åˆ·æ–°ç­–ç•¥ã€‚
* æ”¹å–„è„šæœ¬ç¼–è¾‘å™¨ç”¨æˆ·ä½“éªŒã€‚
* æå‡å®‰è£… Override ç”¨æˆ·ä½“éªŒã€‚

### Bug ä¿®å¤

* ä¿®å¤éƒ¨åˆ†å¯è§†åŒ–ç¼–è¾‘é—®é¢˜ã€‚
* è§£å†³ override åˆå¹¶æ—¶ emoji è¡¨æƒ…è¢«è½¬ä¹‰çš„é—®é¢˜ã€‚
* ä¿®å¤ä¸€ç³»åˆ—ä¸‹è½½é…ç½®çš„å…¼å®¹æ€§é—®é¢˜ã€‚

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 4 æœˆ 26 æ—¥

## 2.2.0

### åŠŸèƒ½

* æ–°å¢ GEOSITE è§„åˆ™ç±»å‹ã€‚
* è„šæœ¬ $httpClient ç°æ”¯æŒäºŒè¿›åˆ¶æ¨¡å¼ã€‚
* $httpClient ç°æ”¯æŒé€šè¿‡ HTTP Header æŒ‡å®šå‡ºç«™ä»£ç†ç­–ç•¥ã€‚
* æ–°å¢ Stash è¿œç¨‹æ§åˆ¶å™¨ï¼Œå¯é€šè¿‡ Stash iOS / Stash Mac Dashboard æ§åˆ¶å…¶ä»–è®¾å¤‡ä¸Šçš„ Stashã€‚å·²ä¿å­˜çš„è¿œç¨‹è®¾å¤‡å°†é€šè¿‡ iCloud åŒæ­¥ã€‚
* æ”¯æŒ TLS Session Resumptionï¼Œæå‡ TLS æ¡æ‰‹æ•ˆç‡ã€‚æ­¤åŠŸèƒ½éœ€æœåŠ¡å™¨ç«¯æ”¯æŒï¼Œå¯åœ¨è¿æ¥é¡µé¢ç¡®è®¤æ˜¯å¦æˆåŠŸå¯ç”¨ã€‚
* æ–°å¢ Lite æ¨¡å¼ï¼Œä¼˜åŒ–å†…å­˜å ç”¨ä¸ç”µæ± è€—ç”µï¼Œéƒ¨åˆ†åŠŸèƒ½å°†è¢«ç¦ç”¨ã€‚
* æ–°å¢ no-track å‚æ•°ï¼ŒåŒ¹é…åˆ°æ­¤è§„åˆ™çš„è¿æ¥å°†åœ¨è¿æ¥åˆ—è¡¨ä¸­éšè—ã€‚

### æ”¹è¿›

* ä¼˜åŒ–å¤§é‡ nameserver-policy åœºæ™¯ä¸‹çš„å†…å­˜å ç”¨ã€‚
* æ”¹è¿›ç½‘ç»œè¯Šæ–­é¡µé¢ã€‚
* æå‡ HTTP / TLS å—…æ¢èƒ½åŠ›ã€‚
* æé«˜ relay ç­–ç•¥ç»„ç¨³å®šæ€§ã€‚
* ä¼˜åŒ–é¦–é¡µä¸ç­–ç•¥ç»„é¡µé¢æ€§èƒ½ï¼Œä¿®å¤å¡é¡¿é—®é¢˜ã€‚
* æé«˜ Stash Tile è®¡æ—¶å™¨å‡†ç¡®æ€§ã€‚
* ä¼˜åŒ–ç½‘ç»œåˆ‡æ¢ä¸‹ DNS ç¼“å­˜åˆ·æ–°ç­–ç•¥ã€‚
* æ”¹å–„è„šæœ¬ç¼–è¾‘å™¨ç”¨æˆ·ä½“éªŒã€‚
* æå‡å®‰è£… Override ç”¨æˆ·ä½“éªŒã€‚

### ä¿®å¤

* ä¿®å¤éƒ¨åˆ†å¯è§†åŒ–ç¼–è¾‘é—®é¢˜ã€‚
* è§£å†³ override åˆå¹¶æ—¶ emoji è¡¨æƒ…è¢«è½¬ä¹‰çš„é—®é¢˜ã€‚
* ä¿®å¤ä¸€ç³»åˆ—ä¸‹è½½é…ç½®çš„å…¼å®¹æ€§é—®é¢˜ã€‚

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 4 æœˆ 21 æ—¥

## 2.1.1

é”™è¯¯ä¿®å¤å’Œä¼˜åŒ–

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 2 æœˆ 26 æ—¥

## 2.1.0

* WireGuard ç°åœ¨å¯ä»¥ä½œä¸º Layer 4 çš„ä»£ç†ä½¿ç”¨
* èŠ‚ç‚¹ä¿¡æ¯æ–°å¢å…¥ç«™ä¿¡æ¯å’Œå‡ºç«™ä¿¡æ¯æ˜¾ç¤º
* å…¨æ–°çš„ JavaScript è„šæœ¬å¼•æ“
* è„šæœ¬ç°åœ¨æ”¯æŒå¹¶å‘æ‰§è¡Œ
* è„šæœ¬ç°åœ¨æ”¯æŒäºŒè¿›åˆ¶è„šæœ¬
* è„šæœ¬ç°åœ¨æ”¯æŒå°†é€šçŸ¥è·³è½¬åˆ° URL
* è„šæœ¬æ–°å¢ç¯å¢ƒå˜é‡ $environment.systemï¼ˆiOS / macOSï¼‰
* å¯è§†åŒ–ç¼–è¾‘å™¨ç°åœ¨æ”¯æŒ WireGuard å’Œ TUIC
* é€šè¿‡æ‰«æäºŒç»´ç å¯¼å…¥é…ç½®æ–‡ä»¶
* ä¼˜åŒ–çš„ä»ªè¡¨æ¿ç°åœ¨æ˜¾ç¤ºç½‘ç»œæµé‡ç»Ÿè®¡ä¿¡æ¯ã€DNS ç¼“å­˜ä¿¡æ¯å’Œè§„åˆ™æ€»æ•°
* é€šè¿‡å°† interval è®¾ç½®ä¸º -1 å¯å…³é—­è‡ªåŠ¨ç­–ç•¥ç»„è¿é€šæ€§æ£€æŸ¥
* è°ƒæ•´äº†å„ç§ QUIC åè®®å®ç°ä»¥æé«˜å…¼å®¹æ€§
* å‡å°‘äº† Hysteria çš„å†…å­˜å ç”¨
* ä¿®æ­£äº† Stash HTTP å¼•æ“ä¸­ä¸€äº›è¯·æ±‚çš„è¡Œä¸º
* ä¿®å¤äº†é€šçŸ¥æ— æ³•å †å çš„é—®é¢˜
* ä¼˜åŒ–äº†è„šæœ¬ Header çš„å…¼å®¹æ€§
* æ–°å¢äº† Override è¯­æ³•

â„¹ï¸

å‘å¸ƒäº 2023 å¹´ 1 æœˆ 4 æ—¥

## 2.0.0

* å®Œå…¨é‡æ„çš„ç½‘ç»œå¼•æ“
* å…¨æ–°çš„ç”¨æˆ·ç•Œé¢

Stash 2 é‡æ–°è®¾è®¡äº†ç½‘ç»œè½¬å‘å¼•æ“ï¼Œä» TCPã€QUICã€DNS å¤šä¸ªå±‚é¢ä¼˜åŒ–ç½‘ç»œæ€§èƒ½ã€‚ä¸ºå„ç§ä»£ç†åè®®å•ç‹¬è®¾è®¡çš„å¥åº·æ£€æŸ¥ç­–ç•¥ï¼ŒåŠæ—¶æ„ŸçŸ¥ä»£ç†èŠ‚ç‚¹ç¦»çº¿ï¼Œé…åˆ URL-TEST æ„å»ºé«˜å¯ç”¨ç­–ç•¥ç»„ã€‚

ç®€æ´æ˜äº†çš„é¦–é¡µï¼Œå±•ç¤ºå®æ—¶çš„ç½‘ç»œæµé‡ï¼Œé“¾è·¯è´¨é‡ï¼Œæµåª’ä½“è§£é”ä¿¡æ¯ï¼Œæ›´å…è®¸ä½ ä½¿ç”¨ JavaScript ç¼–å†™è‡ªå®šä¹‰é¢æ¿ï¼ˆTileï¼‰ã€‚

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 11 æœˆ 20 æ—¥

## 1.6.9

* é”™è¯¯ä¿®å¤å’Œæ”¹è¿›

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 8 æœˆ 19 æ—¥

## 1.6.8

* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹è¯ä¹¦å¯èƒ½å®‰è£…å¤±è´¥çš„é—®é¢˜
* ä¼˜åŒ– iCloud åŒæ­¥è¿‡ç¨‹

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 8 æœˆ 16 æ—¥

## 1.6.7

* æé«˜æ•°æ®åŒ…ä¼ è¾“æ€§èƒ½

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 7 æœˆ 31 æ—¥

## 1.6.6

* ä¿®å¤äº†ä¸€äº›å·²çŸ¥é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 7 æœˆ 23 æ—¥

## 1.6.5

* æ–°å¢æ—¥è¯­ç¿»è¯‘
* æ–°å¢éŸ©è¯­ç¿»è¯‘

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 6 æœˆ 11 æ—¥

## 1.6.4

* ä¿®å¤éƒ¨åˆ†ä¿¡æ¯æ˜¾ç¤ºä¸æ­£ç¡®çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 6 æœˆ 9 æ—¥

## 1.6.3

é”™è¯¯ä¿®å¤å’Œæ”¹è¿›

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 6 æœˆ 8 æ—¥

## 1.6.2

* ä¿®å¤è„šæœ¬ HTTP Header è§£æçš„é—®é¢˜
* ä¿®å¤ CA è¯ä¹¦é¡µé¢æ½œåœ¨å´©æºƒçš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹è„šæœ¬æ—¥å¿—ä¸æ˜¾ç¤ºçš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹é…ç½®æ–‡ä»¶æ— æ³•åˆ‡æ¢çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 6 æœˆ 1 æ—¥

## 1.6.1

* æ–°å¢ Connection Log
* æ–°å¢æœ¬åœ°é…ç½®æ–‡ä»¶é€šè¿‡ "subscribe-url" Key è·å–è®¢é˜…ä¿¡æ¯
* æ–°å¢å¯è§†åŒ–ç¼–è¾‘å¯¼å…¥ Icon Set JSON
* æ–°å¢ Time Tab åˆ° Connection é¡µé¢ï¼ŒæŸ¥çœ‹è¿æ¥è¿‡ç¨‹å„ç¯èŠ‚è€—æ—¶
* æ–°å¢ Fallback DNS å¼€å…³ï¼Œå¦‚éœ€è¦ Fallback DNS è¯·æ‰‹åŠ¨å¼€å¯
* æ–°å¢æ”¯æŒé•¿æŒ‰åˆ·æ–°è®¢é˜…ä¿¡æ¯
* æ–°å¢å»¶è¿Ÿæµ‹è¯•æ–¹æ³•ä¿®æ”¹
* æ–°å¢æ—¥å¿—åˆ—è¡¨æ˜¾ç¤º
* æ–°å¢ç‹¬ç«‹è„šæœ¬æ—¥å¿—
* æé«˜ HTTP Engine ä¸éƒ¨åˆ†å®¢æˆ·ç«¯çš„å…¼å®¹æ€§
* ä¿®å¤ Exclude åˆ—è¡¨å¯èƒ½ä¸ç”Ÿæ•ˆ
* ä¿®å¤ Rule Set åŒ¹é…ä¸æ­£ç¡®é—®é¢˜
* ä¿®å¤ Rule Provider åŠ è½½åè§„åˆ™ä¸¢å¤±é—®é¢˜
* æ˜¾ç¤º HTTP è¿æ¥çš„ Request Header
* æ”¯æŒåˆ‡æ¢ç­–ç•¥ç»„æ—¶æ‰“æ–­ç°æœ‰è¿æ¥
* å®Œå–„ Shortcuts æ”¯æŒ
* å–æ¶ˆäº† URL-Regex è§„åˆ™ï¼Œå¯ä»¥ç”¨ HTTP æ”¹å†™ä»£æ›¿
* é€šè¿‡ç¼“å­˜ç­–ç•¥ä¼˜åŒ–äº†å¤§é‡è§„åˆ™åŒ¹é…çš„æ€§èƒ½
* ä¼˜åŒ– iCloud åŒæ­¥è¿‡ç¨‹
* ä¿®å¤ iPad æµ‹é€Ÿå¤±è´¥çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 5 æœˆ 16 æ—¥

## 1.6.0

* æ–°å¢ iCloud é…ç½®åŒæ­¥
* æ–°å¢è¦†å†™ä»“åº“
* æ–°å¢ TUIC åè®®
* æ”¯æŒ Cellular SSID Policy
* æ”¯æŒ Rewrite Header
* æ”¯æŒ HTTP åè®®è‡ªå®šä¹‰ Headers
* æ”¯æŒ Script Argument
* æ”¯æŒ Script åŒæ—¶ä¿®æ”¹ Request & Response
* æ”¯æŒå®‰è£…é…ç½®æ–‡ä»¶çš„è‡ªå®šä¹‰è¯ä¹¦
* æ–°å¢è¦†å†™å¯¼å…¥
* æ–°å¢é•¿æŒ‰å¤åˆ¶ URL
* å…¼å®¹ DNS Fallback
* å…¼å®¹æ— è¿‡æœŸæ—¶é—´çš„è®¢é˜…ä¿¡æ¯

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 5 æœˆ 11 æ—¥

## 1.5.4

ç°åœ¨å¯ä»¥é€šè¿‡ App ç”³è¯·å‚åŠ  TestFlight æµ‹è¯•å•¦ï¼

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 4 æœˆ 26 æ—¥

## 1.5.3

* ä¿®å¤ http engine å…¼å®¹æ€§é—®é¢˜
* ä¿®å¤ hysteria æ–­æµé—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 4 æœˆ 17 æ—¥

## 1.5.2

* å†…æ ¸æ€§èƒ½ä¼˜åŒ–
* æ–°å¢å†…ç½® SpeedTest æµ‹é€Ÿ
* æ”¯æŒåœ¨ TUN æ¨¡å¼ä¸‹æ‰§è¡Œè„šæœ¬å’Œæ”¹å†™
* æµåª’ä½“è§£é”æ£€æµ‹æ”¯æŒ Disney +
* æ”¯æŒä¿®æ”¹ Skip-Proxyï¼ŒExclude-Tun-Routes
* æ”¯æŒè¦†å†™åˆ—è¡¨çš„æ’åºåŠŸèƒ½

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 4 æœˆ 15 æ—¥

## 1.5.1

* ä¼˜åŒ– JavaScript å†…å­˜å ç”¨
* JavaScript Console Log è¾“å‡ºåˆ° Stash æ—¥å¿—
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹å¯è§†åŒ–ä¿®æ”¹ DNS å¤±è´¥çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 4 æœˆ 5 æ—¥

## 1.5.0

* å®Œå…¨é‡æ„çš„ JavaScript å¼•æ“
* æ”¯æŒ Hybrid å¹¶å‘æ··åˆç½‘ç»œ
* æ”¯æŒè‡ªå®šä¹‰ GEOIP æ•°æ®åº“
* æ”¯æŒ VLESS / XTLS åè®®
* æ”¯æŒå±€åŸŸç½‘ä»£ç†
* æ”¯æŒè‡ªè¡Œç­¾å‘çš„ ECC æ ¹è¯ä¹¦
* æ”¯æŒè‡ªå®šä¹‰é…ç½®æ–‡ä»¶æ›´æ–°æ—¶é—´
* æ”¯æŒå¯è§†åŒ–æ›´æ–° Script Providers
* ä¼˜åŒ–æ‰¹é‡æ›´æ–° Providers é€Ÿåº¦
* ä¼˜åŒ– UI ç¼–è¾‘ä»£ç†æœåŠ¡å™¨
* ä¿®å¤ DNS ç¼–è¾‘ä¸ç”Ÿæ•ˆçš„é—®é¢˜
* ä¿®å¤é”™è¯¯çš„å†…å­˜è­¦å‘Š

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 4 æœˆ 1 æ—¥

## 1.4.3

* hysteria æ›´æ–°åˆ° v1.0.1
* ä¿®å¤éƒ¨åˆ†åè®®å…¼å®¹æ€§é—®é¢˜
* å¯è§†åŒ–ç¼–è¾‘å™¨æ”¯æŒ relay
* å¯è§†åŒ–ç¼–è¾‘å™¨æ”¯æŒ domain-text / ipcidr-text

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 3 æœˆ 11 æ—¥

## 1.4.2

* ä¼˜åŒ–æµ‹é€Ÿ
* æ˜¾ç¤º http è¯·æ±‚ metadata
* å¢åŠ  DNS é…ç½®å¯è§†åŒ–ç¼–è¾‘
* ä¼˜åŒ– IP-CIDR è§„åˆ™å†…å­˜å ç”¨
* ä¼˜åŒ–é…ç½®æ–‡ä»¶åŠ è½½è¿‡ç¨‹
* ä¼˜åŒ–é…ç½®æ–‡ä»¶æ›´æ–°è¿‡ç¨‹
* ä¿®æ”¹ä»£ç†åç§°ä¹‹ååŒæ—¶ä¿®æ”¹ä»£ç†ç»„ä¸­çš„åç§°
* ä¸‹è½½é…ç½®æ–‡ä»¶æ—¶æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ ¼å¼æ­£ç¡®

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 3 æœˆ 6 æ—¥

## 1.4.1

* æ”¯æŒ DNS-over-QUIC
* ä¼˜åŒ–å†…å­˜å ç”¨
* æ–°å¢å…¼å®¹æ–‡æœ¬æ ¼å¼çš„è§„åˆ™é›†
  [https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L485 (opens in a new tab)](https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L485)

è§„åˆ™é›†åˆæ–‡æ¡£ï¼š
[https://manual.stash.ws/basic/rule-set (opens in a new tab)](https://manual.stash.ws/basic/rule-set)

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 2 æœˆ 24 æ—¥

## 1.4.0

* æ”¯æŒä½¿ç”¨è¦†å†™è¦†ç›–å½“å‰é…ç½®æ–‡ä»¶çš„éƒ¨åˆ†è®¾å®š
* æ”¯æŒä½¿ç”¨ JavaScript è„šæœ¬æ”¹å†™ HTTP(S) è¯·æ±‚ï¼Œè„šæœ¬è¿è¡Œæƒ…å†µä¸æ§åˆ¶å°è¾“å‡ºå¯ä»¥åœ¨æ—¥å¿—ä¸­æŸ¥çœ‹ã€‚ é¦–ä¸ªç‰ˆæœ¬å¯èƒ½ä¸å…¼å®¹æŸäº› JavaScript è¯­æ³•ï¼Œè¯·ç­‰å¾…åç»­æ›´æ–°ã€‚
* å¢åŠ ç»„ç­–ç•¥çš„ä»£ç†å¿«æ·å¢åŠ å’Œåˆ é™¤
* æ”¯æŒä½¿ç”¨ç³»ç»Ÿ DNS
* æ€§èƒ½ä¼˜åŒ–
* å…è®¸è‡ªå®šä¹‰é€šçŸ¥
* æ”¯æŒæ‰«ç æ·»åŠ  SS å’Œ SSR ä»£ç†
* ä¿®å¤ä¸ªäººçƒ­ç‚¹ DNS ä¸æ­£ç¡®çš„é—®é¢˜
* ä¿®å¤å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­æ–‡ç¼–ç çš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ† Domain è§„åˆ™é›†æ— æ³•ä½¿ç”¨çš„é—®é¢˜
* ä¿®å¤åˆ é™¤ Rule é—ªé€€çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 2 æœˆ 14 æ—¥

## 1.3.1

* å…è®¸è‡ªå®šä¹‰åº”ç”¨å›¾æ ‡
* å…è®¸è‡ªå®šä¹‰ä»£ç†ç»„å›¾æ ‡
* æ–°å¢æ‰‹åŠ¨æ›´æ–° Provider
* æ–°å¢ MitM è§„åˆ™å¯¼å…¥
* å®Œå–„å¯è§†åŒ–ç¼–è¾‘å™¨
* ä¼˜åŒ–æ·å¾„å¯åŠ¨è¿‡ç¨‹
* ä¿®å¤æŸäº›æƒ…å†µä¸‹ä»£ç†æ·»åŠ å¤±è´¥çš„é—®é¢˜
* ä¿®å¤ç¼–è¾‘å™¨é”®ç›˜é«˜åº¦é—®é¢˜
* ä¼˜åŒ– Hysteria åè®® ReceiveWindowï¼Œä¼˜åŒ–å†…å­˜å ç”¨ï¼Œé¿å…è¶…å‡º NE å†…å­˜é™åˆ¶ã€‚æ„Ÿè°¢ Hysteria ä½œè€… tobyxdd æä¾›æŠ€æœ¯æ”¯æŒã€‚

Icon é…ç½®æ–‡ä»¶å‚è€ƒï¼š
[https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L366 (opens in a new tab)](https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L366)

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 2 æœˆ 13 æ—¥

## 1.3.0

* å…¨æ–°çš„é¦–é¡µ DashBoard ç•Œé¢
* å…¨æ–°ç­–ç•¥ç»„ç•Œé¢
* å…è®¸è‡ªå®šä¹‰é¦–é¡µå¸ƒå±€
* å¯è§†åŒ–ç¼–è¾‘å™¨æ”¯æŒé€‰æ‹©ä»£ç†å’Œä»£ç†ç»„
* æ–°å¢ Tun Only æ¨¡å¼ï¼Œä»¥æ”¹å–„å’ŒæŸäº›åº”ç”¨çš„å…¼å®¹æ€§é—®é¢˜
* æ”¯æŒ Hysteria Auth
* æ”¯æŒ 307 é‡å®šå‘
* æ”¯æŒä¸»åŠ¨æ‰“æ–­è¿æ¥
* æ”¯æŒæ›´å¤šæ­£åˆ™è¡¨è¾¾å¼æ ¼å¼
* æ›´æ–° Hysteria åˆ° 0.9.6
* å®Œå–„æ—¥å¿—æ˜¾ç¤º
* ä¼˜åŒ–å†…å­˜å ç”¨
* ä¼˜åŒ–è€—ç”µ
* ä¿®å¤ iPad åˆ†å±æ¨¡å¼ä¸‹ç­–ç•¥ç»„æ˜¾ç¤ºé—®é¢˜
* åœ¨è§„åˆ™é›†ä¸‹è½½å¤±è´¥æ—¶ï¼Œå…è®¸ Stash ç»§ç»­å¯åŠ¨
* ä¿®å¤å°ç»„ä»¶å¯åŠ¨å¤±è´¥çš„æƒ…å†µ

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 1 æœˆ 30 æ—¥

## 1.2.1

* æ–°å¢ Rewrite & MitM Mixin è®¢é˜…é…ç½®æ–‡ä»¶
* æ–°å¢ Today Extension (å°ç»„ä»¶)
* æ–°å¢ Hysteria æ”¯æŒ
* æ–°å¢ 3D Touch é•¿æŒ‰æ”¯æŒ
* å¢å¼ºé…ç½®æ–‡ä»¶è½¬æ¢å…¼å®¹æ€§
* ä¼˜åŒ–ä»£ç†ç¼–è¾‘

å‚è€ƒé…ç½®ï¼š[https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L319 (opens in a new tab)](https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L319)

â„¹ï¸

å‘å¸ƒäº 2022 å¹´ 1 æœˆ 19 æ—¥

## 1.2.0

* æ–°å¢ MITM
* æ–°å¢ URL é‡å†™ (URL Rewrite)
* æ–°å¢å¼ºåˆ¶ä½¿ç”¨ Stash Engine ä»¥ HTTP åè®®å¤„ç† TCP è¿æ¥
* æ–°å¢ä½¿ç”¨ Script æ¥ç¼–å†™è§„åˆ™ï¼Œèƒ½ä¸åŒçš„æ¡ä»¶è¿›è¡Œç»„åˆï¼Œä½¿å¾—è§„åˆ™ç¼–å†™æ›´çµæ´»æ›´è‡ªç”±
* æ–°å¢å¿«æ·æŒ‡ä»¤
* æ–°å¢å¯è§†åŒ–ç¼–è¾‘å™¨
* é€‚é… Clash v1.9.0 Vmess é…ç½®æ ¼å¼
* ä¼˜åŒ–ç»Ÿè®¡ã€å½“å‰é“¾æ¥ã€å®æ—¶æ—¥å¿—ç­‰æ›´æ–°é€»è¾‘
* ä¼˜åŒ– iPad è§†å›¾
* ä¼˜åŒ–é”™è¯¯æç¤ºé€»è¾‘
* ä¿®å¤æŸäº›æƒ…å†µä¸‹ iOS 14 ç³»ç»Ÿå´©æºƒ
* ä¿®å¤è´Ÿè½½å‡è¡¡æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜
* ä¿®å¤è¿œç¨‹æ§åˆ¶å™¨è¿”å›

MITM ç¤ºä¾‹:
[https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L26 (opens in a new tab)](https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L26)

Rewrite ç¤ºä¾‹:
[https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L33 (opens in a new tab)](https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L33)

Script Shorcuts ç¤ºä¾‹:
[https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L38 (opens in a new tab)](https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L38)

Force-HTTP-Engine ç¤ºä¾‹:
[https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L16 (opens in a new tab)](https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L16)

â„¹ï¸

å‘å¸ƒäº 2021 å¹´ 12 æœˆ 29 æ—¥

## 1.1.1

* é’ˆå¯¹ iOS 14 æˆ–ä»¥ä¸‹ç”¨æˆ·ä¼˜åŒ–
* å¢åŠ  Provider ä½¿ç”¨ä»£ç†æ›´æ–°
* å¢åŠ ç­–ç•¥ç»„åˆ—è¡¨è§†å›¾
* å¢åŠ è¯Šæ–­å·¥å…·
* å¢åŠ  YAML æ ¼å¼æ ¡éªŒ
* å¢åŠ  iPerf3 åå‘æ¨¡å¼æµ‹è¯•
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹ Rule Set ä¸åŒ¹é…çš„é—®é¢˜
* ä¿®å¤éƒ¨åˆ†æƒ…å†µä¸‹é…ç½®æ–‡ä»¶åˆ‡æ¢ç­–ç•¥ç»„ä¸æ›´æ–°çš„é—®é¢˜
* ä¼˜åŒ–æ€§èƒ½
* ä¼˜åŒ–å†…å­˜
* ä¼˜åŒ–ç”µæºç®¡ç†
* ä¼˜åŒ–æŠ˜å åŠ¨ç”»
* ä¼˜åŒ–éœ‡åŠ¨åé¦ˆ
* ä¼˜åŒ–ç­–ç•¥ç»„æ˜¾ç¤º
* ä¼˜åŒ–è®¢é˜…é…ç½®æ–‡ä»¶ä¿®æ”¹
* ä¼˜åŒ–é¦–é¡µçŠ¶æ€
* Stash Engine æ›´æ–° v1.1.0

â„¹ï¸

å‘å¸ƒäº 2021 å¹´ 12 æœˆ 22 æ—¥

## 1.1.0

* æ–°å¢æŒ‰éœ€è¿æ¥
* æ–°å¢è®¢é˜…ä¿¡æ¯
* ä½¿ç”¨ Stash Engine v1.0.2
* æ”¯æŒåœ¨ Select Proxy Group æ ¹æ® SSID è‡ªåŠ¨åˆ‡æ¢ç­–ç•¥
  é…ç½®æ ¼å¼å‚è€ƒ [https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L335 (opens in a new tab)](https://github.com/STASH-NETWORKS-LIMITED/stash-example/blob/main/config.yaml#L335)
* æ–°å¢éšè— VPN å›¾æ ‡
* æ–°å¢æ—¥å¿—æœç´¢åŠŸèƒ½
* å¢åŠ ç½‘ç»œå˜åŒ–é€šçŸ¥
* å¢åŠ å½“å‰è¿æ¥æ˜¾ç¤ºç­–ç•¥
* å¢åŠ è·¯ç”±è¡¨
* å¢åŠ æ–‡ä»¶å¯¼å‡ºåŠŸèƒ½
* ä¼˜åŒ–çš„ Rule-Set åŒ¹é…å™¨
* ä¼˜åŒ–ç½‘ç»œåˆ‡æ¢è¿‡ç¨‹
* ä¼˜åŒ– Country.mmdb
* ä¼˜åŒ–ä¸»é¡µé¢
* ä¼˜åŒ–ç­–ç•¥ç»„é¡µé¢
* ä¼˜åŒ–ç­–ç•¥ç»„æš—é»‘æ¨¡å¼
* ä¼˜åŒ–ä»£ç†ç»„ç±»å‹æ˜¾ç¤º
* ä¼˜åŒ–å±•å¼€çš„ç‚¹å‡»äº‹ä»¶
* ä¼˜åŒ–æ—¥å¿—æ˜¾ç¤º
* ä¼˜åŒ–é€Ÿç‡æ˜¾ç¤º
* ä¼˜åŒ–é¦–é¡µé…ç½®æ–‡ä»¶åç§°è¿‡é•¿çš„é—®é¢˜

â„¹ï¸

å‘å¸ƒäº 2021 å¹´ 12 æœˆ 16 æ—¥

## 1.0.4

### æ–°åŠŸèƒ½

* æ–°å¢ä»£ç†ä¿¡æ¯æ£€æµ‹
* æ–°å¢æµåª’ä½“è§£é”æ£€æµ‹
* æ–°å¢ä»£ç†æœåŠ¡å™¨ UDP æ£€æµ‹
* æ–°å¢ä»£ç†æœåŠ¡å™¨ IPv6 æ£€æµ‹
* æ–°å¢é•¿æŒ‰æœåŠ¡å™¨æŸ¥çœ‹æ›´å¤šä¿¡æ¯
* æ–°å¢ Airdrop æ–‡ä»¶å¯¼å…¥
* å¢åŠ å¤åˆ¶é…ç½®æ–‡ä»¶çš„åŠŸèƒ½

### ä¼˜åŒ–

* åˆ‡æ¢ç½‘ç»œå VPN ä¸æ–­çº¿
* ä¼˜åŒ–åˆ‡æ¢é…ç½®è¿‡ç¨‹
* ä¼˜åŒ–é…ç½®é¡µé¢å¼¹æ¡†
* ä¼˜åŒ–é…ç½®ç¼–è¾‘å™¨
* ä¼˜åŒ–æµ‹é€Ÿç»“æœæ˜¾ç¤º
* Bug ä¿®å¤

â„¹ï¸

å‘å¸ƒäº 2021 å¹´ 12 æœˆ 10 æ—¥

Last updated on 2025å¹´4æœˆ5æ—¥

[å¿«é€Ÿä¸Šæ‰‹](/get-started "å¿«é€Ÿä¸Šæ‰‹")[è§„åˆ™ç±»å‹](/rules/rule-types "è§„åˆ™ç±»å‹")

---

# è§„åˆ™ç±»å‹

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [DOMAIN](#domain)
* [DOMAIN-SUFFIX](#domain-suffix)
* [DOMAIN-KEYWORD](#domain-keyword)
* [DOMAIN-WILDCARD](#domain-wildcard)
* [DOMAIN-REGEX](#domain-regex)
* [GEOIP](#geoip)
* [IP-ASN](#ip-asn)
* [IP-CIDR / IP-CIDR6](#ip-cidr--ip-cidr6)
* [NETWORK](#network)
* [PROTOCOL](#protocol)
* [DST-PORT](#dst-port)
* [RULE-SET](#rule-set)
* [GEOSITE](#geosite)
* [PROCESS-NAME](#process-name)
* [PROCESS-PATH](#process-path)
* [SCRIPT](#script)
* [AND](#and)
* [OR](#or)
* [NOT](#not)

åˆ†æµè§„åˆ™

è§„åˆ™ç±»å‹

# è§„åˆ™ç±»å‹

é€šè¿‡ç¼–å†™è§„åˆ™ï¼Œæ‚¨å¯ä»¥æŒ‡å®šä¸åŒè¿æ¥çš„å‡ºç«™æ–¹å¼ï¼Œä¾‹å¦‚é€šè¿‡æŸä¸ªä»£ç†è½¬å‘æˆ–æ‹¦æˆªã€‚è§„åˆ™å¯ä»¥æ ¹æ®è¿æ¥çš„ IPã€åŸŸåã€è¿›ç¨‹åæˆ–ç»„åˆå¤šä¸ªæ¡ä»¶è¿›è¡ŒåŒ¹é…ã€‚

å¯¹äºæ¯ä¸€æ¡è¿æ¥ï¼Œç³»ç»Ÿä¼šæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡åŒ¹é…è§„åˆ™ã€‚

è§„åˆ™å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ç±»å‹ï¼ˆå…¶ä¸­ IP ç±»å‹å¯èƒ½ä¼šè§¦å‘ DNS è§£æï¼‰ï¼š

* åŸºäºåŸŸå
* åŸºäº IP æˆ–ç«¯å£
* åŸºäºåè®®
* é€»è¾‘è§„åˆ™
* å…¶ä»–å¤åˆç±»å‹

ğŸ’¡

å¦‚éœ€é’ˆå¯¹ URL ç¼–å†™è§„åˆ™ï¼Œè¯·å‚é˜… [HTTP é‡å†™](/http-engine/rewrite) ç« èŠ‚ã€‚

ğŸ’¡

åœ¨è§„åˆ™æœ«å°¾å¯æ·»åŠ  `no-track` å‚æ•°æ¥éšè—åŒ¹é…åˆ°æ­¤è§„åˆ™çš„è¿æ¥ï¼Œä¾‹å¦‚
`SCRIPT,quic,REJECT,no-track`ã€‚è¿™èƒ½æœ‰æ•ˆé¿å…å¤§é‡ REJECT è®°å½•å……æ–¥é¡µé¢ã€‚

ğŸ’¡

å¯ä½¿ç”¨ `REJECT` å’Œ `REJECT-DROP` è¿™ä¸¤ä¸ªå†…ç½®ä»£ç†æ¥æ‹¦æˆªè¿æ¥ã€‚`REJECT`
ä¼šç«‹å³è¿”å›é”™è¯¯ï¼Œè€Œ `REJECT-DROP` ä¼šé™é»˜ä¸¢å¼ƒè¿æ¥ï¼Œä»¥é¿å…äº§ç”Ÿè¿æ¥é£æš´ã€‚

## DOMAIN

å®Œå…¨åŒ¹é…åŸŸåï¼Œä¾‹å¦‚ `DOMAIN,google.com` åŒ¹é… `google.com`ï¼Œä½†ä¸åŒ¹é… `www.google.com`ã€‚

## DOMAIN-SUFFIX

åŒ¹é…åŸŸååç¼€ï¼Œä¾‹å¦‚ `DOMAIN-SUFFIX,google.com` åŒ¹é… `google.com` å’Œ `www.google.com`ã€‚

## DOMAIN-KEYWORD

å…³é”®è¯åŒ¹é…åŸŸåï¼Œä¾‹å¦‚ `DOMAIN-KEYWORD,google` åŒ¹é… `google.com` å’Œ `google.jp`ã€‚

## DOMAIN-WILDCARD

ä½¿ç”¨é€šé…ç¬¦åŒ¹é…åŸŸåï¼Œæ”¯æŒ `*` å’Œ `?`ï¼Œä¾‹å¦‚ `DOMAIN-WILDCARD,*.google.com` åŒ¹é… `www.google.com` å’Œ `mail.google.com`ã€‚

å…¶ä¸­ `*` åŒ¹é…ä»»æ„æ•°é‡çš„å­—ç¬¦ï¼Œ`?` åŒ¹é…ä¸€ä¸ªå­—ç¬¦ã€‚

## DOMAIN-REGEX

ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åŸŸåï¼Œä¾‹å¦‚ `DOMAIN-REGEX,^.*\.google\.com$` åŒ¹é… `www.google.com` å’Œ `mail.google.com`ã€‚

## GEOIP

é€šè¿‡ MaxMind GeoIP åŒ¹é…å›½å®¶ä»£ç ï¼Œä¾‹å¦‚ `GEOIP,CN`ã€‚å¯æ·»åŠ  `no-resolve` ä»¥é¿å…è§¦å‘ DNS è§£æã€‚

ğŸ’¡

Stash å…è®¸ç”¨æˆ·æ›¿æ¢ç¬¦åˆ MaxMind GeoIP
æ ¼å¼çš„æ•°æ®åº“ã€‚ç”¨æˆ·å¯æ ¹æ®è‡ªèº«éœ€æ±‚é€‰æ‹©æ›´é€‚åˆçš„ MaxMind GeoIP æ•°æ®åº“ã€‚

## IP-ASN

é€šè¿‡ IP è‡ªæ²»ç³»ç»Ÿç¼–å·åŒ¹é…ï¼Œä¾‹å¦‚ `IP-ASN,714`ã€‚å¯æ·»åŠ  `no-resolve` ä»¥é¿å…è§¦å‘ DNS è§£æã€‚

## IP-CIDR / IP-CIDR6

IP CIDR èŒƒå›´åŒ¹é…ï¼Œä¾‹å¦‚ `IP-CIDR,192.168.1.0/24`ã€‚å¯æ·»åŠ  `no-resolve` ä»¥é¿å…è§¦å‘ DNS è§£æã€‚

## NETWORK

åŒ¹é…ç½‘ç»œç±»å‹ï¼Œä¾‹å¦‚ `tcp` åŒ¹é… TCP åè®®ï¼Œ`udp` åŒ¹é… UDP åè®®ã€‚

## PROTOCOL

PROTOCOL è§„åˆ™æ¯” NETWORK è§„åˆ™æä¾›æ›´ç»†ç²’åº¦çš„åˆ¤æ–­ã€‚æ”¯æŒçš„åè®®åŒ…æ‹¬ï¼š

* `TCP`
* `UDP`
* `HTTP`
* `HTTPS`
* `QUIC`

## DST-PORT

ç›®æ ‡ç«¯å£åŒ¹é…ï¼Œä¾‹å¦‚ `DST-PORT,80`ã€‚

## RULE-SET

å¼•ç”¨å¤§é‡è§„åˆ™æ—¶ï¼Œè¯·ä½¿ç”¨ [è§„åˆ™é›†åˆ](/rules/rule-set)ã€‚

## GEOSITE

[domain-list-community (opens in a new tab)](https://github.com/v2fly/domain-list-community) æ˜¯ç”± v2fly ç¤¾åŒºç»´æŠ¤çš„åŸŸååˆ—è¡¨ã€‚

ä¾‹å¦‚ `GEOSITE,twitter` åŒ¹é… [Twitter (opens in a new tab)](https://github.com/v2fly/domain-list-community/blob/master/data/twitter) å…¬å¸ç›¸å…³åŸŸåï¼š

```
ads-twitter.com
cms-twdigitalassets.com
periscope.tv
pscp.tv
t.co
tellapart.com
tweetdeck.com
twimg.com
twitpic.com
twitter.biz
twitter.com
twitter.jp
twitter.map.fastly.net
twittercommunity.com
twitterflightschool.com
twitterinc.com
twitteroauth.com
twitterstat.us
twtrdns.net
twttr.com
twttr.net
twvid.com
vine.co
x.com

```

âš ï¸

domain-list-community æ•°æ®ä¸éš Stash åˆ†å‘ï¼ŒStash ä¼šåœ¨é¦–æ¬¡ä½¿ç”¨æ—¶ä» github.com
æŒ‰éœ€åŠ è½½åŸŸåæ•°æ®ã€‚é¦–æ¬¡ä½¿ç”¨è¯·ç¡®ä¿å½“å‰é…ç½®èƒ½æ­£å¸¸è®¿é—® github.comã€‚

## PROCESS-NAME

è¿›ç¨‹åç§°åŒ¹é…ï¼Œä¾‹å¦‚ `PROCESS-NAME,Telegram`ã€‚ä»…å¯¹æœ¬æœºè¿›ç¨‹æœ‰æ•ˆã€‚

âš ï¸

ç”±äº Network Extension çš„é™åˆ¶ï¼ŒStash iOS/tvOSï¼ˆåŒ…æ‹¬è¿è¡Œäº Apple silicon
è®¾å¤‡ä¸Šçš„ iOS ç‰ˆï¼‰ä¸æ”¯æŒ PROCESS-NAME è§„åˆ™ï¼Œé…ç½®ä¸­çš„è¿›ç¨‹ç›¸å…³è§„åˆ™å°†è¢«å¿½ç•¥ã€‚

## PROCESS-PATH

è¿›ç¨‹è·¯å¾„åŒ¹é…ï¼Œä¾‹å¦‚ `PROCESS-PATH,/Applications/Telegram.app/Contents/MacOS/Telegram`ã€‚ä»…å¯¹æœ¬æœºè¿›ç¨‹æœ‰æ•ˆã€‚

âš ï¸

ç”±äº Network Extension çš„é™åˆ¶ï¼ŒStash iOS/tvOSï¼ˆåŒ…æ‹¬è¿è¡Œäº Apple silicon
è®¾å¤‡ä¸Šçš„ iOS ç‰ˆï¼‰ä¸æ”¯æŒ PROCESS-PATH è§„åˆ™ï¼Œé…ç½®ä¸­çš„è¿›ç¨‹ç›¸å…³è§„åˆ™å°†è¢«å¿½ç•¥ã€‚

## SCRIPT

é€šè¿‡ Python è¡¨è¾¾å¼åŒ¹é…è¯·æ±‚ã€‚è¡¨è¾¾å¼å¿…é¡»è¿”å› Boolean å€¼ï¼Œæ‰§è¡Œé”™è¯¯çš„è¡¨è¾¾å¼ä¼šè¢«å¿½ç•¥ã€‚

è¡¨è¾¾å¼å¯è¯»å–ä»¥ä¸‹å˜é‡ï¼š

```
{
  "network": "string", // å¯ä»¥æ˜¯ tcp æˆ– udp
  "host": "string", // å¯èƒ½ä¸ºç©º
  "dst_ip": "string", // å¯èƒ½ä¸ºç©º
  "dst_port": "number",
  "src_ip": "string", // ä»…åœ¨ç½‘å…³æ¨¡å¼ä¸‹æœ‰æ•ˆ
  "src_port": "number" // ä»…åœ¨ç½‘å…³æ¨¡å¼ä¸‹æœ‰æ•ˆ
}
```

è¡¨è¾¾å¼å¯è°ƒç”¨ä»¥ä¸‹å‡½æ•°ï¼š

```
def resolve_ip(host: str) -> str:
    pass

def in_cidr(ip: str, cidr: str) -> bool:
    pass

def geoip(ip: str) -> str:
    pass

def ipasn(ip: str) -> int:
    pass

def match_provider(name: str) -> bool:
    pass

def match_geosite(name: str) -> bool:
    pass
```

ä¾‹å¦‚ï¼Œéœ€è¦æ‹¦æˆª QUIC åè®®çš„è¯·æ±‚ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š

```
rules:
  - SCRIPT,quic,REJECT
  - SCRIPT,udp-cn,ProxyToCN

script:
  shortcuts: # å¯åœ¨ rule ä¸­å¼•ç”¨
    quic: network == 'udp' and dst_port == 443 # åŒ¹é… QUIC åè®®
    udp-cn: network == 'udp' and geoip(dst_ip if dst_ip != '' else resolve_ip(host)) == 'CN' # åŒ¹é…å‘å¾€ CN çš„ UDP
    instagram-quic: network == 'udp' and dst_port == 443 and match_geosite('instagram') # åŒ¹é… Instagram çš„ QUIC
```

## AND

å½“éœ€è¦åŒæ—¶æ»¡è¶³å¤šä¸ªè§„åˆ™æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ AND é€»è¾‘è§„åˆ™ã€‚

`AND,((#Rule1), (#Rule2), (#Rule3)...),PROXY`

ğŸ’¡

åœ¨å­è§„åˆ™ä¸­ï¼Œä¹Ÿå¯ä»¥æ·»åŠ  `no-resolve` å‚æ•°æ¥é¿å…è§¦å‘ DNS
è§£æã€‚ä¾‹å¦‚ï¼š`AND,((IP-CIDR,192.168.1.110,no-resolve), (DOMAIN-SUFFIX,example.com), (DOMAIN-KEYWORD, xxx)), DIRECT`

## OR

å½“éœ€è¦æ»¡è¶³å…¶ä¸­ä¸€ä¸ªè§„åˆ™æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ OR é€»è¾‘è§„åˆ™ã€‚

`OR,((#Rule1), (#Rule2), (#Rule3)...),PROXY`

## NOT

å¯¹è§„åˆ™å–åã€‚

`NOT,((#Rule1)),PROXY`

ğŸ’¡

é€»è¾‘è§„åˆ™å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š`AND,((NOT,((SRC-IP,192.168.1.110))),(DOMAIN,example.com)),DIRECT`

Last updated on 2025å¹´4æœˆ9æ—¥

[iOS](/release-notes/ios "iOS")[è§„åˆ™é›†åˆ](/rules/rule-set "è§„åˆ™é›†åˆ")

---

# è§„åˆ™é›†åˆ

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

åˆ†æµè§„åˆ™

è§„åˆ™é›†åˆ

# è§„åˆ™é›†åˆ

è§„åˆ™é›†åˆåŠŸèƒ½å¯ä»¥åœ¨è¾ƒä½èµ„æºå ç”¨æƒ…å†µä¸‹å¼•ç”¨å¤§é‡è§„åˆ™ï¼Œå¹¶æ”¯æŒåå°é™é»˜æ›´æ–°è€Œæ— éœ€é‡æ–°åŠ è½½ Stashã€‚è¦ä½¿ç”¨è§„åˆ™é›†åˆï¼Œæ‚¨éœ€è¦åœ¨ `rule-provide` ä¸‹å®Œæˆå£°æ˜ï¼Œä¹‹åå³å¯åœ¨ `rules` ä¸‹å¼•ç”¨é›†åˆã€‚

```
rule-providers:
  proxy-domain:
    behavior: domain # ä½¿ç”¨ domain ç±»è§„åˆ™é›†å¯æé«˜åŒ¹é…æ•ˆç‡
    format: yaml # ä½¿ç”¨ yaml æ ¼å¼çš„è§„åˆ™é›†
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
    interval: 86400

  cn-cidr:
    behavior: ipcidr # ä½¿ç”¨ ipcidr ç±»è§„åˆ™é›†å¯æé«˜åŒ¹é…æ•ˆç‡
    format: text # ä½¿ç”¨ text æ ¼å¼çš„è§„åˆ™é›†
    url: https://cdn.jsdelivr.net/gh/17mon/china_ip_list@master/china_ip_list.txt
    interval: 86400

rules:
  - RULE-SET,proxy-domain,Proxy
  - RULE-SET,cn-cidr,DIRECT,no-resolve # ipcidr ç±»è§„åˆ™é›†æ”¯æŒ no-resolve å‚æ•°
```

Stash æ”¯æŒå¤šç§è§„åˆ™é›†åˆæ ¼å¼ï¼Œä¸åŒæ ¼å¼æ”¯æŒä¸åŒå†…å®¹ç±»å‹ï¼Œå¹¶å…·æœ‰ä¸åŒçš„èµ„æºå ç”¨è¡¨ç°ï¼š

| è¡Œä¸ºï¼ˆbehaviorï¼‰ | æ ¼å¼ | æ”¯æŒå†…å®¹ | ç¤ºä¾‹ | åŒ¹é…æ€§èƒ½ |
| --- | --- | --- | --- | --- |
| `domain` | `yaml` | åŸŸå/åŸŸåé€šé…ç¬¦ | [é“¾æ¥ (opens in a new tab)](https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt) | ä¼˜ç§€ |
| `domain` | `text` | åŸŸå/åŸŸåé€šé…ç¬¦ | [é“¾æ¥ (opens in a new tab)](https://fastly.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/proxy.txt) | ä¼˜ç§€ |
| `ipcidr` | `yaml` | IPv4/IPv6 é›†åˆï¼ŒCIDR æ ¼å¼ | [é“¾æ¥ (opens in a new tab)](https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt) | ä¼˜ç§€ |
| `ipcidr` | `text` | IPv4/IPv6 é›†åˆï¼ŒCIDR æ ¼å¼ | [é“¾æ¥ (opens in a new tab)](https://fastly.jsdelivr.net/gh/17mon/china_ip_list@master/china_ip_list.txt) | ä¼˜ç§€ |
| `classical` | `yaml` | ä»»æ„è§„åˆ™ç±»å‹ | [é“¾æ¥ (opens in a new tab)](https://fastly.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/Basic/Apple-direct.yaml) | è¾ƒå·® |
| `classical` | `text` | ä»»æ„è§„åˆ™ç±»å‹ | [é“¾æ¥ (opens in a new tab)](https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/cncidr.txt) | è¾ƒå·® |

ğŸ’¡

`domain(-text)` å’Œ `ipcidr(-text)` ç±»å‹çš„è§„åˆ™é›†åˆé’ˆå¯¹å¤§é‡æ•°æ®è¿›è¡Œäº†ä¸“é—¨ä¼˜åŒ–ï¼Œå½“è§„åˆ™æ¡ç›®è¾ƒå¤šæ—¶å»ºè®®ä¼˜å…ˆé€‰ç”¨ã€‚

ä¸å»ºè®®ä½¿ç”¨åŒ…å«å¤§é‡è§„åˆ™çš„ `classical` è§„åˆ™é›†åˆï¼Œè¿™ä¼šæ˜¾è‘—å¢åŠ  Stash çš„å†…å­˜å ç”¨å¹¶é™ä½è§„åˆ™åŒ¹é…é€Ÿåº¦ã€‚

Last updated on 2025å¹´4æœˆ6æ—¥

[è§„åˆ™ç±»å‹](/rules/rule-types "è§„åˆ™ç±»å‹")[åè®®ç±»å‹](/proxy-protocols/proxy-types "åè®®ç±»å‹")

---

# åè®®ç±»å‹

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [Shadowsocks / Shadowsocks2022](#shadowsocks--shadowsocks2022)
* [Shadowsocks Plugin](#shadowsocks-plugin)
* [ShadowsocksR](#shadowsocksr)
* [SOCKS5](#socks5)
* [HTTP](#http)
* [VMess](#vmess)
* [Snell](#snell)
* [Trojan](#trojan)
* [Hysteria](#hysteria)
* [Hysteria2](#hysteria2)
* [VLESS](#vless)
* [TUIC](#tuic)
* [Juicity](#juicity)
* [WireGuard](#wireguard)
* [SSH](#ssh)
* [DIRECT with Specified Interface](#direct-with-specified-interface)

ä»£ç†åè®®

åè®®ç±»å‹

# åè®®ç±»å‹

Stash æ”¯æŒå¤šç§ç±»å‹çš„ä»£ç†åè®®ï¼Œå¯ä»¥ä»£ç† TCP / UDP åè®®ã€‚

æ¯ä¸ªä»£ç†å¿…é¡»å«æœ‰ä»¥ä¸‹å‚æ•°ï¼š

* `name`ï¼šä»£ç†åç§°ï¼Œæ¯ä¸ªä»£ç†çš„åç§°æ˜¯å”¯ä¸€çš„ã€‚
* `type`ï¼šä»£ç†ç±»å‹ã€‚
* `server`ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€… IP åœ°å€ã€‚
* `port`ï¼šç«¯å£ã€‚

---

ä»£ç†å¯èƒ½æ”¯æŒä»¥ä¸‹å‚æ•°ï¼š

* `tls`ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦åŸºäº TLS è½¬å‘ã€‚
* `skip-cert-verify`ï¼šå¸ƒå°”å€¼ï¼ŒTLS æ¡æ‰‹æ—¶æ˜¯å¦å¿½ç•¥è¯ä¹¦éªŒè¯ã€‚
* `server-cert-fingerprint`ï¼šå­—ç¬¦ä¸²ï¼ŒTLS æ¡æ‰‹æ—¶éªŒè¯æœåŠ¡å™¨è¯ä¹¦ SHA256 æŒ‡çº¹ï¼Œä»¥ Hex ç¼–ç ã€‚
* `sni`ï¼šå­—ç¬¦ä¸²ï¼ŒTLS æ¡æ‰‹æ—¶å€™å‘é€çš„ [Server Name Indication (opens in a new tab)](https://en.wikipedia.org/wiki/Server_Name_Indication)ã€‚è‹¥ `sni` ä¸ºç©ºï¼Œé»˜è®¤ä¸º `server` å­—æ®µã€‚
* `alpn`ï¼šå­—ç¬¦ä¸²æ•°ç»„ï¼ŒTLS æ¡æ‰‹æ—¶å€™å‘é€çš„ [Application-Layer Protocol Negotiation (ALPN) (opens in a new tab)](https://developer.mozilla.org/en-US/docs/Glossary/ALPN)ã€‚
* `interface-name`ï¼šç»‘å®šç½‘å¡å‡ºå£ï¼Œä»…åœ¨ macOS æ”¯æŒã€‚

---

æ­¤å¤–ï¼Œå¯¹äºå•ä¸ªä»£ç†çš„å»¶è¿Ÿæµ‹è¯•ï¼Œæ”¯æŒä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š

* `benchmark-url`ï¼šå»¶è¿Ÿæµ‹è¯•ä½¿ç”¨çš„ URLï¼Œé»˜è®¤ä¸º `http://www.apple.com/`ã€‚
* `benchmark-timeout`ï¼šå»¶è¿Ÿæµ‹è¯•è¶…æ—¶ï¼Œå•ä½ç§’ï¼Œé»˜è®¤ä¸º 5 ç§’ã€‚
* `benchmark-disabled`ï¼šè®¾ç½®ä¸º `true` æ—¶å®Œå…¨ç¦ç”¨å»¶è¿Ÿæµ‹è¯•ã€‚

ä½ å¯ä»¥è®¿é—®[è¿™é‡Œ](/proxy-protocols/proxy-benchmark)æ‰¾åˆ°æ›´å¤šå…³äºæµ‹è¯•ä»£ç†å»¶è¿Ÿçš„ä¿¡æ¯ã€‚

---

å¯¹äºåŸºäº QUIC çš„åè®®ï¼Œæ”¯æŒå®šæœŸæ›´æ”¹ç«¯å£ä»¥åº”å¯¹ ISP é’ˆå¯¹å•ä¸ªç«¯å£çš„é™é€Ÿï¼Œè¿™ä¸€æ–¹æ³•åˆç§°ä¸ºç«¯å£è·³è·ƒã€‚

* `ports`ï¼šå­—ç¬¦ä¸²ï¼Œæ”¯æŒå¤šä¸ªç«¯å£æˆ–ç«¯å£èŒƒå›´ï¼Œä»¥é€—å·åˆ†éš”ï¼Œä¾‹å¦‚ `443,8443,5000-6000`ã€‚
* `hop-interval`ï¼šæ•´æ•°ï¼Œç«¯å£è·³è·ƒé—´éš”ï¼Œå•ä½ç§’ï¼Œé»˜è®¤ä¸º 30 ç§’ã€‚

---

åœ¨å¤„ç† UDP æ—¶ï¼Œä¸ºäº†æœ€å¤§ç¨‹åº¦åœ°å…¼å®¹å„ç§åè®®çš„è¡Œä¸ºï¼Œåªä¼šå‘ä»£ç†ä»¥ IP åœ°å€çš„å½¢å¼è½¬å‘ï¼Œè€Œä¸ä¼šåƒ TCP ä¸€æ ·å°†åŸŸåè§£æäº¤ç”±ä»£ç†å¤„ç†ã€‚å› æ­¤åœ¨å‘èµ· UDP è½¬å‘è¯·æ±‚å‰ï¼ŒStash ä¼šå°è¯•é€šè¿‡ä»£ç†å‘èµ· DNS æŸ¥è¯¢ï¼Œä»¥è·å–æ­£ç¡®çš„ã€ç¬¦åˆ CDN ä¼˜åŒ–çš„ DNS è§£æï¼Œå†ä»¥æ­¤åœ°å€è½¬å‘ UDP åŒ…ã€‚

Stash é»˜è®¤ä½¿ç”¨ 1.0.0.1 è¿›è¡Œ DNS æŸ¥è¯¢ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‚æ•°ä¿®æ”¹ï¼š

* `udp-nameserver`ï¼šæ•°ç»„ï¼ŒDNS æœåŠ¡å™¨åœ°å€ï¼Œä»…æ”¯æŒ UDP åè®®ã€‚

ä¾‹å¦‚ï¼š

```
name: proxy
type: ss
udp-nameserver: ['8.8.4.4', '8.8.8.8:53']
# ...
```

---

ä¸åŒç±»å‹çš„ä»£ç†è¿˜éœ€è¦æŒ‡å®šä¸€äº›å‚æ•°ï¼Œå¯ä»¥å‚è€ƒä¸‹æ–‡ã€‚

## Shadowsocks / Shadowsocks2022

```
name: ss1
type: ss
server: server
port: 443
cipher: chacha20-ietf-poly1305
password: 'password'
udp: true
plugin: null
plugin-opts:
  mode:
  host:
```

æ”¯æŒä»¥ä¸‹çš„åŠ å¯†æ–¹å¼ï¼ˆcipherï¼‰ï¼š

* `aes-128-gcm`
* `aes-192-gcm`
* `aes-256-gcm`
* `aes-128-cfb`
* `aes-192-cfb`
* `aes-256-cfb`
* `aes-128-ctr`
* `aes-192-ctr`
* `aes-256-ctr`
* `rc4-md5`
* `chacha20`
* `chacha20-ietf`
* `xchacha20`
* `chacha20-ietf-poly1305`
* `xchacha20-ietf-poly1305`
* `2022-blake3-aes-128-gcm`
* `2022-blake3-aes-256-gcm`

### Shadowsocks Plugin

æ”¯æŒä»¥ä¸‹çš„æ’ä»¶ï¼ˆpluginï¼‰ï¼š

`obfs`ï¼šä½¿ç”¨ [simple-obfs (opens in a new tab)](https://github.com/shadowsocks/simple-obfs) æ··æ·† TCP æµé‡ã€‚

```
plugin: obfs
plugin-opts:
  mode: tls # æ··æ·†æ¨¡å¼ï¼Œå¯ä»¥é€‰æ‹© http æˆ– tls
  host: bing.com # æ··æ·†åŸŸåï¼Œéœ€è¦å’ŒæœåŠ¡å™¨é…ç½®ä¿æŒä¸€è‡´
```

`v2ray-plugin`ï¼šä½¿ç”¨ [v2ray-plugin (opens in a new tab)](https://github.com/shadowsocks/v2ray-plugin) å°†æµé‡æ‰¿è½½åœ¨ WebSocket ä¸Šã€‚

```
plugin: v2ray-plugin
plugin-opts:
  mode: websocket # æš‚æ—¶ä¸æ”¯æŒ QUIC åè®®
  tls: true # wss
  skip-cert-verify: true # ä¸éªŒè¯è¯ä¹¦
  host: bing.com
  path: '/'
  headers: # è‡ªå®šä¹‰è¯·æ±‚å¤´
    key: value
```

`shadow-tls`ï¼šä½¿ç”¨ [shadow-tls (opens in a new tab)](https://github.com/ihciah/shadow-tls) è¿›è¡ŒçœŸå® TLS æ¡æ‰‹çš„åŒæ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æŸäº›å¤§å…¬å¸æˆ–æœºæ„çš„è¯ä¹¦ï¼Œè€Œä¸éœ€è¦è‡ªè¡Œç­¾å‘ã€‚

âš ï¸

ç›®å‰ä»…æ”¯æŒ Shadow TLS çš„
[v2 (opens in a new tab)](https://github.com/ihciah/shadow-tls/blob/master/docs/protocol-zh.md) å’Œ
[v3 (opens in a new tab)](https://github.com/ihciah/shadow-tls/blob/master/docs/protocol-v3-zh.md)
ç‰ˆæœ¬ã€‚

```
plugin: shadow-tls
plugin-opts:
  password: singalongsong
  host: weather-data.apple.com
  skip-cert-verify: false # ä¸éªŒè¯è¯ä¹¦
  version: 3 # åªæ”¯æŒ 2 å’Œ 3
```

## ShadowsocksR

```
name: ssr
type: ssr
server: server
port: 443
cipher: chacha20-ietf
password: 'password'
obfs: ''
protocol: ''
obfs-param: ''
protocol-param: ''
```

æ”¯æŒçš„åŠ å¯†æ–¹å¼ï¼ˆcipherï¼‰ä¸ Shadowsocks ç›¸åŒã€‚

æ”¯æŒçš„æ··æ·†æ–¹å¼ï¼ˆobfsï¼‰:

* `plain`
* `http_simple`
* `http_post`
* `random_head`
* `tls1.2_ticket_auth`
* `tls1.2_ticket_fastauth`

æ”¯æŒçš„åè®®ï¼ˆprotocolï¼‰:

* `origin`
* `auth_sha1_v4`
* `auth_aes128_md5`
* `auth_aes128_sha1`
* `auth_chain_a auth_chain_b`

## SOCKS5

```
name: socks
type: socks5
server: server
port: 443
# username: username
# password: password
# tls: true
# skip-cert-verify: true
# udp: true
```

## HTTP

```
name: http
type: http
server: server
port: 443
headers:
  key: value
tls: true # https
skip-cert-verify: true
# username: username
# password: password
```

## VMess

```
name: vmess
type: vmess
server: server
port: 443
uuid: d0529668-8835-11ec-a8a3-0242ac120002
cipher: auto
alterId: 64
network:
```

æ”¯æŒåŠ å¯†æ–¹å¼ï¼ˆcipherï¼‰ï¼š

* `auto`
* `aes-128-gcm`
* `chacha20-poly1305`
* `none`

æ”¯æŒçš„æ‰¿è½½ç½‘ç»œï¼ˆnetworkï¼‰ï¼š

* `ws`
* `h2`
* `http`
* `grpc`

```
network: ws
ws-opts:
  path: /path
  headers:
    Host: v2ray.com
  max-early-data: 2048
  early-data-header-name: Sec-WebSocket-Protocol
```

```
network: h2
tls: true
h2-opts:
  host:
    - http.example.com
    - http-alt.example.com
  path: /
```

## Snell

```
name: snell
type: snell
server: server
port: 443
psk: yourpsk
udp: true # éœ€è¦ v3 ä»¥ä¸ŠæœåŠ¡ç«¯
version: 3
# obfs-opts:
# mode: http # æˆ– tls
# host: bing.com
```

Snell UDP éœ€è¦ v3 ç‰ˆæœ¬ä»¥ä¸Šçš„æœåŠ¡ç«¯æ”¯æŒã€‚

æ”¯æŒçš„æ··æ·†æ¨¡å¼ï¼ˆobfs-opts.modeï¼‰æ”¯æŒï¼š

* http
* tls

## Trojan

```
name: trojan
type: trojan
server: server
port: 443
password: yourpassword
# udp: true
# sni: example.com # Server Name Indicationï¼Œå¦‚æœç©ºä¼šä½¿ç”¨ server ä¸­çš„å€¼
# alpn:
#   - h2
#   - http/1.1
# skip-cert-verify: true
```

æ”¯æŒçš„æ‰¿è½½ç½‘ç»œï¼ˆnetworkï¼‰ï¼š

* `ws`
* `grpc`

## Hysteria

> Hysteria æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ï¼Œä¸“ä¸ºæ¶åŠ£ç½‘ç»œç¯å¢ƒè¿›è¡Œä¼˜åŒ–çš„ç½‘ç»œå·¥å…·ï¼ˆåŒè¾¹åŠ é€Ÿï¼‰ï¼Œæ¯”å¦‚å«æ˜Ÿç½‘ç»œã€æ‹¥æŒ¤çš„å…¬å…± Wi-Fiã€åœ¨ä¸­å›½è¿æ¥å›½å¤–æœåŠ¡å™¨ç­‰ã€‚ åŸºäºä¿®æ”¹ç‰ˆçš„ QUIC åè®®ã€‚

Hysteria æœåŠ¡ç«¯éƒ¨ç½²è¯·[å‚è€ƒè¿™é‡Œ (opens in a new tab)](https://github.com/HyNetwork/hysteria/wiki/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85)ã€‚

```
name: 'hysteria'
type: hysteria
server: server
port: 443
up-speed: 100 # ä¸Šä¼ å¸¦å®½ï¼ˆå•ä½ï¼šMbpsï¼‰
down-speed: 100 # ä¸‹è½½å¸¦å®½ï¼ˆå•ä½ï¼šMbpsï¼‰
auth-str: your-password
# auth: aHR0cHM6Ly9oeXN0ZXJpYS5uZXR3b3JrL2RvY3MvYWR2YW5jZWQtdXNhZ2Uv # bytes encoded in base64
protocol: '' # udp / wechat-video
obfs: '' # obfs password
sni: example.com # Server Name Indicationï¼Œå¦‚æœç©ºä¼šä½¿ç”¨ server ä¸­çš„å€¼
alpn:
  - hysteria
skip-cert-verify: true
```

ä¸Šä¼ ã€ä¸‹è¡Œå¸¦å®½å•ä½ä¸º Mbpsï¼Œè¯·å°½é‡æ­£ç¡®å¡«å†™ï¼Œè¶…å‡ºå®é™…å¸¦å®½ä¼šæœ‰åæ•ˆæœã€‚

å¤–éƒ¨é“¾æ¥ï¼š[base64 åœ¨çº¿ç¼–ç å·¥å…· (opens in a new tab)](https://www.base64decode.org/)ã€‚

## Hysteria2

âš ï¸

è¯·æ³¨æ„ï¼ŒHysteria 2 ä¸ Hysteria 1.x
å®Œå…¨ä¸å…¼å®¹ï¼Œä¸¤è€…å·®å¼‚è¯·å‚è€ƒ[å®˜æ–¹è¯´æ˜ (opens in a new tab)](https://v2.hysteria.network/zh/docs/misc/2-vs-1/)ã€‚

Hysteria2 æœåŠ¡ç«¯éƒ¨ç½²è¯·[å‚è€ƒè¿™é‡Œ (opens in a new tab)](https://v2.hysteria.network/zh/docs/getting-started/Installation/)ã€‚

```
name: 'hysteria2'
type: hysteria2
server: server
port: 443
auth: your-password
fast-open: true
sni: example.com # Server Name Indicationï¼Œå¦‚æœç©ºä¼šä½¿ç”¨ server ä¸­çš„å€¼
skip-cert-verify: true
up-speed: 100 # ä¸Šä¼ å¸¦å®½ï¼ˆå¯é€‰çš„ï¼Œå•ä½ï¼šMbpsï¼‰
down-speed: 100 # ä¸‹è½½å¸¦å®½ï¼ˆå¯é€‰çš„ï¼Œå•ä½ï¼šMbpsï¼‰
```

## VLESS

XTLS åè®®åœ¨ TLS ç¯å¢ƒä¸‹æ‘†è„±å†—ä½™åŠ å¯†ï¼Œæä¾›æ›´ä¼˜ç§€çš„è½¬å‘æ€§èƒ½ã€‚

```
name: vless
type: vless
server: server
port: 443
uuid: d0529668-8835-11ec-a8a3-0242ac120002
# flow: xtls-rprx-direct
# skip-cert-verify: true
# network: h2
# tls: true
# ws-opts:
#   path: /path
#   headers:
#     Host: v2ray.com
# grpc-opts:
#   grpc-service-name: "example"
# h2-opts:
#   host:
#     - http.example.com
#     - http-alt.example.com
#   path: /
# reality-opts:
#   public-key:
#   short-id:
```

æ”¯æŒçš„ XTLS æ¨¡å¼ï¼ˆflowï¼‰ï¼š

* `xtls-rprx-origin`
* `xtls-rprx-direct`
* `xtls-rprx-splice`
* `xtls-rprx-vision`

## TUIC

TUIC æ˜¯ä¸€ä¸ªè½»é‡çš„åŸºäº QUIC çš„ä»£ç†åè®®ï¼Œç”± rust è¯­è¨€ç¼–å†™ï¼Œç›®å‰æ”¯æŒ v4 å’Œ v5 ç‰ˆæœ¬ã€‚ä½ å¯ä»¥åœ¨[è¿™é‡Œ (opens in a new tab)](https://github.com/tuic-protocol/tuic)æ‰¾åˆ°æ›´å¤šä¿¡æ¯ã€‚

```
name: tuic-v5
type: tuic
server: server
port: 443
version: 5
uuid: d0529668-8835-11ec-a8a3-0242ac120002 # for v5
password: your_password # for v5
skip-cert-verify: true
sni: ''
alpn:
  - h3
```

```
name: tuic-v4
type: tuic
server: server
port: 443
version: 4
token: 'your_token' # for v4
skip-cert-verify: true
sni: ''
alpn:
  - h3
```

ğŸ’¡

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒStash å®¢æˆ·ç«¯ä¸æ”¯æŒ ALPN ä¸ºç©ºï¼Œé»˜è®¤çš„ ALPN ä¸º h3ã€‚è¯·åœ¨ TUIC æœåŠ¡ç«¯åŠ ä¸Š `--alpn h3` å‚æ•°ã€‚

è¯·åœ¨æœåŠ¡ç«¯é€‰æ‹©é€‚åˆçš„æ‹¥å¡æ§åˆ¶ç®—æ³• `--congestion-controller` å‚æ•°ä»¥å……åˆ†åˆ©ç”¨å¸¦å®½ã€‚

## Juicity

[Juicity (opens in a new tab)](https://github.com/juicity/juicity) æ˜¯ä¸€ä¸ªåŸºäº QUIC çš„ä»£ç†åè®®ï¼Œå—åˆ° TUIC çš„å¯å‘ã€‚

```
name: juicity
type: juicity
server: server
port: 443
uuid: d0529668-8835-11ec-a8a3-0242ac120002
password: your_password
skip-cert-verify: true
sni: ''
alpn:
  - h3
```

## WireGuard

[WireGuard (opens in a new tab)](https://www.wireguard.com/) æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ Layer 3 çš„ VPNï¼ŒStash æ”¯æŒå°†å…¶ä½œä¸º Layer 4 çš„ä»£ç†ä½¿ç”¨ï¼Œå¹¶æ”¯æŒé€šè¿‡å…¶ä»–åè®®è½¬å‘ WireGuard æ•°æ®åŒ…ã€‚

```
name: wireguard
type: wireguard
server: server # domain is supported
port: 51820
ip: 10.8.4.8
# ipv6: fe80::e6bf:faff:fea0:9fae # optional
private-key: 0G6TTWwvgv8Gy5013/jv2GttkCLYYaNTArHV0NdNkGI= # client private key
public-key: 0ag+C+rINHBnvLJLUyJeYkMWvIAkBjQPPObicuBUn1U= # peer public key
# preshared-key: # optional
dns: [1.0.0.1, 223.6.6.6] # optional
# mtu: 1420 # optional
# reserved: [0, 0, 0] # optional
# keepalive: 45 # optional
# underlying-proxy: # optional
#   type: trojan
#   server: your-underlying-proxy
#   port: 443
#   password: your-password
```

ğŸ’¡

WireGuard å¹¶éä»¥é«˜ååä¸ºè®¾è®¡ç›®æ ‡çš„ä»£ç†åè®®ï¼ŒStash éœ€è¦åœ¨ç”¨æˆ·ç©ºé—´å®Œæˆ Layer 3
ä¸ Layer 4 çš„è½¬æ¢ï¼Œå…¶æ€§èƒ½æŸè€—ä¼šæ¯”å¸¸è§ä»£ç†åè®®å¤§ã€‚åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼ŒWireGuard
ååé‡ä¸€èˆ¬ä¼šæ¯” Layer4 ä»£ç†åè®®ä½ã€‚

âš ï¸

è‹¥ä½¿ç”¨ `underlying-proxy`ï¼Œå…¶å¿…é¡»æ”¯æŒ UDP ä¸­ç»§ï¼Œå»ºè®®ä½¿ç”¨ UDP over TCP
çš„åè®®ï¼ˆå¦‚ Trojanã€VLESSã€VMessã€Snellï¼‰ã€‚

## SSH

é€šè¿‡ [Secure Shell Protocol (SSH) (opens in a new tab)](https://en.wikipedia.org/wiki/Secure_Shell) è½¬å‘ TCP æµé‡ï¼Œæ”¯æŒå¯†ç å’Œå¯†é’¥è®¤è¯ã€‚

ğŸ’¡

ç”±äº SSH æœ¬èº«ä¸æ”¯æŒè½¬å‘ UDP åè®®ï¼ŒStash æ— æ³•é€šè¿‡ SSH åè®®è½¬å‘ UDP æµé‡ã€‚

```
name: ssh
type: ssh
server: server # domain is supported
port: 22
user: root
password: password
private-key: |
  -----BEGIN RSA PRIVATE KEY-----
  MIIEpAIBAAKCAQEA0G6TTWwvgv8Gy5013/jv2GttkCLYYaNTArHV0NdNkGI=
  ...
  -----END RSA PRIVATE KEY-----
private-key-passphrase: your-passphrase # optional
```

## DIRECT with Specified Interface

é€šè¿‡æ–°å»ºç±»å‹ä¸º `direct` çš„ä»£ç†ï¼Œå¹¶æŒ‡å®š `interface-name` å¯ä»¥å¼ºåˆ¶æŸäº›æµé‡é€šè¿‡æŒ‡å®šç½‘å¡ï¼Œå¸¸ç”¨äºè§£å†³ VPN ä¸ Stash æ— æ³•åŒæ—¶ä½¿ç”¨çš„æƒ…å†µã€‚

ä¾‹å¦‚ï¼Œæœ¬æœºä¸Šçš„ OpenVPN ä½¿ç”¨äº† `utun3`ï¼Œå¹¶ä¸”å¸Œæœ› `10.4.8.0/24` éƒ½è¿›å…¥ `utun3` è€Œä¸æ˜¯ macOS çš„é»˜è®¤ç½‘å¡ã€‚

```
name: my-corp-vpn
type: direct
interface-name: utun3
```

```
rules:
  - IP-CIDR,10.4.8.0/24,my-corp-vpn
```

ğŸ’¡

ä¸Šè¿° `utun3` è¯·æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹ã€‚

ä½ å¯ä»¥ä½¿ç”¨ `netstat -rn | grep utun3` æŸ¥è¯¢ `utun3` çš„é™æ€è·¯ç”±è¡¨ã€‚

Last updated on 2025å¹´5æœˆ5æ—¥

[è§„åˆ™é›†åˆ](/rules/rule-set "è§„åˆ™é›†åˆ")[ç­–ç•¥ç»„](/proxy-protocols/proxy-groups "ç­–ç•¥ç»„")

---

# ç­–ç•¥ç»„

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [ç­–ç•¥ç±»å‹](#ç­–ç•¥ç±»å‹)
* [url-test](#url-test)
* [fallback](#fallback)
* [load-balance](#load-balance)
* [select](#select)
* [relay](#relay)
* [é¢å¤–åŠŸèƒ½](#é¢å¤–åŠŸèƒ½)
* [å®šæ—¶æ‰§è¡Œå»¶è¿Ÿæµ‹è¯•](#å®šæ—¶æ‰§è¡Œå»¶è¿Ÿæµ‹è¯•)
* [åŸºäºç½‘ç»œçŠ¶æ€è‡ªåŠ¨åˆ‡æ¢ç­–ç•¥](#åŸºäºç½‘ç»œçŠ¶æ€è‡ªåŠ¨åˆ‡æ¢ç­–ç•¥)
* [çµæ´»åœ°ç»„åˆä»£ç†](#çµæ´»åœ°ç»„åˆä»£ç†)

ä»£ç†åè®®

ç­–ç•¥ç»„

# ç­–ç•¥ç»„

ç­–ç•¥ç»„ï¼ˆ`proxy-groups`ï¼‰æ˜¯ä¸€ç³»åˆ—ä»£ç†ï¼ˆæˆ–ç­–ç•¥ç»„ï¼‰çš„ç»„åˆã€‚ç­–ç•¥ç»„å¯ä»¥åƒå•ä¸ªä»£ç†ä¸€æ ·è¢«åˆ†æµè§„åˆ™å¼•ç”¨ï¼Œå¹¶å¯ä»¥æŒ‡å®šç‰¹æ®Šçš„ç­–ç•¥æé«˜å¯ç”¨æ€§ã€‚

* åˆ†æµè§„åˆ™å¯ä»¥ç›´æ¥å¼•ç”¨ä»£ç†æˆ–ç­–ç•¥ç»„ï¼Œä½†ä¸èƒ½å¼•ç”¨è¿œç¨‹ä»£ç†é›†
* ç­–ç•¥ç»„å¯ä»¥åŒ…å«å¤šä¸ªä»£ç†ï¼Œæˆ–è€…å¤šä¸ªè¿œç¨‹ä»£ç†é›†
* ç­–ç•¥ç»„å¯ä»¥åŒ…å«å¦ä¸€ä¸ªç­–ç•¥ç»„
* ä¸åŒ…å«ä»»ä½•ä»£ç†çš„ç­–ç•¥ç»„ï¼Œä¼šè¢«å½“ä½œä¸º `DIRECT` ç­–ç•¥å¤„ç†
* æ”¯æŒ `filter` å­—æ®µï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤èŠ‚ç‚¹
* å¯ä»¥é€šè¿‡ `include-all: true` å¼•ç”¨æ‰€æœ‰çš„ä»£ç†å’Œè¿œç¨‹ä»£ç†é›†

[(opens in a new tab)](https://mermaid.live/edit#pako:eNqNjz0OwjAMha8SeW4ukIEJNiZYvViNaSOaH7kJIqp6dwIqSAxILNbz9-wne4E-WgYDg1Aa1fGEAUOSeHc8K6136qmrHiSWNH87UibeUNWt3pxl-bX07v6xX8HQgWfx5Gw7bsGgFEIe2TOCadKSXBEwrG2OSo7nGnowWQp3UJKlzHtH7ScP5kLT_KEH63KUDa4PpRlbCA)

## ç­–ç•¥ç±»å‹

ğŸ’¡

ç­–ç•¥ç»„å†…ä»£ç†çš„æ’åºæ–¹å¼é»˜è®¤ä¸ºé…ç½®æ–‡ä»¶é¡ºåºï¼Œå¯ä»¥åœ¨ã€Œç½‘ç»œè®¾ç½®ã€é¡µé¢æ”¹ä¸ºæŒ‰å»¶è¿Ÿæµ‹è¯•ç»“æœæ’åºã€‚

### `url-test`

`url-test` å¯ä»¥å®šæ—¶å¯¹åŒ…å«çš„ä»£ç†æ‰§è¡Œè¿é€šæ€§æ£€æŸ¥ï¼Œè‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€çŸ­çš„æœåŠ¡å™¨ï¼Œä¸å¥åº·çš„ä»£ç†ä¼šè¢«è·³è¿‡ã€‚

```
- name: auto
  type: url-test
  proxies:
    - ss1
    - ss2
    - vmess
  interval: 300
```

### `fallback`

`fallback` å¯ä»¥å°½é‡æŒ‰ç…§ç”¨æˆ·ä¹¦å†™çš„æœåŠ¡å™¨é¡ºåºï¼Œåœ¨ç¡®ä¿æœåŠ¡å™¨å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œç”±ä¸Šè‡³ä¸‹è‡ªåŠ¨é€‰æ‹©æœåŠ¡å™¨ï¼Œä¸å¥åº·çš„ä»£ç†ä¼šè¢«è·³è¿‡ã€‚

```
- name: fallback-auto
  type: fallback
  proxies:
    - ss1
    - ss2
    - vmess
```

### `load-balance`

`load-balance` èƒ½å……åˆ†åˆ©ç”¨å¤šä¸ªä»£ç†çš„å¸¦å®½ï¼Œä¸å¥åº·çš„ä»£ç†ä¼šè¢«è·³è¿‡ã€‚

```
- name: load-balance
  type: load-balance
  strategy: # consistent-hashing / round-robin
  proxies:
    - ss1
    - ss2
    - vmess
```

ä¸€èˆ¬å»ºè®®å°† `strategy` è®¾ç½®ä¸º `consistent-hashing`ï¼Œé¿å…é¢‘ç¹æ”¹å˜ IP è§¦å‘æœåŠ¡ç«¯çš„å®‰å…¨ç­–ç•¥ã€‚

### `select`

`select` ç”¨æ¥å…è®¸ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©ã€‚

```
- name: select
  type: select
  proxies:
    - ss1
    - ss2
    - vmess
    - auto
```

### `relay`

ä»£ç†çš„è½¬å‘é“¾ï¼Œæµé‡å°†é€šè¿‡ä¸€ç³»åˆ—çš„ä»£ç†è½¬å‘åˆ°è¾¾ç›®çš„åœ°ï¼Œä»…æ”¯æŒè½¬å‘ TCP æˆ–ä½¿ç”¨ UDP over TCP çš„åè®®ã€‚`relay` ç­–ç•¥ç»„å¹¶ä¸å—åˆ°å†…éƒ¨ä»£ç†å»¶è¿Ÿæµ‹è¯•çš„ç»“æœå½±å“ï¼Œéœ€è¦å•ç‹¬æŒ‡å®šæµ‹è¯• URLã€‚

```
- name: relay
  type: relay
  benchmark-url: http://www.apple.com # å»ºè®®åªä½¿ç”¨HTTPåè®®
  benchmark-timeout: 5 # å»¶è¿Ÿæµ‹è¯•è¶…æ—¶ï¼Œå•ä½ï¼šç§’
  # æµé‡: stash <-> http <-> vmess <-> ss1 <-> ss2 <-> äº’è”ç½‘
  proxies:
    - http
    - vmess
    - ss1
    - ss2
```

ğŸ’¡

å¦‚æœ `relay` ç­–ç•¥ç»„å†…çš„ä»£ç†æ— æ³•ç›´æ¥è¢«è®¿é—®ï¼Œå¯ä»¥å¯¹è¿™äº›ä»£ç†é…ç½®
`benchmark-disabled: true` ç¦ç”¨ Stash å¯¹å®ƒå‘èµ·å•ç‹¬çš„å»¶è¿Ÿæµ‹è¯•ã€‚

## é¢å¤–åŠŸèƒ½

### å®šæ—¶æ‰§è¡Œå»¶è¿Ÿæµ‹è¯•

Stash é»˜è®¤ä¼šæ¯ 600 ç§’ä¸ºç­–ç•¥ç»„å†…åŒ…å«çš„ä»£ç†è¿›è¡Œå»¶è¿Ÿæµ‹è¯•ï¼Œå¦‚æœç­–ç•¥ç»„åŒ…å«å¦å¤–ä¸€ä¸ªç­–ç•¥ç»„ï¼Œåˆ™ä¼šé€’å½’è¿›è¡Œæµ‹è¯•ã€‚

å®šæ—¶æ‰§è¡Œå»¶è¿Ÿæµ‹è¯•æ”¯æŒä¿®æ”¹ä¸‹è¿°é…ç½®ï¼š

* `interval`ï¼šå•ä½ç§’ï¼ŒæŒ‰ä¸€å®šé—´éš”æ‰§è¡Œå»¶è¿Ÿæµ‹è¯•ï¼Œé»˜è®¤ä¸º 600 ç§’ï¼Œè®¾ç½®ä¸ºè´Ÿæ•°åˆ™ä¸è¿›è¡Œå»¶è¿Ÿæµ‹è¯•ã€‚
* `lazy`ï¼šæ‡’æƒ°æ¨¡å¼ï¼Œå¦‚æœè®¾ç½®ä¸º `true`ï¼Œä¸”ç­–ç•¥ç»„åœ¨è¿‡å»ä¸€æ®µæ—¶é—´æ²¡æœ‰è¢«ä½¿ç”¨ï¼ŒStash ä¼šè·³è¿‡è‡ªåŠ¨å»¶è¿Ÿæµ‹è¯•ä»¥èŠ‚çœèµ„æºã€‚

```
proxy-groups:
  - name: my-proxy-group
    type: select
    # ...
    interval: 300 # æ¯ 300s æ£€æŸ¥ä¸€æ¬¡
    lazy: true # åœ¨ç­–ç•¥ç»„æ²¡æœ‰è¢«ä½¿ç”¨æ—¶å€™ï¼Œä¸è¿›è¡Œå»¶è¿Ÿæµ‹è¯•
```

### åŸºäºç½‘ç»œçŠ¶æ€è‡ªåŠ¨åˆ‡æ¢ç­–ç•¥

`select` ç±»å‹çš„ç­–ç•¥ç»„å¯ä»¥æ ¹æ®è®¾å¤‡çš„ SSID / èœ‚çªæ•°æ®è‡ªåŠ¨åˆ‡æ¢ç­–ç•¥ã€‚

`default` å’Œ `cellular` æ˜¯ä¸¤ä¸ªå¯é€‰çš„ä¿ç•™ç­–ç•¥ï¼š

* å½“åœ¨ Wi-Fi ç¯å¢ƒä¸‹ï¼Œæ²¡æœ‰åŒ¹é…åˆ°ä»»ä½• SSID æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° `default` å¯¹åº”çš„ä»£ç†ï¼›
* åœ¨èœ‚çªæ•°æ®ä¸‹ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° `cellular` å¯¹åº”çš„ä»£ç†ï¼›
* å½“æ²¡æœ‰ `default` æˆ– `cellular` æ—¶å€™ï¼Œä¸ä¼šè§¦å‘ä»»ä½•æ“ä½œã€‚

```
- name: ssid-group
  type: select # ç±»å‹å¿…é¡»ä¸º selectï¼Œå…¼å®¹åŸç‰ˆ clash é…ç½®
  proxies:
    - ss1
    - ss2
    - ss3
    - DIRECT
  ssid-policy:
    # åœ¨ SSID ä¸º office çš„ Wi-Fi ä¸­è‡ªåŠ¨åˆ‡æ¢ä¸º ss1 ç­–ç•¥
    # åœ¨ SSID ä¸º home çš„ Wi-Fi ä¸­è‡ªåŠ¨åˆ‡æ¢ä¸º ss2 ç­–ç•¥
    # åœ¨èœ‚çªæ•°æ®ä¸­è‡ªåŠ¨åˆ‡æ¢ä¸º ss3 ç­–ç•¥
    # å…¶ä»–çš„ SSID é»˜è®¤ä¸º DIRECT
    office: ss1
    home: ss2
    cellular: ss3
    default: DIRECT
```

### çµæ´»åœ°ç»„åˆä»£ç†

Stash æ”¯æŒå„ç§æ–¹å¼å°†å¤šä¸ªä»£ç†ç»„åˆæˆä¸€ä¸ªç­–ç•¥ç»„ã€‚

* å¯ä»¥é€šè¿‡ `include-all: true` å¼•ç”¨æ‰€æœ‰çš„ä»£ç†å’Œè¿œç¨‹ä»£ç†é›†
* ä¸åŒ…å«ä»»ä½•ä»£ç†çš„ç­–ç•¥ç»„ï¼Œä¼šè¢«å½“ä½œä¸º `DIRECT` ç­–ç•¥å¤„ç†ã€‚
* æ”¯æŒ `filter` å­—æ®µï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤èŠ‚ç‚¹

```
proxy-groups:
  - name: my-hongkong-group
    type: select
    include-all: true # å¼•ç”¨æ‰€æœ‰ proxies & proxy-providers
    filter: 'HK|é¦™æ¸¯' # ç­›é€‰å«æœ‰ HK æˆ–é¦™æ¸¯å…³é”®å­—çš„ä»£ç†
```

Last updated on 2025å¹´4æœˆ9æ—¥

[åè®®ç±»å‹](/proxy-protocols/proxy-types "åè®®ç±»å‹")[è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers "è¿œç¨‹ä»£ç†é›†")

---

# è¿œç¨‹ä»£ç†é›†

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [å¿«æ·å¼•ç”¨è¿œç¨‹ä»£ç†é›†](#å¿«æ·å¼•ç”¨è¿œç¨‹ä»£ç†é›†)

ä»£ç†åè®®

è¿œç¨‹ä»£ç†é›†

# è¿œç¨‹ä»£ç†é›†

åœ¨é…ç½®æ–‡ä»¶ç›´æ¥å£°æ˜çš„ä»£ç†ï¼Œæ— æ³•åœ¨åå°è‡ªåŠ¨æ›´æ–°ã€‚æˆ‘ä»¬æ›´æ¨èä½¿ç”¨è¿œç¨‹ä»£ç†é›†ï¼ˆproxy-providerï¼‰ï¼Œèƒ½åœ¨åå°è‡ªåŠ¨ä» URL æ›´æ–°ç­–ç•¥ç»„ã€‚

è¦ä½¿ç”¨è¿œç¨‹ä»£ç†é›†ï¼Œéœ€è¦åœ¨ `proxy-providers` ä¸‹å®šä¹‰ï¼Œå¹¶åœ¨ `proxy-groups` ä¸­å¼•ç”¨ã€‚

```
proxy-providers:
  provider-a:
    url: https://raw.githubusercontent.com/STASH-NETWORKS-LIMITED/stash-example/main/config.yaml
    interval: 3600
    filter: 'example'

  provider-b:
    url: https://raw.githubusercontent.com/STASH-NETWORKS-LIMITED/stash-example/main/config.yaml
    interval: 3600

proxy-groups:
  - name: auto
    type: url-test
    interval: 300
    use:
      - provider-a # reference to provider-a
      - provider-b # reference to provider-b
```

ä¸€ä¸ªåˆæ³•çš„è¿œç¨‹ä»£ç†é›†å¿…é¡»åŒ…å« `proxies` å­—æ®µï¼š

```
proxies:
  - name: 'ss1'
    type: ss
    server: server
    port: 443
    cipher: AEAD_CHACHA20_POLY1305
    password: 'password'
  - name: 'ss2'
    type: ss
    server: server
    port: 443
    cipher: AEAD_CHACHA20_POLY1305
    password: 'password'
```

è¿œç¨‹ä»£ç†é›†æ”¯æŒé€šè¿‡ `filter` å­—æ®µï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤ä»£ç†åã€‚è¿œç¨‹ä»£ç†é›†ä¸ºç©ºæ—¶å€™ï¼Œä¼šä»¥ `DIRECT` æ›¿ä»£ã€‚

### å¿«æ·å¼•ç”¨è¿œç¨‹ä»£ç†é›†

Stash ä¹Ÿæ”¯æŒé€šè¿‡ `use-url` åœ¨ç­–ç•¥ç»„ä¸­å¿«æ·å¼•ç”¨è¿œç¨‹ä»£ç†é›†ï¼Œæ­¤æ—¶ä¸å¯æŒ‡å®šæ›´æ–°æ—¶é—´å’Œåç§°ã€‚

```
proxy-groups:
  - name: auto
    type: url-test
    interval: 300
    use-url:
      - https://raw.githubusercontent.com/STASH-NETWORKS-LIMITED/stash-example/main/config.yaml
```

Last updated on 2023å¹´3æœˆ13æ—¥

[ç­–ç•¥ç»„](/proxy-protocols/proxy-groups "ç­–ç•¥ç»„")[å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark "å»¶è¿Ÿæµ‹è¯•")

---

# å»¶è¿Ÿæµ‹è¯•

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [å»¶è¿Ÿæµ‹è¯•æ–¹å¼](#å»¶è¿Ÿæµ‹è¯•æ–¹å¼)

ä»£ç†åè®®

å»¶è¿Ÿæµ‹è¯•

# å»¶è¿Ÿæµ‹è¯•

åœ¨ Stash ä¸­ï¼Œä½ å¯ä»¥ä¸ºæ¯ä¸ªä»£ç†æŒ‡å®šå•ç‹¬çš„å»¶è¿Ÿæµ‹è¯•å‚æ•°ï¼ŒåŒ…æ‹¬ï¼šå»¶è¿Ÿæµ‹è¯•ç›®æ ‡ URL å’Œæµ‹è¯•çš„è¶…æ—¶æ—¶é—´ã€‚

å»¶è¿Ÿæµ‹è¯•è¶…æ—¶çš„ä»£ç†ä¼šè¢«æ ‡è®°ä¸ºä¸å¥åº·ã€‚

```
proxies:
  - name: your-proxy
    type: ss
    server: server
    port: 443
    benchmark-url: http://www.apple.com # å»ºè®®åªä½¿ç”¨ HTTP åè®®
    benchmark-timeout: 5 # å»¶è¿Ÿæµ‹è¯•è¶…æ—¶æ—¶é—´ï¼Œå•ä½ï¼šç§’
    benchmark-disabled: false # è®¾ç½®ä¸º `true` æ—¶å®Œå…¨ç¦ç”¨å»¶è¿Ÿæµ‹è¯•
```

ğŸ’¡

å¦‚æœä¸€ä¸ªä»£ç†è¢«å¤šä¸ªç­–ç•¥ç»„å¼•ç”¨ï¼Œå¤šä¸ªç­–ç•¥ç»„ä¼šå…±äº«è¿™ä¸ªä»£ç†çš„å»¶è¿Ÿæµ‹è¯•ç»“æœã€‚è‹¥å¸Œæœ›ä¸€ä¸ªä»£ç†åœ¨ä¸åŒçš„ç­–ç•¥ç»„ä½¿ç”¨ä¸åŒçš„å»¶è¿Ÿæµ‹è¯•å‚æ•°ï¼Œè¯·æ‰‹åŠ¨åˆ›å»ºå¤šä¸ªä»£ç†ã€‚

## å»¶è¿Ÿæµ‹è¯•æ–¹å¼

Stash æ”¯æŒå¤šç§æ–¹å¼å¯¹ä»£ç†è¿›è¡Œå»¶è¿Ÿæµ‹è¯•ï¼ŒåŒ…æ‹¬ï¼š

* `UDP`ï¼šä½¿ç”¨ UDP æŠ¥æ–‡è¿›è¡Œå»¶è¿Ÿæµ‹è¯•
* `TCP`ï¼šä½¿ç”¨ TCP æ¡æ‰‹è¿›è¡Œå»¶è¿Ÿæµ‹è¯•ï¼ˆå¯¹åŸºäº UDP çš„åè®®å¦‚ QUIC æ— æ•ˆï¼‰
* `HTTP HEAD`ï¼šé»˜è®¤æ–¹å¼ï¼Œé€šè¿‡ä»£ç†å‘é€ HTTP HEAD è¯·æ±‚è¿›è¡Œå»¶è¿Ÿæµ‹è¯•

Last updated on 2025å¹´4æœˆ9æ—¥

[è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers "è¿œç¨‹ä»£ç†é›†")[é…ç½®æ ·ä¾‹](/configuration/example-config "é…ç½®æ ·ä¾‹")

---

# é…ç½®æ ·ä¾‹

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

é…ç½®æ–‡ä»¶

é…ç½®æ ·ä¾‹

# é…ç½®æ ·ä¾‹

Stash æ‰€æœ‰çš„é…ç½®æ–‡ä»¶å‡ä½¿ç”¨ [YAML (opens in a new tab)](https://yaml.org/) æ ¼å¼ã€‚åœ¨ YAML æ ¼å¼ä¸­ï¼Œç¼©è¿›å½±å“äº†æ•´ä¸ªé…ç½®çš„ç»“æ„ï¼Œç”¨æˆ·å¯ä»¥åœ¨ [www.yamllint.com (opens in a new tab)](http://www.yamllint.com/) æ£€æŸ¥é…ç½®æ˜¯å¦ç¬¦åˆ YAML æ ¼å¼ã€‚

Stash é…ç½®ç”±å•ä¸ªé…ç½®æ–‡ä»¶å’Œè‹¥å¹²ä¸ª[è¦†å†™æ–‡ä»¶](/configuration/override)ç»„æˆï¼Œé…ç½®æ–‡ä»¶æ˜¯å¿…é¡»çš„ï¼Œè¦†å†™æ–‡ä»¶æ˜¯å¯é€‰çš„ã€‚è¦†å†™çš„ä¼˜å…ˆçº§é«˜äºé…ç½®æ–‡ä»¶ï¼Œè¦†å†™æ–‡ä»¶ä¸­çš„å­—æ®µä¼šè¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„å­—æ®µã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡é…ç½®å’Œè¦†å†™çš„ç»„åˆï¼Œæ‰“é€ ç¬¦åˆè‡ªå·±éœ€æ±‚çš„é…ç½®ã€‚

è™½ç„¶é…ç½®æ–‡ä»¶æ˜¯å¿…é¡»çš„ï¼Œä½†å…¶ä¸­æ¯ä¸€ä¸ªå­—æ®µéƒ½æœ‰é»˜è®¤å€¼ï¼Œç”¨æˆ·ä»…éœ€è¦å¡«å†™å¸Œæœ›æ›´æ”¹çš„å­—æ®µå³å¯ã€‚

```
# è§„åˆ™æ¨¡å¼ï¼šruleï¼ˆè§„åˆ™ï¼‰ / globalï¼ˆå…¨å±€ä»£ç†ï¼‰/ directï¼ˆå…¨å±€ç›´è¿ï¼‰
mode: rule

# 5 ä¸ªçº§åˆ«ï¼šsilent / info / warning / error / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: info

http:
  # å¼ºåˆ¶ä½¿ç”¨ HTTP å¼•æ“å¤„ç† TCP è¿æ¥
  # æ•è·åçš„è¿æ¥å¯ä»¥ä½¿ç”¨é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚é‡å†™å’Œè„šæœ¬
  force-http-engine:
    - '*:80'

  # ä»¥ PKCS #12 ç¼–ç çš„ CA è¯ä¹¦
  ca: ''
  # è¯ä¹¦å¯†ç 
  ca-passphrase: ''
  # å¼€å¯ä¸­é—´äººæ”»å‡»ï¼ˆMitMï¼‰åŠŸèƒ½çš„åŸŸååˆ—è¡¨ï¼Œéœ€è¦ç¡®ä¿ä¸Šè¿° CA è¯ä¹¦å·²å—ç³»ç»Ÿä¿¡ä»»
  mitm:
    - g.cn
    - '*.google.cn'
    - weather-data.apple.com # é»˜è®¤åªå¯¹ 443 ç«¯å£å¼€å¯
    - weather-data.apple.com:* # ä½¿ç”¨é€šé…ç¬¦å¯¹æ‰€æœ‰ç«¯å£å¼€å¯
    - '*.weather-data.apple.com' # åŸŸåä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦
    - '-exclude.weather-data.apple.com' # ç”¨-å‰ç¼€æ’é™¤åŸŸå

  # HTTP(S) é‡å†™ï¼Œæ”¯æŒ headerã€302ã€307ã€reject å¤šç§ç­–ç•¥
  url-rewrite:
    - ^http://g\.cn http://www.google.com header # é‡å†™è¯·æ±‚å¤´çš„åŸŸå
    - ^https?://www\.google\.cn https://www.google.com 302 # ç›´æ¥è¿”å›ä¸€ä¸ª 302 é‡å®šå‘çš„å“åº”
    - ^https?://ad\.example - reject # æ‹’ç»è¯·æ±‚

  # ä½¿ç”¨ JavaScript è„šæœ¬æ”¹å†™ HTTP(S) è¯·æ±‚
  script:
    - match: https://weather-data.apple.com/v2/weather/[\w-]+/-?[0-9]+\.[0-9]+/-?[0-9]+\.[0-9]+\?
      name: weather-us-aqi # å¼•ç”¨ script-providers ä¸­çš„è„šæœ¬
      type: response # è„šæœ¬ç±»å‹ï¼šrequest / response
      require-body: true # å¦‚æœéœ€è¦ request / response bodyï¼Œè¯·è®¾ç½®ä¸º true
      timeout: 10 # è„šæœ¬è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼Œå¯é€‰ï¼‰
      argument: '' # è„šæœ¬å‚æ•°ï¼ˆå¯é€‰ï¼‰
      debug: false # å¼€å‘æ¨¡å¼ï¼Œæ¯æ¬¡æ‰§è¡Œå‰ä¼šä» provider åŠ è½½æœ€æ–°è„šæœ¬
      binary-mode: false # ä»¥äºŒè¿›åˆ¶æ¨¡å¼è·å– body
      max-size: 1048576 # 1MB

# å®šæ—¶ä»»åŠ¡
cron:
  # å®šæ—¶æ‰§è¡Œ JavaScript è„šæœ¬
  script:
    - name: weather-us-aqi # å¼•ç”¨ script-providers ä¸­çš„è„šæœ¬
      cron: '* * * * *' # cron è¡¨è¾¾å¼ï¼Œå¯ä»¥åœ¨ https://crontab.guru/ è·å–æ›´å¤šä»‹ç»
      timeout: 10 # è„šæœ¬è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼Œå¯é€‰ï¼‰
      argument: '' # è„šæœ¬å‚æ•°ï¼ˆå¯é€‰ï¼‰
      debug: false # å¼€å‘æ¨¡å¼ï¼Œæ¯æ¬¡æ‰§è¡Œå‰ä¼šä» provider åŠ è½½æœ€æ–°è„šæœ¬

script-providers:
  weather-us-aqi:
    url: https://example.org/stash/script.js
    interval: 86400

script:
  shortcuts: # ä½¿ç”¨è¡¨è¾¾å¼ç¼–å†™è‡ªå®šä¹‰è§„åˆ™
    quic: network == 'udp' and (dst_port == 443 or dst_port == 4483 or dst_port == 9305) # å¯ä»¥åœ¨è§„åˆ™ä¸­å¼•ç”¨

# æ”¯æŒé€šé…ç¬¦åŸŸåï¼ˆä¾‹å¦‚: *.clash.dev, *.foo.*.example.comï¼‰
# ä¸ä½¿ç”¨é€šé…ç¬¦çš„åŸŸåä¼˜å…ˆçº§é«˜äºä½¿ç”¨é€šé…ç¬¦çš„åŸŸåï¼ˆä¾‹å¦‚: foo.example.com > *.example.com > .example.comï¼‰
# æ³¨æ„: +.foo.com çš„æ•ˆæœç­‰åŒäº .foo.com å’Œ foo.com
hosts:
  '*.clash.dev': 127.0.0.1
  '.dev': 127.0.0.1
  'alpha.clash.dev': '::1'

# DNS æœåŠ¡å™¨é…ç½®
dns:
  # ä»¥ä¸‹å¡«å†™çš„ DNS æœåŠ¡å™¨å°†ä¼šè¢«ç”¨æ¥è§£æ DNS æœåŠ¡çš„åŸŸå
  # ä»…å¡«å†™ DNS æœåŠ¡å™¨çš„ IP åœ°å€
  default-nameserver:
    - 223.5.5.5
    - 114.114.114.114
    - system # ä½¿ç”¨ iOS ç³»ç»Ÿ DNS
  # æ”¯æŒ UDP / TCP / DoT / DoH åè®®çš„ DNS æœåŠ¡ï¼Œå¯ä»¥æŒ‡æ˜å…·ä½“çš„è¿æ¥ç«¯å£å·ã€‚
  # æ‰€æœ‰ DNS è¯·æ±‚å°†ä¼šç›´æ¥å‘é€åˆ°æœåŠ¡å™¨ï¼Œä¸ç»è¿‡ä»»ä½•ä»£ç†ã€‚
  # Stash ä¼šä½¿ç”¨æœ€å…ˆè·å¾—çš„è§£æè®°å½•å›å¤ DNS è¯·æ±‚
  nameserver:
    # ä¸å»ºè®®é…ç½®è¶…è¿‡ 2 ä¸ª DNS æœåŠ¡å™¨ï¼Œä¼šå¢åŠ ç³»ç»ŸåŠŸè€—
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - quic://dns.adguard.com:853
    - doq://test.dns.nextdns.io:853
    - system # ä½¿ç”¨ç³»ç»Ÿ DNS

  # è·³è¿‡è¯ä¹¦éªŒè¯ï¼Œè§£å†³éƒ¨åˆ†å…¼å®¹æ€§é—®é¢˜ https://help.nextdns.io/t/g9hdkjz
  skip-cert-verify: true

  # å¯¹éƒ¨åˆ†åŸŸåä½¿ç”¨å•ç‹¬çš„ DNS æœåŠ¡å™¨
  nameserver-policy:
    'www.baidu.com': 114.114.114.114
    '+.internal.crop.com': system

  # åœ¨ä»¥ä¸‹åˆ—è¡¨çš„åŸŸåå°†ä¸ä¼šè¢«è§£æä¸º fake ipï¼Œè¿™äº›åŸŸåç›¸å…³çš„è§£æè¯·æ±‚å°†ä¼šè¿”å›å®ƒä»¬çœŸå®çš„ IP åœ°å€
  fake-ip-filter:
    - '+.stun.*.*'
    - '+.stun.*.*.*'
    - '+.stun.*.*.*.*'
    - '+.stun.*.*.*.*.*'

    # Google Voices
    - 'lens.l.google.com'

    # Nintendo Switch
    - '*.n.n.srv.nintendo.net'

    # PlayStation
    - '+.stun.playstation.net'

    # XBox
    - 'xbox.*.*.microsoft.com'
    - '*.*.xboxlive.com'

    # Microsoft
    - '*.msftncsi.com'
    - '*.msftconnecttest.com'

proxies:
  # shadowsocks
  # æ”¯æŒåŠ å¯†æ–¹å¼ï¼š
  #   aes-128-gcm aes-192-gcm aes-256-gcm
  #   aes-128-cfb aes-192-cfb aes-256-cfb
  #   aes-128-ctr aes-192-ctr aes-256-ctr
  #   rc4-md5 chacha20 chacha20-ietf xchacha20
  #   chacha20-ietf-poly1305 xchacha20-ietf-poly1305
  - name: 'ss1'
    type: ss
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    cipher: chacha20-ietf-poly1305
    password: 'password'

  - name: 'ss2'
    type: ss
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    cipher: AEAD_CHACHA20_POLY1305
    password: 'password'
    plugin: obfs
    plugin-opts:
      mode: tls # æ··æ·†æ¨¡å¼ï¼Œå¯ä»¥é€‰æ‹© http æˆ– tls
      host: bing.com # æ··æ·†åŸŸåï¼Œéœ€è¦å’ŒæœåŠ¡å™¨é…ç½®ä¿æŒä¸€è‡´

  - name: 'ss3'
    type: ss
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    cipher: AEAD_CHACHA20_POLY1305
    password: 'password'
    plugin: v2ray-plugin
    plugin-opts:
      mode: websocket # æš‚æ—¶ä¸æ”¯æŒ QUIC åè®®
      tls: true # wss
      skip-cert-verify: true
      host: bing.com
      path: '/'
      headers:
        custom: value

  # vmess
  # æ”¯æŒåŠ å¯†æ–¹å¼ï¼šauto / aes-128-gcm / chacha20-poly1305 / none
  - name: 'vmess'
    type: vmess
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    uuid: d0529668-8835-11ec-a8a3-0242ac120002
    alterId: 32
    cipher: auto
    tls: true
    skip-cert-verify: true
    servername: example.com # ä¼˜å…ˆçº§é«˜äº wss host
    network: ws
    ws-opts:
      path: /path
      headers:
        Host: v2ray.com
      max-early-data: 2048
      early-data-header-name: Sec-WebSocket-Protocol

  # socks5
  - name: 'socks'
    type: socks5
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    username: username
    password: password
    tls: true
    skip-cert-verify: true

  # http
  - name: 'http'
    type: http
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    username: username
    password: password
    tls: true # https
    skip-cert-verify: true

  # snell
  - name: 'snell'
    type: snell
    server: server
    port: 44046
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    psk: yourpsk
    version: 3
    obfs-opts:
      mode: http # æˆ– tls
      host: bing.com

  # Trojan
  - name: 'trojan'
    type: trojan
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    password: yourpsk
    sni: example.com # Server Name Indicationï¼Œå¦‚æœä¸ºç©ºä¼šä½¿ç”¨ server ä¸­çš„å€¼
    alpn:
      - h2
      - http/1.1
    skip-cert-verify: true

  # hysteria https://github.com/HyNetwork/hysteria/wiki/%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95
  - name: 'hysteria'
    type: hysteria
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    up-speed: 100 # ä¸Šä¼ å¸¦å®½ï¼ˆå•ä½ï¼šMbpsï¼‰
    down-speed: 100 # ä¸‹è½½å¸¦å®½ï¼ˆå•ä½ï¼šMbpsï¼‰
    auth-str: your-password
    # auth: aHR0cHM6Ly9oeXN0ZXJpYS5uZXR3b3JrL2RvY3MvYWR2YW5jZWQtdXNhZ2Uv # bytes encoded in base64
    protocol: '' # udp / wechat-video
    obfs: '' # obfs password
    sni: example.com # Server Name Indicationï¼Œå¦‚æœä¸ºç©ºä¼šä½¿ç”¨ server ä¸­çš„å€¼
    alpn:
      - hysteria
    skip-cert-verify: true

  # ShadowsocksR
  # æ”¯æŒçš„åŠ å¯†æ–¹å¼: SS ä¸­æ”¯æŒçš„æ‰€æœ‰æµåŠ å¯†æ–¹å¼
  # æ”¯æŒçš„æ··æ·†æ–¹å¼:
  #   plain http_simple http_post
  #   random_head tls1.2_ticket_auth tls1.2_ticket_fastauth
  # æ”¯æŒçš„åè®®:
  #   origin auth_sha1_v4 auth_aes128_md5
  #   auth_aes128_sha1 auth_chain_a auth_chain_b
  - name: 'ssr'
    type: ssr
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    cipher: chacha20-ietf
    password: 'password'
    obfs: tls1.2_ticket_auth
    protocol: auth_sha1_v4
    obfs-param: domain.tld
    protocol-param: '#'

  - name: 'vless'
    type: vless
    server: server
    port: 443
    benchmark-url: http://www.apple.com
    benchmark-timeout: 5
    uuid: d0529668-8835-11ec-a8a3-0242ac120002
    flow: xtls-rprx-direct
    skip-cert-verify: true
    network: h2
    tls: true
    ws-opts:
      path: /path
      headers:
        Host: v2ray.com
    grpc-opts:
      grpc-service-name: 'example'
    h2-opts:
      host:
        - http.example.com
        - http-alt.example.com
      path: /

proxy-groups:
  # ä»£ç†çš„è½¬å‘é“¾, åœ¨ proxies ä¸­ä¸åº”è¯¥åŒ…å« relay. ä¸æ”¯æŒ UDP.
  # æµé‡: clash <-> http <-> vmess <-> ss1 <-> ss2 <-> äº’è”ç½‘
  - name: 'relay'
    type: relay
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Direct.png
    proxies:
      - http
      - vmess
      - ss1
      - ss2

  # url-test å¯ä»¥è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€çŸ­çš„æœåŠ¡å™¨
  - name: 'auto'
    type: url-test
    proxies:
      - ss1
      - ss2
      - vmess
    interval: 300

  # fallback å¯ä»¥å°½é‡æŒ‰ç…§ç”¨æˆ·ä¹¦å†™çš„æœåŠ¡å™¨é¡ºåºï¼Œåœ¨ç¡®ä¿æœåŠ¡å™¨å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨é€‰æ‹©æœåŠ¡å™¨
  - name: 'fallback-auto'
    type: fallback
    proxies:
      - ss1
      - ss2
      - vmess
    interval: 300

  # load-balance å¯ä»¥ä½¿ç›¸åŒ eTLD è¯·æ±‚åœ¨åŒä¸€æ¡ä»£ç†çº¿è·¯ä¸Š
  - name: 'load-balance'
    type: load-balance
    proxies:
      - ss1
      - ss2
      - vmess
    interval: 300

  # select ç”¨äºå…è®¸ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©ä»£ç†æœåŠ¡å™¨æˆ–æœåŠ¡å™¨ç»„
  # æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ RESTful API å»åˆ‡æ¢æœåŠ¡å™¨ï¼Œè¿™ç§æ–¹å¼æ¨èåœ¨ GUI ä¸­ä½¿ç”¨
  - name: Proxy
    type: select
    proxies:
      - ss1
      - ss2
      - vmess
      - auto

  # åŸºäº SSID çš„ç­–ç•¥ï¼Œæ–¹ä¾¿åœ¨ç‰¹æ®Šç½‘ç»œç¯å¢ƒä¸‹ä½¿ç”¨ç‰¹å®šçš„ä»£ç†
  - name: ssid-group
    type: select # ç±»å‹å¿…é¡»ä¸º selectï¼Œå…¼å®¹åŸç‰ˆ clash é…ç½®
    proxies:
      - ss1
      - ss2
      - DIRECT
    ssid-policy:
      # åœ¨ SSID ä¸º office çš„ Wi-Fi ä¸­è‡ªåŠ¨åˆ‡æ¢ä¸º ss1 ç­–ç•¥
      # åœ¨ SSID ä¸º home çš„ Wi-Fi ä¸­è‡ªåŠ¨åˆ‡æ¢ä¸º ss2 ç­–ç•¥
      # åœ¨èœ‚çªæ•°æ®ä¸­è‡ªåŠ¨åˆ‡æ¢ä¸º ss3 ç­–ç•¥
      # å…¶ä»–çš„ SSID é»˜è®¤ä¸º DIRECT
      office: ss1
      home: ss2
      cellular: ss3
      default: DIRECT

  - name: UseProvider
    type: select
    use:
      - provider1
    proxies:
      - Proxy
      - DIRECT

proxy-providers:
  provider1:
    url: https://example.org/stash/config.yaml
    interval: 3600

rule-providers:
  proxy-domain:
    behavior: domain # ä½¿ç”¨ domain ç±»è§„åˆ™é›†ï¼Œå¯ä»¥ä½¿åŒ¹é…æ›´é«˜æ•ˆ
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
    interval: 86400

  proxy-domain-text:
    behavior: domain-text # æ¨èä½¿ç”¨ text æ ¼å¼ï¼Œè§£ææ›´é«˜æ•ˆ
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/proxy.txt
    interval: 86400

  lan-cidr:
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt
    interval: 86400

  ip-cidr-text:
    behavior: ipcidr-text
    url: https://cdn.jsdelivr.net/gh/17mon/china_ip_list@master/china_ip_list.txt
    interval: 86400

  apple-direct:
    behavior: classical # ä¸æ¨èä½¿ç”¨ classical ç±»è§„åˆ™é›†
    url: https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/Basic/Apple-direct.yaml
    interval: 3600

rules:
  - SCRIPT,quic,REJECT,no-track
  - RULE-SET,proxy-domain,Proxy
  - RULE-SET,apple-direct,DIRECT
  - RULE-SET,lan-cidr,DIRECT
  - RULE-SET,ip-cidr-text,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Proxy
```

Last updated on 2025å¹´4æœˆ9æ—¥

[å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark "å»¶è¿Ÿæµ‹è¯•")[è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override "è¦†å†™é…ç½®ï¼ˆOverrideï¼‰")

---

# è¦†å†™æ–‡ä»¶ï¼ˆOverrideï¼‰

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [è¯­æ³•å‚è€ƒ](#è¯­æ³•å‚è€ƒ)
* [å¸¸è§è¦†å†™ç¤ºä¾‹](#å¸¸è§è¦†å†™ç¤ºä¾‹)
* [ä½¿ç”¨ #!replace è¯­æ³•çš„è¦†å†™ç¤ºä¾‹](#ä½¿ç”¨-replace-è¯­æ³•çš„è¦†å†™ç¤ºä¾‹)
* [åˆå¹¶ç¤ºä¾‹](#åˆå¹¶ç¤ºä¾‹)

é…ç½®æ–‡ä»¶

è¦†å†™é…ç½®ï¼ˆOverrideï¼‰

# è¦†å†™æ–‡ä»¶ï¼ˆOverrideï¼‰

è¦†å†™æ–‡ä»¶ï¼ˆOverrideï¼‰å…è®¸ç”¨æˆ·ä¿®æ”¹é…ç½®æ–‡ä»¶çš„éƒ¨åˆ†å­—æ®µï¼Œå¸¸ç”¨äºä¿®æ”¹æ‰˜ç®¡ã€è®¢é˜…çš„é…ç½®å†…å®¹ã€‚Stash æ”¯æŒåŒæ—¶å¯ç”¨å¤šä¸ªè¦†å†™æ–‡ä»¶ï¼Œé…ç½®å°†æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡è¦†ç›–ã€‚

æœ€ä½³å®è·µå»ºè®®ï¼šä¸ºä¾¿äºå•ç‹¬æ§åˆ¶å¼€å…³å’Œåˆ†äº«ï¼Œå»ºè®®æŒ‰åŠŸèƒ½ç‚¹åˆ’åˆ†è¦†å†™æ–‡ä»¶ã€‚

## è¯­æ³•å‚è€ƒ

* è¦†å†™æ–‡ä»¶ä½¿ç”¨ YAML æ ¼å¼ï¼Œæ–‡ä»¶åç¼€ä¸º `.stoverride`
* é€šå¸¸ä½¿ç”¨ `name` å’Œ `desc` å­—æ®µä½œä¸ºè¦†å†™æ–‡ä»¶çš„åç§°å’Œæè¿°ï¼Œè¿™ä¸¤ä¸ªå­—æ®µä»…ç”¨äºå±•ç¤º
* è¦†å†™æ–‡ä»¶å¯¹é…ç½®æ–‡ä»¶çš„ä¿®æ”¹éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š
  + å¯¹äºç®€å•ç±»å‹ï¼ˆstringã€numberã€booleanï¼‰çš„åŒåé”®ï¼Œç›´æ¥è¦†ç›–åŸå€¼
  + å¯¹äºå­—å…¸ç±»å‹çš„åŒåé”®ï¼Œé‡‡ç”¨é€’å½’é”®å€¼åˆå¹¶
  + å¯¹äºæ•°ç»„ç±»å‹çš„åŒåé”®ï¼Œè¦†å†™æ–‡ä»¶çš„æ•°ç»„ä¼šæ’å…¥åˆ°åŸæ•°ç»„å‰é¢
  + å¯¹äºå­—å…¸ç±»å‹å’Œæ•°ç»„ç±»å‹çš„é”®ï¼Œè‹¥æ·»åŠ æ³¨é‡Š `#!replace`ï¼Œåˆ™é‡‡ç”¨å®Œå…¨è¦†ç›–æ–¹å¼åˆå¹¶

âš ï¸

å½“å‰ç‰ˆæœ¬æš‚ä¸æ”¯æŒä¿®æ”¹æ•°ç»„ä¸­çš„ç‰¹å®šå…ƒç´ ï¼Œåç»­ç‰ˆæœ¬å°†æä¾›ç›¸å…³è¯­æ³•æ”¯æŒã€‚

## å¸¸è§è¦†å†™ç¤ºä¾‹

```
name: 'ğŸ“º BiliBili: ğŸ”€ Redirect'
desc: |-
  å“”å“©å“”å“©ï¼šé‡å®šå‘
  ä¸­å›½ç«™CDNè‡ªå®šä¹‰
openUrl: 'http://boxjs.com/#/app/BiliBili.Redirect'
author: |-
  VirgilClyne[https://github.com/VirgilClyne]
homepage: 'https://Redirect.BiliUniverse.io'
icon: 'https://github.com/BiliUniverse/Redirect/raw/main/src/assets/icon_rounded.png'
category: 'ğŸª BiliUniverse'
date: '2024-12-10 07:13:21'
version: '0.2.12'

http:
  force-http-engine:
    - '*.bilivideo.cn:80'
    - '*.bilivideo.com:80'
    - upos-hz-mirrorakam.akamaized.net:80
    - '*:4480'
    - '*:8000'
    - '*:8082'
    - '*.mcdn.bilivideo.cn:9102'
  mitm:
    - '*.bilivideo.cn:443'
    - '*.bilivideo.com:443'
    - '*.mcdn.bilivideo.com:4483'
    - '*.mcdn.bilivideo.cn:4483'
    - '*.mcdn.bilivideo.cn:8082'
    - '*.mcdn.bilivideo.com:8082'
    - 'upos-*-mirrorakam.akamaized.net:443'
  script:
    - match: ^https?:\/\/.+\.bilivideo\.com\/upgcxcode\/
      name: 'ğŸ“º BiliBili.Redirect.request'
      type: request
    - match: ^https?:\/\/(.+):(8000|8082)\/v1\/resource\/
      name: 'ğŸ“º BiliBili.Redirect.request'
      type: request
      argument:
    - match: ^https?:\/\/[xy0-9]+\.mcdn\.bilivideo\.(cn|com):(4483|9102)\/upgcxcode\/
      name: 'ğŸ“º BiliBili.Redirect.request'
      type: request
      argument:
    - match: ^https?:\/\/(.+):4480\/upgcxcode\/
      name: 'ğŸ“º BiliBili.Redirect.request'
      type: request
      argument:
    - match: ^https?:\/\/upos-(hz|bstar1)-mirrorakam\.akamaized\.net/upgcxcode\/
      name: 'ğŸ“º BiliBili.Redirect.request'
      type: request
      argument:
script-providers:
  'ğŸ“º BiliBili.Redirect.request':
    url: https://github.com/BiliUniverse/Redirect/releases/download/v0.2.12/request.bundle.js
    interval: 86400
```

## ä½¿ç”¨ `#!replace` è¯­æ³•çš„è¦†å†™ç¤ºä¾‹

```
name: ä»…ä½¿ç”¨ CloudFlare DNS
dns:
  # å°†å®Œå…¨è¦†ç›–åŸæœ‰ default-nameserver
  default-nameserver: #!replace
    - system
    - 223.5.5.5
    - 1.0.0.1
  # å°†å®Œå…¨è¦†ç›–åŸæœ‰ nameserver
  nameserver: #!replace
    - https://1.0.0.1/dns-query # CF IPv4
    - https://[2606:4700:4700::1111]/dns-query # CF IPv6
```

## åˆå¹¶ç¤ºä¾‹

åŸå§‹é…ç½®æ–‡ä»¶ `config.yaml`ï¼š

```
dict:
  k1: true
  k2: 1
  k3:
    - 1
    - 2
    - 3
  k4:
    - 1
    - 2
    - 3
```

è¦†å†™æ–‡ä»¶ï¼š

```
key: value
dict:
  k3:
    - 0
  k4: #!replace
    - 1
  k5: null
```

åˆå¹¶åç»“æœï¼š

```
key: value
dict:
  k1: true
  k2: 1
  k3:
    - 0
    - 1
    - 2
    - 3
  k4:
    - 1
  k5: null
```

Last updated on 2025å¹´4æœˆ6æ—¥

[é…ç½®æ ·ä¾‹](/configuration/example-config "é…ç½®æ ·ä¾‹")[ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon "ç­–ç•¥ç»„å›¾æ ‡")

---

# ç­–ç•¥ç»„å›¾æ ‡

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

é…ç½®æ–‡ä»¶

ç­–ç•¥ç»„å›¾æ ‡

# ç­–ç•¥ç»„å›¾æ ‡

ä¸ºäº†åŒºåˆ†ä¸åŒçš„ç­–ç•¥ç»„ï¼Œæ‚¨å¯ä»¥ä¸ºæ¯ä¸ªç­–ç•¥ç»„æŒ‡å®šä¸€ä¸ªå›¾æ ‡ã€‚åœ¨é…ç½®æ–‡ä»¶çš„ `proxy-groups` ç« èŠ‚ä¸­ï¼Œä¸ºç­–ç•¥ç»„æ·»åŠ  `icon` å­—æ®µï¼Œå¹¶è¾“å…¥å›¾ç‰‡çš„ URLï¼Œæ”¯æŒ JPG å’Œ PNG æ ¼å¼çš„å›¾ç‰‡ã€‚

```
- name: 'auto'
  type: url-test
  icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Direct.png
  proxies:
    - ss1
    - ss2
    - vmess
  interval: 300
```

Last updated on 2024å¹´8æœˆ4æ—¥

[è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override "è¦†å†™é…ç½®ï¼ˆOverrideï¼‰")[ç®€ä»‹](/http-engine/intro "ç®€ä»‹")

---

# Stash HTTP Engine

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [å…¥ç«™é€»è¾‘](#å…¥ç«™é€»è¾‘)
* [åå•†ä¸è¿æ¥ç®¡ç†](#åå•†ä¸è¿æ¥ç®¡ç†)
* [å®è·µä¸è¡¨ç°](#å®è·µä¸è¡¨ç°)

HTTP å¼•æ“

ç®€ä»‹

# Stash HTTP Engine

Stash å†…ç½®é«˜æ•ˆçš„ HTTP å¼•æ“ï¼Œå…è®¸ç”¨æˆ·å¯¹ç³»ç»Ÿä¸­çš„ HTTP è¯·æ±‚è¿›è¡Œæ”¹å†™ã€æ‹¦æˆªã€æŠ“å–ã€é‡æ”¾ï¼Œä»¥åŠå¯¹ HTTPS è¯·æ±‚é€šè¿‡ MitM æ–¹å¼è¿›è¡Œè§£å¯†ã€‚

## å…¥ç«™é€»è¾‘

ç³»ç»Ÿä¸­å¹¶éæ‰€æœ‰è¿æ¥éƒ½æ˜¯ HTTP è¯·æ±‚ï¼ŒStash ä¼šæŒ‰ç…§ä»¥ä¸‹ç­–ç•¥æ§åˆ¶è¿æ¥æ˜¯å¦è¿›å…¥ HTTP å¼•æ“ã€‚

* åœ¨ã€Œä»…ä½¿ç”¨ Tunnel ä»£ç†ã€å…³é—­çš„æƒ…å†µä¸‹ï¼ŒStash ä¼šå‘ç³»ç»Ÿå£°æ˜ HTTP Proxyã€‚è¿›å…¥ HTTP Proxy çš„ HTTP è¯·æ±‚ä¼šæµå…¥ HTTP å¼•æ“å¤„ç†ã€‚
* å¯¹äºä» Tunnel è¿›å…¥ï¼Œä¸”å‘½ä¸­ `force-http-engine` åˆ—è¡¨çš„ TCP è¿æ¥ï¼Œä¹Ÿä¼šæµå…¥ HTTP å¼•æ“å¤„ç†ã€‚
* å¯¹äºå‘½ä¸­ MitM åˆ—è¡¨çš„ HTTPS è¯·æ±‚ï¼Œä¹Ÿä¼šæµå…¥ HTTP å¼•æ“å¤„ç†ï¼Œå¹¶ä¸” Stash ä¼šæ ¹æ® SNI ä½¿ç”¨é…ç½®çš„æ ¹è¯ä¹¦ç”Ÿæˆä¸´æ—¶è¯ä¹¦ï¼Œå®Œæˆ TLS æ¡æ‰‹ã€‚
* å…¶ä»–æœªå‘½ä¸­è¯·æ±‚ä¼šä»¥ TCP æµè½¬å‘ï¼Œä¸è¿›å…¥ HTTP å¼•æ“ã€‚
* æš‚æ—¶ä¸æ”¯æŒå¤„ç† HTTP/3 çš„è¯·æ±‚ï¼ŒStash ä¼šå½“ä½œæ™®é€š UDP åŒ…è½¬å‘ï¼Œæ­¤æ—¶æ•´ä½“ååé‡ä¸€èˆ¬ä¸å¦‚åŸºäº TCP çš„ HTTP/1 ä¸ HTTP/2 åè®®ã€‚

åœ¨é‡åˆ° HTTP æ”¹å†™ã€è„šæœ¬ä¸ç”Ÿæ•ˆæ—¶ï¼Œå¯ä»¥æ ¸å¯¹ä¸Šè¿°è§„åˆ™æ’æŸ¥ã€‚

## åå•†ä¸è¿æ¥ç®¡ç†

Stash HTTP Engine å®Œæ•´æ”¯æŒè§£æ HTTP/1.x ä¸ HTTP/2 åè®®ã€‚

* å¯¹äº HTTP è¯·æ±‚ï¼ŒStash HTTP Engine ä»…æ”¯æŒ HTTP/1.x åè®®ï¼Œä¸æ”¯æŒ HTTP/2 Cleartextã€‚
* å¯¹äº HTTPS è¯·æ±‚ä¸”å¼€å¯äº† MitMï¼ŒStash ä¼šå°è¯•ä¸ App åå•†å‡çº§åˆ° HTTP/2ï¼Œä¹Ÿä¼šä¸ Web Server åå•†å‡çº§åˆ° HTTP/2ï¼ŒLã€R ä¸¤ä¾§è¿æ¥æ˜¯**å„è‡ªç‹¬ç«‹æ— å½±å“**çš„ã€‚
* Stash HTTP Engine å¯¹äº Lã€R ä¸¤ä¾§è¿æ¥å®è¡Œ**åˆ†åˆ«ç®¡ç†**ï¼Œå¯¹äº R ä¾§è¿æ¥ï¼ŒStash ä¼šæœ€å¤§é™åº¦åœ°å¤ç”¨ TCP è¿æ¥ï¼Œä»¥å‡å°‘ TCP / TLS æ¡æ‰‹çš„æ¶ˆè€—ã€‚

## å®è·µä¸è¡¨ç°

åœ¨å®è·µä¸­ï¼Œå­˜åœ¨ï¼š

* éƒ¨åˆ† App ä¸è¿›è¡Œ HTTP/2 åå•†ï¼Œä½† Web Server æ”¯æŒ HTTP/2 çš„æƒ…å†µã€‚åœ¨ Stash HTTP Engine é€šè¿‡ MitM æ¥ç®¡åï¼Œ L ä¾§ä¼šä½¿ç”¨ HTTP/1.1 åè®®ï¼Œä½† R ä¾§ä¼šåå•†è‡³ HTTP/2ã€‚
* éƒ¨åˆ† App å³ä½¿åœ¨ Web Server æ”¯æŒ HTTP/2 çš„æƒ…å†µä¸‹ï¼Œä»ä¸ºæ¯ä¸ª HTTPS è¯·æ±‚åˆ›å»ºä¸€ä¸ª TLS è¿æ¥çš„æƒ…å†µã€‚åœ¨ Stash HTTP Engine é€šè¿‡ MitM æ¥ç®¡åï¼Œå®é™…åªä¼šåˆ›å»ºå•æ¡ TCP è¿æ¥åˆ° Web Serverã€‚

ğŸ’¡

åœ¨ä½¿ç”¨ä¸­é‡åˆ°ä»»ä½•å…¼å®¹æ€§é—®é¢˜ï¼Œè¯·ä¸æˆ‘ä»¬è”ç³» ã€‚

Last updated on 2023å¹´3æœˆ13æ—¥

[ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon "ç­–ç•¥ç»„å›¾æ ‡")[MitM](/http-engine/mitm "MitM")

---

# MitM

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [ä½¿ç”¨é…ç½®æ–‡ä»¶é…ç½® MitM](#ä½¿ç”¨é…ç½®æ–‡ä»¶é…ç½®-mitm)
* [é…ç½® CA è¯ä¹¦](#é…ç½®-ca-è¯ä¹¦)
* [é…ç½® MitM åˆ—è¡¨](#é…ç½®-mitm-åˆ—è¡¨)
* [ä½¿ç”¨å›¾å½¢ç•Œé¢é…ç½® MitM](#ä½¿ç”¨å›¾å½¢ç•Œé¢é…ç½®-mitm)
* [é…ç½® CA è¯ä¹¦](#é…ç½®-ca-è¯ä¹¦-1)
* [é…ç½® MitM åˆ—è¡¨](#é…ç½®-mitm-åˆ—è¡¨-1)
* [ç³»ç»Ÿä¿¡ä»»è¯ä¹¦](#ç³»ç»Ÿä¿¡ä»»è¯ä¹¦)

HTTP å¼•æ“

MitM

# MitM

å¦‚æœæƒ³å¯¹ HTTPS è¯·æ±‚è¿›è¡ŒæŸ¥çœ‹ã€æ”¹å†™ã€æ‰§è¡Œè„šæœ¬ï¼Œå¿…é¡»å¯ç”¨ MitM åŠŸèƒ½ã€‚åœ¨å¯ç”¨ MitM åŠŸèƒ½å‰ï¼Œä½ çš„è®¾å¤‡éœ€è¦ä¿¡ä»»è‡ªè¡Œç­¾å‘çš„ CA è¯ä¹¦ï¼Œè¯¥ CA è¯ä¹¦å¯ä»¥ç”±ç”¨æˆ·å¯¼å…¥ Stashï¼Œæˆ–ç”± Stash ç”Ÿæˆã€‚

âš ï¸

åŸºäºæ•°æ®å®‰å…¨ä»¥åŠç§éšçš„è€ƒè™‘ï¼Œä»»ä½•æ—¶å€™ä½ ä¸åº”è¯¥ä¸ä»–äººå…±äº«è¯ä¹¦ï¼Œæˆ–ä½¿ç”¨äº’è”ç½‘ä¸Šæä¾›çš„
CA è¯ä¹¦ã€‚

## ä½¿ç”¨é…ç½®æ–‡ä»¶é…ç½® MitM

### é…ç½® CA è¯ä¹¦

```
http:
  # ä»¥ PKCS #12 ç¼–ç çš„ CA è¯ä¹¦
  ca: ''
  # è¯ä¹¦å¯†ç 
  ca-passphrase: ''
  # å¼€å¯ MitM åŠŸèƒ½çš„åŸŸååˆ—è¡¨ï¼Œéœ€è¦ç¡®ä¿ä¸Šè¿° CA è¯ä¹¦å·²å—ç³»ç»Ÿä¿¡ä»»
```

### é…ç½® MitM åˆ—è¡¨

```
http:
  # å¼€å¯ MitM åŠŸèƒ½çš„åŸŸååˆ—è¡¨ï¼Œéœ€è¦ç¡®ä¿ä¸Šè¿° CA è¯ä¹¦å·²å—ç³»ç»Ÿä¿¡ä»»
  mitm:
    - g.cn
    - '*.google.cn'
    - weather-data.apple.com # é»˜è®¤åªå¯¹ 443 ç«¯å£å¼€å¯
    - weather-data.apple.com:* # ä½¿ç”¨é€šé…ç¬¦å¯¹æ‰€æœ‰ç«¯å£å¼€å¯
    - '*.weather-data.apple.com' # åŸŸåä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦
```

è‡³æ­¤ï¼ŒMitM é…ç½®å®Œæ¯•ã€‚

## ä½¿ç”¨å›¾å½¢ç•Œé¢é…ç½® MitM

å¦‚æœæ— æ³•åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  CA è¯ä¹¦ï¼Œå¯ä»¥ä½¿ç”¨ Stash çš„å›¾å½¢ç•Œé¢ç”Ÿæˆ CA è¯ä¹¦ã€‚

### é…ç½® CA è¯ä¹¦

1ã€åœ¨ Stash é¦–é¡µï¼Œæ‰¾åˆ° **MitM** ï¼Œé€‰æ‹© **[CA è¯ä¹¦]**ï¼›

2ã€ç‚¹å‡» **[Stash Generated CA]** ç”Ÿæˆæ–°çš„è¯ä¹¦ï¼›

3ã€ç‚¹å‡» **[å®‰è£… è¯ä¹¦]** å®‰è£…æ–°è¯ä¹¦ï¼›

4ã€ Stash ä¼šè‡ªåŠ¨è·³è½¬åˆ° **Safari** è¿›è¡Œè¯ä¹¦å®‰è£…ï¼Œç‚¹å‡» **[å…è®¸]** å®‰è£…æ–°çš„è¯ä¹¦ï¼›

5ã€å‡ºç° [å·²ä¸‹è½½æè¿°æ–‡ä»¶] ï¼Œåˆ™ä»£è¡¨è¯ä¹¦å·²æˆåŠŸå®‰è£…ï¼›

### é…ç½® MitM åˆ—è¡¨

1ã€åœ¨ Stash é¦–é¡µï¼Œæ‰¾åˆ° **MitM** ï¼Œé€‰æ‹© **[ä¸»æœºå]**ï¼›

2ã€è¾“å…¥æ‚¨æƒ³æ·»åŠ çš„åŸŸåï¼Œå¦‚ **\*.google.cn** ï¼ŒåŸŸåä¸­å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Œç‚¹å‡»æ—è¾¹çš„ **[+ å·]ï¼Œæ·»åŠ åˆ° MitM åˆ—è¡¨é‡Œï¼›**

### ç³»ç»Ÿä¿¡ä»»è¯ä¹¦

Last updated on 2023å¹´10æœˆ29æ—¥

[ç®€ä»‹](/http-engine/intro "ç®€ä»‹")[å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine "å¼ºåˆ¶ HTTP å¼•æ“")

---

# Force HTTP Engine

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

HTTP å¼•æ“

å¼ºåˆ¶ HTTP å¼•æ“

# Force HTTP Engine

é»˜è®¤åœ°ï¼Œæ‰€æœ‰ç»ç”± HTTP Proxy çš„è¯·æ±‚ä¼šç”± HTTP å¼•æ“å¤„ç†ï¼Œä»¥ä½¿ç”¨æ”¹å†™ã€è„šæœ¬ç­‰åŠŸèƒ½ã€‚è‹¥å¸Œæœ›æ¥è‡ª Tunnel çš„ TCP è¿æ¥ç»ç”± HTTP å¼•æ“å¤„ç†ï¼Œéœ€è¦é…ç½® `force-http-engine`ã€‚

```
http:
  # å¼ºåˆ¶ä½¿ç”¨ Stash å¼•æ“ä»¥ HTTP åè®®å¤„ç† TCP è¿æ¥
  # æ•è·åçš„è¿æ¥å¯ä»¥ä½¿ç”¨é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚é‡å†™å’Œè„šæœ¬
  force-http-engine:
    - '*:80'
    - '*:4480' # BiliBili CDN
    - '*:9102' # BiliBili CDN
```

âš ï¸

æ— æ³•è§£æçš„è¯·æ±‚ä¼šè¢« HTTP å¼•æ“ä»¥ Bad Request å“åº”æ‹’ç»ã€‚

Last updated on 2023å¹´3æœˆ13æ—¥

[MitM](/http-engine/mitm "MitM")[HTTP é‡å†™](/http-engine/rewrite "HTTP é‡å†™")

---

# HTTP é‡å†™

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [URL é‡å†™](#url-é‡å†™)
* [transparent](#transparent)
* [302 / 307](#302--307)
* [reject](#reject)
* [reject-200](#reject-200)
* [reject-img](#reject-img)
* [reject-dict](#reject-dict)
* [reject-array](#reject-array)
* [HTTP header é‡å†™](#http-header-é‡å†™)
* [request-add / response-add](#request-add--response-add)
* [request-del / response-del](#request-del--response-del)
* [request-replace / response-replace](#request-replace--response-replace)
* [request-replace-regex / response-replace-regex](#request-replace-regex--response-replace-regex)
* [ä½¿ç”¨ JavaScript å¼•æ“é‡å†™](#ä½¿ç”¨-javascript-å¼•æ“é‡å†™)

HTTP å¼•æ“

HTTP é‡å†™

# HTTP é‡å†™

HTTP é‡å†™å…è®¸ç”¨æˆ·é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… URLï¼Œæ‹’ç»æˆ–è€…é‡å®šå‘ HTTP(S) è¯·æ±‚ï¼Œå¸¸ç”¨äºå»å¹¿å‘Šï¼Œé¿å…éšç§è·Ÿè¸ªç­‰ç›®çš„ã€‚

é…ç½®æ ¼å¼ï¼š

```
http:
  # HTTP(S) é‡å†™ï¼Œæ”¯æŒheaderã€302ã€307ã€rejectå¤šç§ç­–ç•¥
  url-rewrite:
    - ^http://g\.cn https://www.google.com transparent
    - ^https?://www\.google\.cn https://www.google.com 302 # ç›´æ¥è¿”å›ä¸€ä¸ª 302 é‡å®šå‘çš„å“åº”
    - ^https?://ad\.example - reject # æ‹’ç»è¯·æ±‚
  header-rewrite:
    - ^http://g\.cn request-add DNT 1
    - ^http://g\.cn request-del DNT
    - ^http://g\.cn request-replace DNT 1
    - ^http://g\.cn request-replace-regex User-Agent Go-http-client curl

    - ^http://g\.cn response-add DNT 1
    - ^http://g\.cn response-del DNT
    - ^http://g\.cn response-replace DNT 1
    - ^http://g\.cn response-replace-regex User-Agent Go-http-client curl
```

## URL é‡å†™

### `transparent`

æ‹¦æˆªå¹¶ä¿®æ”¹è¯·æ±‚çš„ URLï¼Œæ•ˆæœç±»ä¼¼é€æ˜ä»£ç†ï¼Œåº”ç”¨å¯¹æ­¤æ— æ„ŸçŸ¥ï¼Œæ”¯æŒé‡å®šå‘ HTTP / HTTPSã€‚

### `302 / 307`

HTTP å¼•æ“ä¼šè¿”å›ä¸€ä¸ª 3xx çŠ¶æ€ç ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨è®¾ç½® Location å­—æ®µï¼Œä»¥è¾¾åˆ°é‡å®šå‘çš„ç›®çš„ã€‚

### `reject`

è¿”å› 404 å“åº”ï¼Œå’Œç©ºçš„å“åº” bodyã€‚

### `reject-200`

è¿”å› 200 å“åº”ï¼Œå’Œç©ºçš„å“åº” bodyã€‚

### `reject-img`

è¿”å› 200 å“åº”ï¼Œå’Œ 1px gif çš„å“åº” bodyã€‚

### `reject-dict`

è¿”å› 200 å“åº”ï¼Œå’Œå†…å®¹ä¸º `{}` çš„å“åº” bodyã€‚

### `reject-array`

è¿”å› 200 å“åº”ï¼Œå’Œå†…å®¹ä¸º `[]` çš„å“åº” bodyã€‚

## HTTP header é‡å†™

header é‡å†™å…è®¸ç”¨æˆ·å¢åŠ ã€åˆ é™¤ã€æ›¿æ¢ HTTP è¯·æ±‚ / å“åº”çš„ä»»æ„ headerã€‚

### `request-add` / `response-add`

å¯¹ HTTP è¯·æ±‚ / å“åº”æ–°å¢ headerã€‚

### `request-del` / `response-del`

å¯¹ HTTP è¯·æ±‚ / å“åº”åˆ é™¤ headerã€‚

### `request-replace` / `response-replace`

å¯¹ HTTP è¯·æ±‚ / å“åº”æ›¿æ¢ header çš„å€¼ã€‚

### `request-replace-regex` / `response-replace-regex`

å¯¹ HTTP è¯·æ±‚ / å“åº”é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢ header çš„å€¼ã€‚

## ä½¿ç”¨ JavaScript å¼•æ“é‡å†™

å¦‚æœä¸Šè¿°åŠŸèƒ½æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œè¯·å‚è€ƒ[ä½¿ç”¨ JavaScript å¼•æ“é‡å†™ HTTP](/script/rewrite-requests)ã€‚

Last updated on 2023å¹´3æœˆ16æ—¥

[å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine "å¼ºåˆ¶ HTTP å¼•æ“")[è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface "è¯­æ³•ä¸æ¥å£")

---

# è¯­æ³•ä¸æ¥å£

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [åŸºç¡€æ–¹æ³•](#åŸºç¡€æ–¹æ³•)
* [$done(value)](#donevalue)
* [æŒä¹…åŒ–å­˜å‚¨](#æŒä¹…åŒ–å­˜å‚¨)
* [HTTP Client](#http-client)

JavsScript è„šæœ¬

è¯­æ³•ä¸æ¥å£

# è¯­æ³•ä¸æ¥å£

## åŸºç¡€æ–¹æ³•

* `$script.name`ï¼šè„šæœ¬åç§°
* `$script.type`ï¼šè„šæœ¬ç±»å‹ï¼Œå¦‚ `request`, `response` å’Œ `tile`
* `$script.startTime`ï¼šè„šæœ¬å¼€å§‹è¿è¡Œçš„æ—¶é—´
* `$environment["stash-build"]`ï¼šStash Build ç¼–å·
* `$environment["stash-version"]`ï¼šStash ç‰ˆæœ¬å·
* `$environment.language`ï¼šStash è¿è¡Œè¯­è¨€
* `$environment.system`ï¼šStash è¿è¡Œç³»ç»Ÿ (iOS / macOS)
* `$argument`ï¼šè¿è¡Œå‚æ•°
* `$done(value)`ï¼šç»“æŸè„šæœ¬è¿è¡Œï¼Œé‡Šæ”¾èµ„æº
* `$notification.post(title, subtitle, body)`ï¼šå‘é€ iOS é€šçŸ¥
* `console.log(value)`ï¼šè¾“å‡ºæ—¥å¿—ï¼Œè„šæœ¬æ—¥å¿—ä¼šè¾“å‡ºåˆ°å•ç‹¬çš„æ–‡ä»¶
* `setTimeout(callback, delay)`ï¼šå»¶è¿Ÿæ‰§è¡Œå›è°ƒå‡½æ•°

## `$done(value)`

âš ï¸

å¯¹äºæ‰€æœ‰è„šæœ¬ï¼Œåœ¨ç»“æŸæ—¶å€™å¿…é¡»è°ƒç”¨ `$done(value)` æ–¹æ³•é‡Šæ”¾èµ„æºã€‚

## æŒä¹…åŒ–å­˜å‚¨

* `$persistentStore.write(value, key)`ï¼šå†™å…¥æŒä¹…åŒ–å­˜å‚¨
* `$persistentStore.read(key)`ï¼šè¯»å–æŒä¹…åŒ–å­˜å‚¨

## HTTP Client

* `$httpClient.get(url<String>, callback<Function>)`
* `$httpClient.get(request<Object>, callback<Function>)`

åŒæ ·åœ°ï¼Œè¿˜æœ‰ï¼š

* `$httpClient.post()`
* `$httpClient.put()`
* `$httpClient.delete()`
* `$httpClient.head()`
* `$httpClient.options()`
* `$httpClient.patch()`

è¯·æ±‚çš„è¶…æ—¶ä¸º 5 ç§’ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® `X-Stash-Selected-Proxy` æŒ‡å®šè¯·æ±‚çš„ä½¿ç”¨çš„ä»£ç†ï¼Œæˆ–è®¾ç½® `binary-mode` å¼€å¯äºŒè¿›åˆ¶æ¨¡å¼ï¼Œä¾‹å¦‚ï¼š

```
$httpClient.get('http://httpbin.org/get', (error, response, data) => {
  if (error) {
    console.log(error)
  } else {
    console.log(data)
  }
})

const yourProxyName = 'a fancy name with ğŸ˜„'

$httpClient.post(
  {
    url: 'http://httpbin.org/post',
    headers: {
      'X-Header-Key': 'headerValue',
      'X-Stash-Selected-Proxy': encodeURIComponent(yourProxyName),
    },
    body: '{}', // can be object or string
    timeout: 5,
    insecure: false,
    'binary-mode': true,
    'auto-cookie': true,
    'auto-redirect': true,
  },
  (error, response, data) => {
    if (error) {
      console.log(error)
    } else {
      console.log(data)
    }
  }
)
```

Last updated on 2024å¹´5æœˆ30æ—¥

[HTTP é‡å†™](/http-engine/rewrite "HTTP é‡å†™")[æ”¹å†™ HTTP](/script/rewrite-requests "æ”¹å†™ HTTP")

---

# æ”¹å†™ HTTP

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [é…ç½®æ ¼å¼](#é…ç½®æ ¼å¼)
* [Request Object](#request-object)
* [Response Object](#response-object)
* [$done(value)](#donevalue)

JavsScript è„šæœ¬

æ”¹å†™ HTTP

# æ”¹å†™ HTTP

ç”¨æˆ·å¯ä»¥é€šè¿‡ JavaScript è„šæœ¬ä¿®æ”¹æµç» Stash çš„ HTTP è¯·æ±‚ã€å“åº”ã€‚

## é…ç½®æ ¼å¼

```
http:
  script:
    - match: url-you-want-to-match
      name: your-fancy-script
      type: response # request / response
      require-body: true
      timeout: 20
      argument: ''
      binary-mode: false
      max-size: 1048576 # 1MB

script-providers:
  your-fancy-script:
    url: https://your-fancy-script.com/your-fancy-script.js
    interval: 86400
```

å‚æ•°ï¼š

* `match`: è„šæœ¬åŒ¹é…çš„ URL æ­£åˆ™è¡¨è¾¾å¼ã€‚
* `type`: è„šæœ¬ç±»å‹ï¼Œå¯é€‰å€¼ä¸º `request` æˆ– `response`ã€‚
* `require-body`: æ˜¯å¦éœ€è¦è¯·æ±‚ä½“ / å“åº”ä½“ï¼Œåœ¨è„šæœ¬ä¸­å¤„ç† body éœ€è¦æ¶ˆè€—æ›´å¤šçš„å†…å­˜ç©ºé—´ï¼Œä»…åœ¨å¿…è¦æ—¶å¯ç”¨ã€‚
* `timeout`: è„šæœ¬æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚
* `argument`: è„šæœ¬æ‰§è¡Œæ—¶çš„å‚æ•°ï¼Œç±»å‹ä¸º `string`ã€‚
* `binary-mode`ï¼šäºŒè¿›åˆ¶æ¨¡å¼ï¼Œ`body` ä¼šä»¥ `Uint8Array` è€Œä¸æ˜¯ `string` ä¼ é€’ç»™è„šæœ¬ã€‚
* `max-size`ï¼šå•ä½ä¸ºå­—èŠ‚ï¼Œbody è¶…è¿‡è¿™ä¸ªå¤§å°çš„è¯·æ±‚ä¸ä¼šè§¦å‘è„šæœ¬ã€‚

ğŸ’¡

äºŒè¿›åˆ¶æ¨¡å¼ä»…åœ¨ Stash iOS 2.0.2 ä»¥åŠä¹‹åçš„ç‰ˆæœ¬æ”¯æŒã€‚

## Request Object

* `$request.url`ï¼šè¯·æ±‚ URL
* `$request.method`ï¼šè¯·æ±‚æ–¹æ³•
* `$request.headers`ï¼šè¯·æ±‚å¤´
* `$request.body`ï¼šè¯·æ±‚ä½“ï¼Œä»…åœ¨ `require-body: true` æ—¶æœ‰ï¼Œæ ¹æ®æ˜¯å¦å¼€å¯äºŒè¿›åˆ¶æ¨¡å¼ï¼Œå¯ä»¥ä¸º `string` æˆ–è€… `Uint8Array`

## Response Object

* `$request.url`ï¼šè¯·æ±‚ URL
* `$request.method`ï¼šè¯·æ±‚æ–¹æ³•
* `$request.headers`ï¼šè¯·æ±‚å¤´
* `$response.status`ï¼šå“åº”çŠ¶æ€ç 
* `$response.headers`ï¼šå“åº”å¤´
* `$response.body`ï¼šå“åº”ä½“ï¼Œä»…åœ¨ `require-body: true` æ—¶æœ‰ï¼Œæ ¹æ®æ˜¯å¦å¼€å¯äºŒè¿›åˆ¶æ¨¡å¼ï¼Œå¯ä»¥ä¸º `string` æˆ–è€… `Uint8Array`

## `$done(value)`

âš ï¸

å¯¹äºæ‰€æœ‰è„šæœ¬ï¼Œåœ¨ç»“æŸæ—¶å€™å¿…é¡»è°ƒç”¨ `$done(value)` æ–¹æ³•é‡Šæ”¾èµ„æºã€‚

å¯¹äº request ç±»å‹çš„è„šæœ¬ï¼Œè°ƒç”¨ `$done(object)` å¯ä»¥æ”¹å†™ HTTP è¯·æ±‚ï¼Œ`object` å¯ä»¥åŒ…å«ä¸‹è¿°å­—æ®µï¼š

* `url`ï¼šä¿®æ”¹è¯·æ±‚çš„ URL
* `headers`ï¼šä¿®æ”¹è¯·æ±‚çš„ headers
* `body`ï¼šä¿®æ”¹è¯·æ±‚çš„ body
* `response`ï¼šæ›¿æ¢ HTTP å“åº”ï¼Œä¸å†å®é™…å‘å‡º HTTP è¯·æ±‚

ä½ å¯ä»¥è°ƒç”¨ `$done()` æ¥æ‰“æ–­è¯·æ±‚ï¼Œæˆ–è€… `$done({})` ä¸ä¿®æ”¹è¯·æ±‚çš„ä»»ä½•å†…å®¹ã€‚

å¯¹äº response ç±»å‹çš„è„šæœ¬ï¼Œè°ƒç”¨ `$done(object)` å¯ä»¥æ”¹å†™ HTTP å“åº”ï¼Œ`object` å¯ä»¥åŒ…å«ä¸‹è¿°å­—æ®µï¼š

* `status`ï¼šä¿®æ”¹å“åº”çš„çŠ¶æ€ç 
* `headers`ï¼šä¿®æ”¹å“åº”çš„ headers
* `body`ï¼šä¿®æ”¹å“åº”çš„ body

ä½ å¯ä»¥è°ƒç”¨ `$done()` æ¥æ‰“æ–­è¯·æ±‚ï¼Œæˆ–è€… `$done({})` ä¸ä¿®æ”¹å“åº”çš„ä»»ä½•å†…å®¹ã€‚

Last updated on 2024å¹´4æœˆ6æ—¥

[è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface "è¯­æ³•ä¸æ¥å£")[é¢æ¿ï¼ˆTileï¼‰](/script/tile "é¢æ¿ï¼ˆTileï¼‰")

---

# é¢æ¿ (Tile)

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [é…ç½®æ ¼å¼](#é…ç½®æ ¼å¼)
* [è¯­æ³•ä¸æ¥å£](#è¯­æ³•ä¸æ¥å£)
* [$done(value)](#donevalue)

JavsScript è„šæœ¬

é¢æ¿ï¼ˆTileï¼‰

# é¢æ¿ (Tile)

ç”¨æˆ·å¯ä»¥é€šè¿‡ JavaScript è„šæœ¬æ§åˆ¶ Stash é¦–é¡µçš„ Tile é¢æ¿ã€‚

## é…ç½®æ ¼å¼

```
tiles:
  - name: your-fancy-script
    interval: 600
    title: 'Awesome Tile'
    content: 'This is Super Cool'
    icon: 'theatermasks.circle.fill' # æˆ– https://stash.ws/amazing.png
    backgroundColor: '#663399'

script-providers:
  your-fancy-script:
    url: https://your-fancy-script.com/your-fancy-script.js
    interval: 86400
```

å‚æ•°ï¼š

* `argument`: å¯é€‰ï¼Œè„šæœ¬æ‰§è¡Œæ—¶çš„å‚æ•°ï¼Œç±»å‹ä¸º `string`ã€‚
* `title`: å¯é€‰ï¼Œè„šæœ¬ç¬¬ä¸€æ¬¡è¿è¡Œå‰çš„æ ‡é¢˜é»˜è®¤å€¼ã€‚
* `content`: å¯é€‰ï¼Œè„šæœ¬ç¬¬ä¸€æ¬¡è¿è¡Œå‰çš„å†…å®¹é»˜è®¤å€¼ã€‚
* `icon`: å¯é€‰ï¼Œè„šæœ¬ç¬¬ä¸€æ¬¡è¿è¡Œå‰çš„å›¾æ ‡é»˜è®¤å€¼ã€‚å›¾æ ‡æ”¯æŒ `SF Symbols` æˆ–ä»¥ `http` å¼€å¤´çš„è¿œç¨‹å›¾ç‰‡ã€‚
* `backgroundColor`: å¯é€‰ï¼Œè„šæœ¬ç¬¬ä¸€æ¬¡è¿è¡Œå‰çš„èƒŒæ™¯é¢œè‰²é»˜è®¤å€¼ã€‚
* `url`: å¯é€‰ï¼Œè„šæœ¬ç¬¬ä¸€æ¬¡è¿è¡Œå‰çš„è·³è½¬ URL ã€‚

ä»¥ä¸Šéƒ¨åˆ†å­—æ®µå¯è¢« `$done(object)` è¦†ç›–æ›´æ–°ã€‚

âš ï¸

æ›´å¤šå…³äº `SF Symbols` è¯¦æƒ…è¯·å‚è€ƒ [Apple
Developer (opens in a new tab)](https://developer.apple.com/sf-symbols/) ã€‚

## è¯­æ³•ä¸æ¥å£

è¯·å‚è€ƒ [JavaScript è„šæœ¬è¯­æ³•ä¸æ¥å£](/http-engine/script#%E8%AF%AD%E6%B3%95%E4%B8%8E%E6%8E%A5%E5%8F%A3) ã€‚

ä¾‹å­

```
$httpClient.get('https://api.my-ip.io/ip', function (error, response, data) {
  $done({
    title: 'å½“å‰ IP åœ°å€',
    content: data,
    backgroundColor: '#663399',
    icon: 'network',
  })
})
```

### `$done(value)`

âš ï¸

å¯¹äºæ‰€æœ‰è„šæœ¬ï¼Œåœ¨ç»“æŸæ—¶å€™å¿…é¡»è°ƒç”¨ `$done(value)` æ–¹æ³•é‡Šæ”¾èµ„æºã€‚

å¯¹äº Tile ç±»å‹çš„è„šæœ¬ï¼Œè°ƒç”¨ `$done(object)` å¯ä»¥æ›´æ–° Tile é¢æ¿å†…å®¹ï¼Œ`object` å¯ä»¥åŒ…å«ä¸‹è¿°å­—æ®µï¼š

* `title`: å¯é€‰ï¼Œæ–°çš„ Tile æ ‡é¢˜ã€‚
* `content`: å¯é€‰ï¼Œæ–°çš„ Tile å†…å®¹ã€‚
* `icon`: å¯é€‰ï¼Œæ–°çš„ Tile å›¾æ ‡ã€‚
* `backgroundColor`: å¯é€‰ï¼Œæ–°çš„ Tile èƒŒæ™¯é¢œè‰²ã€‚
* `url`: å¯é€‰ï¼Œæ–°çš„è·³è½¬ URL ã€‚

ä»¥ä¸Šå­—æ®µå¦‚ä¸ºç©ºåˆ™ä¸æ›´æ–°ã€‚ä½ å¯ä»¥ç›´æ¥è°ƒç”¨ `$done({})` ä¸ä¿®æ”¹ä»»ä½•å†…å®¹ã€‚

Last updated on 2023å¹´3æœˆ16æ—¥

[æ”¹å†™ HTTP](/script/rewrite-requests "æ”¹å†™ HTTP")[å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks "å®šæ—¶ä»»åŠ¡")

---

# å®šæ—¶ä»»åŠ¡

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [Script / å®šæ—¶è„šæœ¬](#script--å®šæ—¶è„šæœ¬)

JavsScript è„šæœ¬

å®šæ—¶ä»»åŠ¡

# å®šæ—¶ä»»åŠ¡

Stash å¯ä»¥åœ¨åå°æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œç›®å‰ä»…æ”¯æŒæ‰§è¡Œ JavaScript è„šæœ¬ï¼Œå®šæ—¶ä»»åŠ¡éœ€è¦ä¾èµ– Network Extensionï¼ˆVPNï¼‰ åœ¨å·²è¿æ¥çŠ¶æ€ã€‚

## Script / å®šæ—¶è„šæœ¬

Stash å¯ä»¥åœ¨åå°å®šæ—¶æ‰§è¡Œ JavaScript è„šæœ¬ï¼Œä»¥å®ç°è‡ªåŠ¨åŒ–çš„ä»»åŠ¡ï¼Œæ‰§è¡Œçš„ç»“æœå¯é€šè¿‡ç³»ç»Ÿé€šçŸ¥æˆ–è®°å½•åˆ°æŒä¹…åŒ–å­˜å‚¨ã€‚

JavaScript è„šæœ¬çš„è¯­æ³•å’Œæ¥å£è¯·å‚è€ƒ [JavaScript è„šæœ¬](/http-engine/script)ã€‚

å®šæ—¶è„šæœ¬é€šè¿‡ cron è¡¨è¾¾å¼æŒ‡å®šæ‰§è¡Œæ—¶é—´ã€é—´éš”ï¼Œcron è¡¨è¾¾å¼çš„è¯­æ³•è¯·å‚è€ƒ[è¿™é‡Œ (opens in a new tab)](https://crontab.guru/)ã€‚

```
cron:
  script:
    - name: your-script-name
      cron: '*/5 * * * *' # at every 5th minute
      argument: '{ "key": true }' # optional
      timeout: 10 # optional

    - name: your-script-name
      cron: '0 20 * * *' # at 20:00
      argument: '{ "key": false }' # optional
      timeout: 15 # optional

script-providers:
  your-script-name:
    url: https://example.com/your-script.js
    interval: 86400
```

ğŸ’¡

ä½ å¯ä»¥åœ¨å¤šä¸ªåœºæ™¯å¼•ç”¨åŒä¸€ä¸ªè„šæœ¬ï¼Œå¹¶é€šè¿‡ç¯å¢ƒå˜é‡åˆ¤æ–­äº‹ä»¶æ¥æºï¼ˆå¦‚ HTTP
æ”¹å†™ã€å®šæ—¶ä»»åŠ¡ï¼‰ã€‚

Last updated on 2023å¹´3æœˆ16æ—¥

[é¢æ¿ï¼ˆTileï¼‰](/script/tile "é¢æ¿ï¼ˆTileï¼‰")[å†…ç½® DNS æœåŠ¡](/features/dns-server "å†…ç½® DNS æœåŠ¡")

---

# å†…ç½® DNS æœåŠ¡

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [è‡ªå®šä¹‰ä¸Šæ¸¸ DNS æœåŠ¡å™¨](#è‡ªå®šä¹‰ä¸Šæ¸¸-dns-æœåŠ¡å™¨)
* [åŸºäºåŸŸåçš„è‡ªå®šä¹‰ DNS æœåŠ¡](#åŸºäºåŸŸåçš„è‡ªå®šä¹‰-dns-æœåŠ¡)
* [è‡ªå®šä¹‰ Hosts](#è‡ªå®šä¹‰-hosts)
* [DNS æŸ¥è¯¢è·Ÿéšè§„åˆ™](#dns-æŸ¥è¯¢è·Ÿéšè§„åˆ™)

åŠŸèƒ½ä»‹ç»

å†…ç½® DNS æœåŠ¡

# å†…ç½® DNS æœåŠ¡

## è‡ªå®šä¹‰ä¸Šæ¸¸ DNS æœåŠ¡å™¨

Stash æ”¯æŒåŒæ—¶é…ç½®å¤šä¸ª DNS æœåŠ¡å™¨ã€‚åœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ŒStash ä¼šå¹¶å‘è¯·æ±‚æ‰€æœ‰æœåŠ¡å™¨ï¼Œå¹¶é‡‡ç”¨æœ€å¿«å“åº”çš„ç»“æœã€‚Stash æ”¯æŒä»¥ä¸‹ DNS åè®®ï¼š

* ä½¿ç”¨ç³»ç»Ÿæä¾›çš„ DNSï¼š`system`
* DNS over UDPï¼š`8.8.8.8` æˆ– `udp://8.8.8.8`
* DNS over TCPï¼š`tcp://8.8.8.8`
* [DNS over TLS (opens in a new tab)](https://www.rfc-editor.org/rfc/rfc7858)ï¼š`tls://8.8.8.8:853` æˆ– `dot://8.8.8.8:853`
* [DNS over HTTPS (opens in a new tab)](https://www.rfc-editor.org/rfc/rfc8484)ï¼š`https://1.1.1.1/dns-query` æˆ– `doh://1.1.1.1/dns-query`
* DNS over HTTP/3ï¼š`http3://1.1.1.1/dns-query` æˆ– `doh3://1.1.1.1/dns-query`
* [DNS over QUIC (opens in a new tab)](https://www.rfc-editor.org/rfc/rfc9250)ï¼š`quic://dns.adguard.com:853` æˆ– `doq://dns.adguard.com:853`

`default-nameserver` å°†ç”¨äºè§£æ DNS æœåŠ¡çš„åŸŸåï¼Œä»…æ”¯æŒå¡«å†™ DNS æœåŠ¡å™¨çš„ IP åœ°å€ã€‚

```
dns:
  # ä»¥ä¸‹å¡«å†™çš„ DNS æœåŠ¡å™¨å°†ç”¨äºè§£æ DNS æœåŠ¡çš„åŸŸå
  # ä»…å¡«å†™ DNS æœåŠ¡å™¨çš„ IP åœ°å€
  default-nameserver:
    - 223.5.5.5
    - 114.114.114.114
  # æ”¯æŒ UDP / TCP / DoT / DoH / DoQ åè®®çš„ DNS æœåŠ¡ï¼Œå¯ä»¥æŒ‡æ˜å…·ä½“çš„è¿æ¥ç«¯å£å·ã€‚
  # æ‰€æœ‰ DNS è¯·æ±‚å°†ç›´æ¥å‘é€åˆ°æœåŠ¡å™¨ï¼Œä¸ç»è¿‡ä»»ä½•ä»£ç†ã€‚
  # Stash ä¼šä½¿ç”¨æœ€å…ˆè·å¾—çš„è§£æè®°å½•å›å¤ DNS è¯·æ±‚
  nameserver:
    # ä¸å»ºè®®é…ç½®è¶…è¿‡ 2 ä¸ª DNS æœåŠ¡å™¨ï¼Œä¼šå¢åŠ ç³»ç»ŸåŠŸè€—
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - quic://dns.adguard.com:853
    - doq://test.dns.nextdns.io:853
    - system # ä½¿ç”¨ iOS ç³»ç»Ÿ DNS

  # è·³è¿‡è¯ä¹¦éªŒè¯ï¼Œè§£å†³éƒ¨åˆ†å…¼å®¹æ€§é—®é¢˜ https://help.nextdns.io/t/g9hdkjz
  skip-cert-verify: true

  # DNS æŸ¥è¯¢è·Ÿéšä»£ç†è§„åˆ™
  follow-rule: false
```

Stash ä¼šå¯¹ DNS æŸ¥è¯¢ä½¿ç”¨ LRU ç®—æ³•è¿›è¡Œæœ¬åœ°ç¼“å­˜ã€‚å½“æœ¬åœ°ç¼“å­˜è¿‡æœŸæ—¶ï¼ŒStash ä¼šç»§ç»­æ²¿ç”¨ç¼“å­˜ç»“æœï¼Œå¹¶åœ¨åå°é™é»˜æ›´æ–°è®°å½•ï¼Œè¿™ä¼šæœ‰æ•ˆé™ä½ DNS ç¼“å­˜è¿‡æœŸå¼•å‘çš„è¯·æ±‚å»¶è¿Ÿã€‚

## åŸºäºåŸŸåçš„è‡ªå®šä¹‰ DNS æœåŠ¡

`nameserver-policy` å¯ä»¥å¯¹æŒ‡å®šåŸŸåä½¿ç”¨ç‰¹å®šçš„ DNS æœåŠ¡å™¨ã€‚

```
dns:
  # å¯¹éƒ¨åˆ†åŸŸåä½¿ç”¨å•ç‹¬çš„ DNS æœåŠ¡å™¨
  nameserver-policy:
    'www.baidu.com': 114.114.114.114
    '+.internal.crop.com': system
```

## è‡ªå®šä¹‰ Hosts

```
# æ”¯æŒé€šé…ç¬¦åŸŸå (ä¾‹å¦‚: *.clash.dev, *.foo.*.example.com )
# ä¸ä½¿ç”¨é€šé…ç¬¦çš„åŸŸåä¼˜å…ˆçº§é«˜äºä½¿ç”¨é€šé…ç¬¦çš„åŸŸå (ä¾‹å¦‚: foo.example.com > *.example.com > .example.com )
# æ³¨æ„: +.foo.com çš„æ•ˆæœç­‰åŒäº .foo.com å’Œ foo.com
hosts:
  '*.clash.dev': 127.0.0.1
  '.dev': 127.0.0.1
  'alpha.clash.dev': '::1'
```

## DNS æŸ¥è¯¢è·Ÿéšè§„åˆ™

é»˜è®¤æƒ…å†µä¸‹ï¼ŒStash å‘å‡ºçš„ DNS æŸ¥è¯¢å‡ä¼šç›´æ¥å‡ºç«™ï¼Œè€Œä¸ç»ç”±ä»»ä½•ä»£ç†è§„åˆ™è½¬å‘ã€‚å¼€å¯ `follow-rule` é€‰é¡¹åï¼ŒStash ä¼šæ ¹æ®ä»£ç†è§„åˆ™è¿›è¡Œ DNS æŸ¥è¯¢çš„è½¬å‘ã€‚

âš ï¸

ç»å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œä¸éœ€è¦å¼€å¯æ­¤é…ç½®ã€‚DNS æŸ¥è¯¢ç”±ä»£ç†è½¬å‘åï¼Œå¯èƒ½ä¼šç ´åäº‘æœåŠ¡å•†çš„ CDN å…¨çƒä¼˜åŒ–ç­–ç•¥ï¼Œå¯¼è‡´é™æ€èµ„æºåŠ è½½ç¼“æ…¢ã€‚DNS æŸ¥è¯¢è¯·æ±‚è¿›å…¥ Stash ç½‘ç»œå¼•æ“ï¼Œä¹Ÿä¼šå¯¼è‡´è½»å¾®çš„å»¶è¿Ÿä¸Šå‡ã€‚

è¯·ä»…åœ¨å¿…è¦æ—¶å¼€å¯æ­¤é…ç½®ã€‚

âš ï¸

ç”±äºè¿æ¥ä»£ç†æœåŠ¡å™¨å¯èƒ½éœ€è¦è¿›è¡Œ DNS è§£æï¼ŒDNS æŸ¥è¯¢ç”±ä»£ç†è½¬å‘åï¼Œä¼šå­˜åœ¨é€’å½’æŸ¥è¯¢çš„é—®é¢˜ã€‚å¼€å¯æ­¤é…ç½®å‰è¯·ç¡®ä¿æ»¡è¶³ä»¥ä¸‹å…¶ä¸­ä¸€é¡¹æ¡ä»¶ï¼š

* è½¬å‘ DNS è¯·æ±‚çš„ä»£ç†åœ°å€ä¸º IP åœ°å€ï¼Œè€Œä¸æ˜¯åŸŸå
* DNS æœåŠ¡å™¨åœ°å€ä¸º IP åœ°å€ï¼Œè€Œä¸æ˜¯åŸŸå

Last updated on 2024å¹´8æœˆ4æ—¥

[å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks "å®šæ—¶ä»»åŠ¡")[ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device "ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†")

---

# ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [HTTP ä»£ç†ä¸ SOCKS ä»£ç†](#http-ä»£ç†ä¸-socks-ä»£ç†)
* [é€šè¿‡ä¸ªäººçƒ­ç‚¹æä¾›ä»£ç†](#é€šè¿‡ä¸ªäººçƒ­ç‚¹æä¾›ä»£ç†)
* [Stash tvOS & Stash Mac ç½‘å…³æ¨¡å¼](#stash-tvos--stash-mac-ç½‘å…³æ¨¡å¼)

åŠŸèƒ½ä»‹ç»

ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†

# ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†

Stash iOSã€Stash tvOS ä¸ Stash Mac å‡æ”¯æŒä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†æœåŠ¡ã€‚

* Stash iOS æ”¯æŒæä¾› HTTP ä»£ç†å’Œ SOCKS ä»£ç†
* Stash tvOS å’Œ Stash Mac æ”¯æŒæä¾› HTTP ä»£ç†ã€SOCKS ä»£ç†å’Œé€æ˜ä»£ç†ï¼ˆç½‘å…³æ¨¡å¼ï¼‰

ğŸ’¡

ç½‘å…³æ¨¡å¼å¯ä»¥ä¸ºå±€åŸŸç½‘å†…è®¾å¤‡æä¾›é€æ˜ä»£ç†ï¼Œä¹Ÿå¸¸ç§°ä¸ºæ—è·¯ç”±æˆ–å¢å¼ºæ¨¡å¼ã€‚

## HTTP ä»£ç†ä¸ SOCKS ä»£ç†

Stash iOS ä¸ Stash Mac å‡é»˜è®¤åœ¨ 7890 ç«¯å£æä¾› HTTP ä»£ç†ä¸ SOCKS ä»£ç†æœåŠ¡ã€‚å¼€å¯ã€Œå…è®¸å±€åŸŸç½‘è¿æ¥ã€åï¼Œå±€åŸŸç½‘è®¾å¤‡å¯é€šè¿‡ 7890 ç«¯å£è®¿é—® Stash æä¾›çš„ä»£ç†æœåŠ¡ã€‚

ä¾‹å¦‚å±€åŸŸç½‘å†… IP åœ°å€ä¸º `192.168.1.10` çš„è®¾å¤‡è¿è¡Œç€ Stashï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¸º shell é…ç½®ä»£ç†ï¼š

```
export https_proxy=http://192.168.1.10:7890
export http_proxy=http://192.168.1.10:7890
export all_proxy=socks5h://192.168.1.10:7890
```

## é€šè¿‡ä¸ªäººçƒ­ç‚¹æä¾›ä»£ç†

åœ¨ iPhone/iPad ç­‰è®¾å¤‡å¼€å¯ä¸ªäººçƒ­ç‚¹åï¼Œè¿è¡Œ Stash å¯ä¸ºè¿æ¥è‡³ä¸ªäººçƒ­ç‚¹çš„è®¾å¤‡æä¾› HTTP ä»£ç†æˆ– SOCKS ä»£ç†æœåŠ¡ï¼Œæ­¤åŠŸèƒ½åŒæ ·éœ€è¦å¼€å¯ã€Œå…è®¸å±€åŸŸç½‘è¿æ¥ã€ã€‚

## Stash tvOS & Stash Mac ç½‘å…³æ¨¡å¼

* Stash tvOS ä»…æ”¯æŒåœ¨ [æ”¯æŒ Thread çš„ Apple TV (opens in a new tab)](https://support.apple.com/en-hk/HT210213) ä¸Šå¯ç”¨é€æ˜ä»£ç†
* Stash Mac å¯ç”¨é€æ˜ä»£ç†éœ€è¦å¼€å¯ã€Œå¢å¼ºæ¨¡å¼ã€

å‡è®¾å±€åŸŸç½‘å†… IP åœ°å€ä¸º `192.168.1.10` çš„è®¾å¤‡è¿è¡Œç€ Stashï¼Œä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†éœ€è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š

1. å°†å±€åŸŸç½‘å†…è®¾å¤‡çš„ç½‘å…³é…ç½®ä¸º `192.168.1.10`
2. DNS è®¾ç½®ä¸º `198.18.0.2`
3. ä¿æŒ IP åœ°å€å’Œå­ç½‘æ©ç ä¸å˜

å¯ç”¨ç½‘å…³æ¨¡å¼çš„ Stash å¯ä»£ç† TCP å’Œ UDP æµé‡ï¼Œå¹¶ä¼šç®€å•å“åº” ICMP çš„ Echo Replyã€‚

ğŸ’¡

è‹¥ Apple TV ä¼‘çœ ä¸€æ®µæ—¶é—´åæ—è·¯ç”±æ— å“åº”ï¼Œè¯·æ ¹æ® Apple å®˜æ–¹æŒ‡å¼•æ’æŸ¥ Apple TV
æ˜¯å¦å·²è®¾ç½®ä¸ºå®¶å±…ä¸­æ¢ã€‚

Last updated on 2025å¹´4æœˆ6æ—¥

[å†…ç½® DNS æœåŠ¡](/features/dns-server "å†…ç½® DNS æœåŠ¡")[æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription "æœåŠ¡æä¾›å•†è®¢é˜…")

---

# æœåŠ¡æä¾›å•†è®¢é˜…

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [å®šæ—¶æ›´æ–°é…ç½®](#å®šæ—¶æ›´æ–°é…ç½®)
* [å±•ç¤ºæœåŠ¡ä¿¡æ¯](#å±•ç¤ºæœåŠ¡ä¿¡æ¯)

åŠŸèƒ½ä»‹ç»

æœåŠ¡æä¾›å•†è®¢é˜…

# æœåŠ¡æä¾›å•†è®¢é˜…

Stash æ”¯æŒç”±æœåŠ¡æä¾›å•†ç®¡ç†çš„é…ç½®ï¼Œå¯ä»¥å®šæ—¶æ›´æ–°é…ç½®æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºæœåŠ¡å‰©ä½™æµé‡ã€è¿‡æœŸä¿¡æ¯ã€‚

## å®šæ—¶æ›´æ–°é…ç½®

åœ¨é…ç½®æ–‡ä»¶çš„**é¦–è¡Œ**åŠ å…¥å¦‚ä¸‹æ³¨é‡Šï¼ŒStash ä¼šå°†é…ç½®è®¤å®šä¸ºæœåŠ¡æä¾›å•†ç®¡ç†çš„é…ç½®ï¼Œè¯¥é…ç½®ä¼šå®šæ—¶ä»æŒ‡å®šçš„ URL è·å–æ–°ç‰ˆæœ¬ã€‚ç›®å‰æ£€æŸ¥æ›´æ–°çš„é—´éš”ä¸º 12 å°æ—¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨è®¾ç½®é¡µé¢æ›´æ”¹è¿™ä¸ªé…ç½®ã€‚

```
#SUBSCRIBED https://proxy.service/stash/config
```

## å±•ç¤ºæœåŠ¡ä¿¡æ¯

æœåŠ¡æä¾›å•†å¯ä»¥é€šè¿‡ HTTP Response Header æä¾›æœåŠ¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šä¸Šè¡Œæµé‡ã€ä¸‹è¡Œæµé‡ã€æµé‡æ€»é‡ã€è¿‡æœŸæ—¶é—´ã€‚æ ¼å¼ä¸ºï¼š

```
Subscription-Userinfo: upload=%f; download=%f; total=%f; expire=%f
```

æœåŠ¡ä¿¡æ¯ä¼šè¢« Stash è§£æï¼Œå¹¶åœ¨ App é¦–é¡µæ˜¾ç¤ºã€‚

Stash ä¼šé¦–å…ˆé‡‡ç”¨å®šæ—¶æ›´æ–°é…ç½® URL ä¸­çš„æœåŠ¡ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰å®šæ—¶æ›´æ–° URLï¼Œåˆ™ä¼šä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„ `proxy-providers` ä¸­çš„ `url`ï¼Œè¯¥å­—æ®µå¯ä»¥åœ¨å¯è§†åŒ–ç¼–è¾‘é¡µé¢è®¾ç½®ã€‚

ğŸ’¡

Stash ä¼šä¼˜å…ˆä½¿ç”¨ HEAD æ–¹æ³•è·å–æœåŠ¡ä¿¡æ¯ä»¥é™ä½æµé‡æ¶ˆè€—ã€‚

Last updated on 2023å¹´9æœˆ24æ—¥

[ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device "ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†")[ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance "ç½‘ç»œæ€§èƒ½å¢å¼º")

---

# ç½‘ç»œæ€§èƒ½å¢å¼º

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [å¹¶å‘ DNS æŸ¥è¯¢](#å¹¶å‘-dns-æŸ¥è¯¢)
* [ä¹è§‚ DNS ç¼“å­˜ï¼ˆOptimistic DNSï¼‰](#ä¹è§‚-dns-ç¼“å­˜optimistic-dns)
* [å¹¶å‘è¿æ¥](#å¹¶å‘è¿æ¥)
* [æ··åˆä½¿ç”¨å¤šä¸ªç½‘ç»œ](#æ··åˆä½¿ç”¨å¤šä¸ªç½‘ç»œ)

åŠŸèƒ½ä»‹ç»

ç½‘ç»œæ€§èƒ½å¢å¼º

# ç½‘ç»œæ€§èƒ½å¢å¼º

Stash åœ¨ç½‘ç»œè¿æ¥çš„æ¯ä¸€å±‚é¢è¿›è¡Œäº†æ€§èƒ½ä¼˜åŒ–ï¼Œè‡´åŠ›äºæä¾›ä½å»¶è¿Ÿã€é«˜ååçš„è®¿é—®ä½“éªŒã€‚

ğŸ’¡

éƒ¨åˆ†åŠŸèƒ½éœ€è¦åœ¨ã€Œç½‘ç»œè®¾ç½®ã€ä¸­æ‰‹åŠ¨å¯ç”¨ã€‚

## å¹¶å‘ DNS æŸ¥è¯¢

Stash å…è®¸ç”¨æˆ·é…ç½®å¤šä¸ª DNS æœåŠ¡å™¨ã€‚åœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ŒStash ä¼šå¹¶å‘è¯·æ±‚æ‰€æœ‰æœåŠ¡å™¨ï¼Œå¹¶é‡‡ç”¨æœ€å¿«å“åº”çš„ç»“æœã€‚

## ä¹è§‚ DNS ç¼“å­˜ï¼ˆOptimistic DNSï¼‰

Stash ä½¿ç”¨ LRU ç®—æ³•å¯¹ DNS æŸ¥è¯¢è¿›è¡Œæœ¬åœ°ç¼“å­˜ã€‚å½“æœ¬åœ°ç¼“å­˜è¿‡æœŸæ—¶ï¼ŒStash ä¼šç»§ç»­ä½¿ç”¨ç¼“å­˜ç»“æœï¼Œå¹¶åœ¨åå°é™é»˜æ›´æ–°è®°å½•ï¼Œä»è€Œæœ‰æ•ˆé™ä½å›  DNS ç¼“å­˜è¿‡æœŸå¼•å‘çš„è¯·æ±‚å»¶è¿Ÿã€‚

## å¹¶å‘è¿æ¥

åœ¨åŸŸåæ‹¥æœ‰å¤šä¸ª A / AAAA è®°å½•çš„æƒ…å†µä¸‹ï¼ŒStash ä¼šå¹¶å‘å‘æ‰€æœ‰ IP å‘èµ· TCP è¿æ¥ï¼Œå¹¶é€‰æ‹©æœ€å¿«æ¡æ‰‹æˆåŠŸçš„ç»“æœã€‚è¿™åœ¨è®¿é—® CDN æ—¶ï¼Œå¯ä»¥é¿å…å•èŠ‚ç‚¹å¤±æ•ˆï¼Œæä¾›è¾ƒå¥½çš„è¡¨ç°ã€‚

## æ··åˆä½¿ç”¨å¤šä¸ªç½‘ç»œ

åœ¨ Wi-Fi / èœ‚çªç½‘ç»œï¼ˆCellularï¼‰/ æœ‰çº¿ç½‘ç»œåŒæ—¶å¯ç”¨çš„æƒ…å†µä¸‹ï¼ŒStash ä¼šå°è¯•åŒæ—¶ä½¿ç”¨å¤šä¸ªç½‘ç»œå»ºç«‹è¿æ¥ï¼Œå¹¶é€‰æ‹©æœ€å¿«æ¡æ‰‹æˆåŠŸçš„ç»“æœã€‚æ­¤åŠŸèƒ½å¯ä»¥ä¸ã€Œå¹¶å‘è¿æ¥ã€åŒæ—¶ä½¿ç”¨ï¼Œèƒ½åœ¨å¼±ç½‘å’Œç½‘ç»œåˆ‡æ¢çš„åœºæ™¯ä¸‹é™ä½è¿æ¥è¶…æ—¶çš„æ¦‚ç‡ã€‚

Last updated on 2024å¹´8æœˆ4æ—¥

[æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription "æœåŠ¡æä¾›å•†è®¢é˜…")[æŒ‰éœ€å¯åŠ¨](/features/on-demand "æŒ‰éœ€å¯åŠ¨")

---

# æŒ‰éœ€å¯åŠ¨

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [ä¿æŒ Stash å¼€å¯](#ä¿æŒ-stash-å¼€å¯)
* [æŒ‰éœ€è¿æ¥](#æŒ‰éœ€è¿æ¥)

åŠŸèƒ½ä»‹ç»

æŒ‰éœ€å¯åŠ¨

# æŒ‰éœ€å¯åŠ¨

## ä¿æŒ Stash å¼€å¯

å¯ç”¨æ­¤é€‰é¡¹åï¼ŒStash å°†ä¿æŒæŒç»­è¿è¡ŒçŠ¶æ€ï¼Œæ‚¨åªèƒ½é€šè¿‡ Stash App å†…çš„åœæ­¢æŒ‰é’®æ¥å…³é—­ Stashã€‚

âœ…

å³ä½¿åœ¨ç³»ç»Ÿé‡æ–°å¯åŠ¨åï¼ŒStash ä¹Ÿèƒ½è‡ªåŠ¨å¼€å¯ã€‚

## æŒ‰éœ€è¿æ¥

å¦‚æœæ‚¨å¸Œæœ›åœ¨ç‰¹å®šçš„ç½‘ç»œç¯å¢ƒä¸‹åœç”¨ Stashï¼Œå¯ä»¥é€šè¿‡é…ç½®æŒ‰éœ€è¿æ¥ï¼Œä½¿ Stash åœ¨ä¸åŒçš„æƒ…å†µä¸‹è‡ªåŠ¨å¯åŠ¨æˆ–ç¦ç”¨ã€‚

ä¾‹å¦‚ï¼Œå¯ç”¨æŒ‰éœ€è¿æ¥åï¼Œå…³é—­èœ‚çªæ•°æ®æŒ‰é’®ï¼ŒStash å°†ä¸ä¼šåœ¨èœ‚çªæ•°æ®ç½‘ç»œä¸‹å¯ç”¨ã€‚

æ‚¨è¿˜å¯ä»¥åœ¨æŸäº› Wi-Fi ç½‘ç»œä¸‹åœç”¨ Stashï¼Œä¾‹å¦‚åœ¨åŒ…å«é€æ˜ä»£ç†çš„è·¯ç”±å™¨ç½‘ç»œä¸­ï¼Œä»¥é˜²æ­¢æµé‡è¢«é‡å¤ä»£ç†ã€‚

åªéœ€å°† Wi-Fi çš„ SSID å¡«å…¥æ’é™¤ SSIDs åˆ—è¡¨ä¸­ï¼ŒStash å°†ä¸ä¼šåœ¨è¯¥ SSID çš„ç½‘ç»œä¸‹å¯ç”¨ã€‚

Last updated on 2024å¹´8æœˆ4æ—¥

[ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance "ç½‘ç»œæ€§èƒ½å¢å¼º")[Stash Mac](/stash-mac "Stash Mac")

---

# Stash Mac

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [åŸç”Ÿåº”ç”¨](#åŸç”Ÿåº”ç”¨)
* [åŸºäºè¿›ç¨‹çš„è§„åˆ™](#åŸºäºè¿›ç¨‹çš„è§„åˆ™)
* [ç½‘å…³æ¨¡å¼](#ç½‘å…³æ¨¡å¼)

Stash Mac

# Stash Mac

Stash Mac åŒ…å« iOS ç‰ˆæœ¬çš„æ‰€æœ‰åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œç”±äºä¸“ä¸º macOS å¹³å°è®¾è®¡ï¼ŒStash Mac å°†æ”¯æŒæ¯” iOS ç‰ˆæœ¬æ›´å¤šçš„åŠŸèƒ½ã€‚

## åŸç”Ÿåº”ç”¨

Stash Mac ä¸“ä¸º macOS å¹³å°è®¾è®¡ï¼ŒåŸç”Ÿæ”¯æŒ Intel / Apple Silicon ä¸¤ç§æ¶æ„çš„ Macã€‚æ­¤å¤–ï¼Œæ”¯æŒå¼€æœºå¯åŠ¨ã€èœå•æ å¿«æ·æ“ä½œã€é”®ç›˜å¿«æ·é”®ç­‰ä¸€ç³»åˆ— macOS åŸç”Ÿäº¤äº’ã€‚

## åŸºäºè¿›ç¨‹çš„è§„åˆ™

ç”±äº macOS çš„å¼€æ”¾è®¾è®¡ï¼ŒStash Mac å¯ä»¥ä¸ºè¿›ç¨‹æŒ‡å®šç‹¬ç«‹çš„åˆ†æµè§„åˆ™ã€‚åœ¨ Stash Dashboard ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æ¯ä¸ªæœ¬åœ° TCP / UDP è¿æ¥å¯¹åº”çš„è¿›ç¨‹ä¿¡æ¯ï¼Œç”šè‡³å¯ä»¥åˆ©ç”¨ Stash æ„å»ºæ‚¨ä¸ªäººçš„ç½‘ç»œé˜²ç«å¢™ã€‚

## ç½‘å…³æ¨¡å¼

åœ¨å±€åŸŸç½‘ä¸­æœ‰å¤šä¸ªè®¾å¤‡ï¼ŸStash Mac æ”¯æŒç½‘å…³æ¨¡å¼ï¼Œåªéœ€å°†å±€åŸŸç½‘ä¸­è®¾å¤‡çš„ç½‘å…³æŒ‡å‘è¿è¡Œ Stash å¢å¼ºæ¨¡å¼çš„ macOSï¼Œå³å¯æä¾›æ— ç¼çš„é€æ˜ä»£ç†ä½“éªŒã€‚Stash Mac å·²ç»ä¸ºä½œä¸ºè·¯ç”±ç½‘å…³åšå¥½äº†å……åˆ†å‡†å¤‡ï¼Œ[ç‚¹å‡»è¿™é‡Œäº†è§£æ›´å¤š](/features/provide-proxy-to-lan-device)ã€‚

[æƒ³è¦è´­ä¹°ï¼Ÿç‚¹å‡»è¿™é‡Œäº†è§£ Stash Mac çš„ä»·æ ¼ (opens in a new tab)](https://stash.ws/macos/pricing/)

Last updated on 2024å¹´8æœˆ4æ—¥

[æŒ‰éœ€å¯åŠ¨](/features/on-demand "æŒ‰éœ€å¯åŠ¨")[ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash "ç¼–å†™é«˜æ•ˆé…ç½®")

---

# ç¼–å†™é«˜æ•ˆçš„é…ç½®æ–‡ä»¶

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [é…ç½®åˆç†çš„ DNS æœåŠ¡å™¨](#é…ç½®åˆç†çš„-dns-æœåŠ¡å™¨)
* [ä½¿ç”¨è§„åˆ™é›†åˆ](#ä½¿ç”¨è§„åˆ™é›†åˆ)
* [é€šè¿‡ä»£ç†è½¬å‘æ—¶ç¦ç”¨ QUIC åè®®](#é€šè¿‡ä»£ç†è½¬å‘æ—¶ç¦ç”¨-quic-åè®®)

å¸¸è§é—®é¢˜

ç¼–å†™é«˜æ•ˆé…ç½®

# ç¼–å†™é«˜æ•ˆçš„é…ç½®æ–‡ä»¶

ç”±äº iOS Network Extension åœ¨ iOS 14 é™åˆ¶ä½¿ç”¨ 15 MB å†…å­˜ï¼Œåœ¨ iOS 15+ é™åˆ¶ä½¿ç”¨ 50 MB å†…å­˜ï¼Œä¸åˆç†çš„é…ç½®æ–‡ä»¶å¯èƒ½ä¼šå¯¼è‡´ Stash è¢« iOS å…³é—­ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å»ºè®®ï¼Œå¸®åŠ©æ‚¨ç¼–å†™é«˜æ•ˆçš„é…ç½®æ–‡ä»¶ã€‚

## é…ç½®åˆç†çš„ DNS æœåŠ¡å™¨

Stash ä¼šåŒæ—¶å‘æ‰€æœ‰é…ç½®çš„ DNS æœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ï¼Œå¹¶é€šè¿‡ LRU ç®—æ³•ç¼“å­˜ DNS æŸ¥è¯¢ç»“æœã€‚åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œå»ºè®®é…ç½® 1 åˆ° 2 ä¸ª DNS æœåŠ¡å™¨å³å¯æ»¡è¶³éœ€æ±‚ã€‚

* ä½¿ç”¨ DoHã€DoTã€DoQ åè®®æ¯”ä¼ ç»ŸåŸºäº UDP çš„æŸ¥è¯¢æ›´æ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œä¸”å»¶è¿Ÿé€šå¸¸æ›´é«˜
* Stash ä¼šä½¿ç”¨ Fake IP æ¥é¿å…éœ€è¦ä»£ç†çš„è¯·æ±‚è¿›è¡Œæœ¬åœ° DNS æŸ¥è¯¢ã€‚å¯¹äºä¸­å›½ç”¨æˆ·ï¼Œå»ºè®®ä½¿ç”¨å›½å†… DNS æœåŠ¡å™¨ï¼Œé…ç½® 8.8.8.8 / 1.1.1.1 ç­‰å›½å¤– DNS æœåŠ¡ä¸ä¼šå¸¦æ¥å®é™…æ”¶ç›Š

## ä½¿ç”¨è§„åˆ™é›†åˆ

å¯¹äºå»å¹¿å‘Šã€æŒ‰ IP åœ°ç†ä¿¡æ¯åˆ†æµç­‰éœ€è¦å¤§é‡è§„åˆ™çš„åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨ `domain` æˆ– `ipcidr` ç±»å‹çš„[è§„åˆ™é›†åˆ](/rules/rule-set)ï¼Œè¿™èƒ½æœ‰æ•ˆé™ä½å†…å­˜å ç”¨å¹¶æé«˜åŒ¹é…é€Ÿåº¦ã€‚

âš ï¸

ä¸å»ºè®®ä½¿ç”¨å¤§é‡ `classical`
ç±»å‹çš„è§„åˆ™é›†åˆã€‚æ­¤ç±»è§„åˆ™åªèƒ½è¿›è¡Œé¡ºåºåŒ¹é…ï¼Œä¼šæ˜¾è‘—å¢åŠ åŒ¹é…è€—æ—¶å’Œ Stash
çš„å†…å­˜å ç”¨ã€‚

## é€šè¿‡ä»£ç†è½¬å‘æ—¶ç¦ç”¨ QUIC åè®®

HTTP3/QUIC åè®®åŸºäº UDPï¼Œåœ¨æŸäº›ä»£ç†åè®®ä¸­ UDP è½¬å‘æ•ˆç‡è¾ƒä½ã€‚æ‚¨å¯ä»¥é€šè¿‡ [Script Shortcuts](/rules/rule-types#script) æ¥ç¦ç”¨ QUIC åè®®ï¼š

```
script:
  shortcuts:
    quic: network == 'udp' and dst_port == 443

rules:
  - GEOIP,CN,DIRECT
  - SCRIPT,quic,REJECT
  - MATCH,PROXY
```

Last updated on 2025å¹´4æœˆ6æ—¥

[Stash Mac](/stash-mac "Stash Mac") [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected " é˜²æ­¢ä»£ç†è¢«æ£€æµ‹")

---

# é˜²æ­¢ä»£ç†è¢«æ£€æµ‹

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

å¸¸è§é—®é¢˜

é˜²æ­¢ä»£ç†è¢«æ£€æµ‹

# é˜²æ­¢ä»£ç†è¢«æ£€æµ‹

éƒ¨åˆ†åº”ç”¨ç¨‹åºå¯èƒ½ä¼šæ£€æµ‹ç³»ç»Ÿæ˜¯å¦ä½¿ç”¨ä»£ç†è½¯ä»¶ï¼Œä»è€Œç¦æ­¢ç”¨æˆ·åœ¨ä»£ç†ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚Stash æä¾›äº†ã€Œä»…ä½¿ç”¨ Tunnel ä»£ç†ã€æ¨¡å¼æ¥é˜²æ­¢åº”ç”¨ç¨‹åºæ£€æµ‹ä»£ç†ç¨‹åºï¼Œè¯¥é€‰é¡¹å°†ç¦ç”¨ Stash Proxyï¼Œä½¿å¾—æ‰€æœ‰ HTTP(S) è¯·æ±‚äº¦ä¼šäº¤ç”± Stash Tunnel è¿›è¡Œå¤„ç†ï¼Œä»¥æ”¹å–„å’ŒæŸäº›åº”ç”¨çš„å…¼å®¹æ€§é—®é¢˜ã€‚

1. åœ¨ Stash çš„è®¾ç½®é¡µé¢ï¼Œé€‰æ‹©ã€Œç½‘ç»œè®¾ç½®ã€
2. æ‰“å¼€ã€Œä»…ä½¿ç”¨ Tunnel ä»£ç†ã€

ğŸ’¡

å¼€å¯è¿™ä¸ªé€‰é¡¹ä¼šä½¿å¾— Stash HTTP Engine å¤±æ•ˆ ï¼Œå¯¼è‡´ HTTP
æ”¹å†™åŠŸèƒ½å¤±æ•ˆã€‚é¿å…è¯¥é—®é¢˜ï¼Œè¯·å‚è€ƒ [Force HTTP
Engine](/http-engine/force-http-engine)ã€‚

Last updated on 2023å¹´10æœˆ29æ—¥

[ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash "ç¼–å†™é«˜æ•ˆé…ç½®")[æˆæƒä¸æ¿€æ´»](/faq/license-activation "æˆæƒä¸æ¿€æ´»")

---

# æˆæƒä¸æ¿€æ´»

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [Stash on iOS](#stash-on-ios)
* [ä¸èƒ½é€šè¿‡ TestFlight æ¿€æ´» Stash ï¼Ÿ](#ä¸èƒ½é€šè¿‡-testflight-æ¿€æ´»-stash-)
* [Stash on macOS](#stash-on-macos)
* [Stash å·²æŸåï¼Ÿ](#stash-å·²æŸå)
* [é‡ç½®æ¿€æ´»æ•°é‡](#é‡ç½®æ¿€æ´»æ•°é‡)

å¸¸è§é—®é¢˜

æˆæƒä¸æ¿€æ´»

# æˆæƒä¸æ¿€æ´»

ä¸ºäº†é˜²æ­¢å•†ä¸šåŒ–çš„è´¦å·å…±äº«ç­‰ç›—ç‰ˆè¡Œä¸ºï¼Œç›®å‰ Stash å¯¹æ¯ä¸ªè´­ä¹°å‡­è¯ (License) æœ‰è®¾å¤‡ä½¿ç”¨æ•°é‡é™åˆ¶ã€‚

ğŸ’¡

ä¸ºä¿éšœæ‚¨çš„è´¦æˆ·ä¿¡æ¯å®‰å…¨ï¼Œè®¾å¤‡åˆ—è¡¨å’Œåæ¿€æ´»æŒ‰é’®ä»…é™åœ¨å·²æ¿€æ´»çš„è®¾å¤‡ä¸Šæ˜¾ç¤ºã€‚

## Stash on iOS

åœ¨ iOS App Store é”€å”®çš„æ¯ä¸ª Stash æˆæƒé™åˆ¶æœ€å¤šå¯åœ¨ 6 å°è®¾å¤‡ä¸ŠåŒæ—¶ä½¿ç”¨ï¼ŒåŒ…æ‹¬ iOSã€iPadOSã€macOS (Apple silicon)ã€‚ä½ å¯ä»¥åœ¨ã€Œå·¥å…· - ç³»ç»Ÿä¿¡æ¯ã€(Stash V2) æˆ–ã€Œè®¾ç½® - è¯Šæ–­ã€(Stash V1) æŸ¥çœ‹å·²æ¿€æ´»è®¾å¤‡ï¼Œå¹¶åæ¿€æ´»ä¸å†ä½¿ç”¨çš„è®¾å¤‡ã€‚

### ä¸èƒ½é€šè¿‡ TestFlight æ¿€æ´» Stash ï¼Ÿ

ç”±äº AppStore Receipt è´­ä¹°å‡­è¯ä»…å­˜äºé€šè¿‡å•†åº—ä¸‹è½½çš„ Stash ã€‚å¦‚æ‚¨åœ¨ä½¿ç”¨ TestFlight è¿‡ç¨‹ä¸­è¢«å…¶ä»–è®¾å¤‡åæ¿€æ´»æˆ–è€…å› é•¿æ—¶é—´æ— æ³•è¿æ¥æ¿€æ´»æœåŠ¡å™¨ï¼Œå¯èƒ½ä¼šå‡ºç°æ­¤æç¤ºã€‚

æ‚¨å¯ä»¥é‡æ–°é€šè¿‡ AppStore ä¸‹è½½æ­£å¼ç‰ˆçš„ Stash è¦†ç›–å®‰è£…ï¼Œå³å¯æ¿€æ´»ã€‚æ¿€æ´»æˆåŠŸåï¼Œå¦‚æœ‰éœ€è¦å¯å‡çº§åˆ° TestFlight ç‰ˆæœ¬ç»§ç»­ä½¿ç”¨ã€‚

## Stash on macOS

æ¯ä¸ª Stash Mac ä¸ªäººç‰ˆ (Personal) æœ€å¤šå¯åœ¨ 3 å°è®¾å¤‡ä¸ŠåŒæ—¶ä½¿ç”¨ï¼Œè€Œå®¶åº­ç‰ˆå’Œç»ˆèº«ç‰ˆ (Family & LifeTime) æœ€å¤šå¯åœ¨ 6 å°è®¾å¤‡ä¸ŠåŒæ—¶ä½¿ç”¨ã€‚ä½ å¯ä»¥åœ¨ã€Œæ§åˆ¶é¢æ¿ - è®¾ç½® - æˆæƒã€æŸ¥çœ‹å·²æ¿€æ´»è®¾å¤‡ï¼Œå¹¶åæ¿€æ´»ä¸å†ä½¿ç”¨çš„è®¾å¤‡ã€‚

### Stash å·²æŸåï¼Ÿ

éƒ¨åˆ†æ€æ¯’è½¯ä»¶æˆ–æ¸…ç†è½¯ä»¶å¯èƒ½ä¼šå¯¼è‡´ Stash æ— æ³•æ­£å¸¸è¿è¡Œæˆ–æ¿€æ´»ï¼Œè¯·ç¡®ä¿æ²¡æœ‰ä½¿ç”¨è¿™ä¸€ç±»è½¯ä»¶é˜»æ­¢æˆ–æ¸…ç† Stash Mac ã€‚å¦‚ Stash è¢«æ¸…ç†ï¼Œå¯èƒ½ä¼šå‡ºç°æ­¤æç¤ºã€‚

æ‚¨å¯ä»¥ [ç‚¹å‡»æ­¤å¤„ (opens in a new tab)](https://mac-release-static.stash.ws/Stash-latest.zip) é‡æ–°ä¸‹è½½ Stash Mac è¦†ç›–å®‰è£…ä»¥ä¿®å¤æ­¤é—®é¢˜ã€‚

## é‡ç½®æ¿€æ´»æ•°é‡

å¦‚æœæ‚¨é‡åˆ°ã€Œæ¿€æ´»æœåŠ¡å™¨æ‹’ç»ï¼Œå·²è¾¾åˆ°æœ€å¤§çš„è®¾å¤‡æ•°é‡ã€ä¸”ç¡®è®¤æ¿€æ´»è®¾å¤‡æ•°é‡æ²¡æœ‰è¶…è¿‡é™åˆ¶ï¼Œè¯·å‘é€ç”µå­é‚®ä»¶åˆ° [info@stash.ws](mailto:info@stash.ws) è¯´æ˜æƒ…å†µï¼Œæˆ‘ä»¬ä¼šç¬¬ä¸€æ—¶é—´å¤„ç†ã€‚

Last updated on 2023å¹´8æœˆ3æ—¥

[é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected " é˜²æ­¢ä»£ç†è¢«æ£€æµ‹")[TestFlight ç›¸å…³](/faq/testflight "TestFlight ç›¸å…³")

---

# TestFlight ç›¸å…³é—®é¢˜

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

å¸¸è§é—®é¢˜

TestFlight ç›¸å…³

# TestFlight ç›¸å…³é—®é¢˜

Stash é€šè¿‡åœ¨ TestFlight åˆ†å‘ Beta ç‰ˆæœ¬è¿›è¡Œç°åº¦æµ‹è¯•ã€‚æ‰€æœ‰è´­ä¹°ç”¨æˆ·å‡å¯ç”³è¯·å‚ä¸ TestFlight æµ‹è¯•ã€‚åœ¨ **App Store å®‰è£…çš„ Stash** å†…ï¼Œæ‚¨å¯ä»¥åœ¨ã€Œè®¾ç½® - æ›´å¤šè®¾ç½®ã€ä¸­è¾“å…¥é‚®ç®±ï¼Œå³å¯æ”¶åˆ° TestFlight å‘å‡ºçš„é‚€è¯·ã€‚

ğŸ’¡

åœ¨å®‰è£… TestFlight ç‰ˆæœ¬ä¹‹å‰ï¼Œè¯·åˆ°ã€Œå·¥å…· - ç³»ç»Ÿä¿¡æ¯ã€(Stash V2) æˆ–ã€Œè®¾ç½® -
è¯Šæ–­ã€(Stash V1) ç¡®è®¤å½“å‰è®¾å¤‡æˆæƒçš„æœ‰æ•ˆçŠ¶æ€ã€‚ç”±äº Apple æ²™ç›’çš„é™åˆ¶ï¼Œç›®å‰æ— æ³•åœ¨
TestFlight ç‰ˆæœ¬è¿›è¡Œè®¾å¤‡æ¿€æ´»ã€‚

* ç”±äº Apple çš„é™åˆ¶ï¼ŒTestFlight æœ€å¤šå…è®¸ 10000 ä¸ªè´¦å·å‚ä¸ã€‚Stash Network Ltd. ä¿ç•™ç§»é™¤ä¸æ´»è·ƒè´¦å·çš„æƒåˆ©ã€‚
* ç”³è¯· TestFlight çš„ Apple ID å¯ä»¥ä¸è´­ä¹°è´¦å·ä¸åŒï¼Œä½†æ¯ä¸ªè´­ä¹°è´¦å·åœ¨åŒä¸€æ—¶é—´åªèƒ½æ‹¥æœ‰ä¸€ä¸ª TestFlight åé¢ã€‚é‡å¤ç”³è¯·æ—¶ï¼Œæ—§åé¢ä¼šè¢«ç§»é™¤ã€‚
* ç”±äº Stash å¹¶æ²¡æœ‰åœ¨ä¸­å›½åŒºä¸Šæ¶ï¼Œè¯·ä¸è¦ä½¿ç”¨ä¸­å›½åŒºçš„ Apple ID ç”³è¯· TestFlightã€‚ä½¿ç”¨ä¸­å›½åŒºçš„ Apple ID å¯èƒ½ä¼šé‡åˆ°ã€Œæ‰€è¯·æ±‚çš„ App ä¸å¯ç”¨æˆ–ä¸å­˜åœ¨ã€çš„é—®é¢˜ã€‚
* TestFlight å±äº Betaï¼ˆæµ‹è¯•ï¼‰ç‰ˆæœ¬æ€§è´¨ã€‚åœ¨ä½“éªŒæ–°åŠŸèƒ½çš„åŒæ—¶å¯èƒ½ä¼šå­˜åœ¨ Bug æˆ–è€…ä¸ç¨³å®šæƒ…å†µã€‚è¯·æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µåˆ‡æ¢è‡³ App Store å•†åº—ç‰ˆæˆ– TestFlight æµ‹è¯•ç‰ˆã€‚

Last updated on 2024å¹´8æœˆ4æ—¥

[æˆæƒä¸æ¿€æ´»](/faq/license-activation "æˆæƒä¸æ¿€æ´»")[IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible "IPv6 å…¼å®¹æ€§")

---

# IPv6 å…¼å®¹æ€§

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

å¸¸è§é—®é¢˜

IPv6 å…¼å®¹æ€§

# IPv6 å…¼å®¹æ€§

åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨æ— éœ€æ‰‹åŠ¨å¯ç”¨ IPv6ã€‚Stash ä¼šæ ¹æ® iOS / macOS ç³»ç»Ÿè¿”å›çš„ IPv4 / IPv6 çŠ¶æ€ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä½³çš„è¿æ¥ç­–ç•¥ã€‚å½“ IPv4 / IPv6 éƒ½å¯ç”¨æ—¶ï¼ŒStash ä¼šåŒæ—¶å‘ IPv4 / IPv6 å‘èµ· TCP æ¡æ‰‹ï¼Œå¹¶é€‰æ‹©ç¬¬ä¸€ä¸ªæˆåŠŸæ¡æ‰‹çš„è¿æ¥è¿›è¡Œåç»­æ•°æ®ä¼ è¾“ã€‚

åœ¨ä»£ç†æœåŠ¡å™¨æ”¯æŒ IPv6 çš„æƒ…å†µä¸‹ï¼Œç”±äº Stash ä½¿ç”¨ Fake IP æœºåˆ¶ï¼Œé€šå¸¸ä¼šå°½å¯èƒ½åœ°å‘ä»£ç†æœåŠ¡å™¨è½¬å‘åŸŸåè€Œä¸æ˜¯ IP è¯·æ±‚ã€‚æ­¤æ—¶ IPv4 / IPv6 çš„é€‰æ‹©å–å†³äºä»£ç†æœåŠ¡å™¨ã€‚

ç”±äº Fake IP æœºåˆ¶çš„å­˜åœ¨ï¼ŒStash Tunnel çš„å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¼šæ¥å— Fake IP çš„è·¯ç”±ï¼Œå¹¶ç”± Stash å°† Fake IP åæŸ¥åŸŸåï¼Œ**Stash Tunnel é»˜è®¤ä»…å¯ç”¨ IPv4**ã€‚å¯¹äºå¤§å¤šæ•° HTTP(S) è¯·æ±‚ï¼Œå³ä½¿ç›´æ¥è¾“å…¥ IPv6 åœ°å€ï¼Œç”±äºå­˜åœ¨ HTTP ä»£ç†ï¼Œè¯·æ±‚å¹¶ä¸ä¼šç»è¿‡ Stash Tunnelã€‚åœ¨ä¸Šè¿°ä¸¤ç§æœºåˆ¶ä¸‹ï¼ŒStash é»˜è®¤æ”¯æŒï¼š

* é€šè¿‡åŸŸåè®¿é—®ä»…æ”¯æŒ IPv6 çš„æœåŠ¡å™¨
* ç›´æ¥é€šè¿‡ IP è®¿é—®ä»…æ”¯æŒ IPv6 çš„ç½‘ç«™

å¯¹äºç›´æ¥é€šè¿‡ IPv6 è®¿é—®ä¸”ç»ç”± Stash Tunnel çš„æƒ…å†µï¼ˆå¦‚ SSHã€FTP ç­‰ï¼‰ï¼Œéœ€è¦å¼€å¯ã€Œç½‘ç»œè®¾ç½® - å¯ç”¨ Tunnel IPv6 è·¯ç”±ã€ã€‚**è¯·æ³¨æ„ï¼Œåœ¨ç½‘ç»œç¯å¢ƒä¸æ”¯æŒ IPv6 çš„æƒ…å†µä¸‹å¼€å¯è¯¥åŠŸèƒ½ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¼å®¹æ€§é—®é¢˜ã€‚**

Last updated on 2024å¹´8æœˆ4æ—¥

[TestFlight ç›¸å…³](/faq/testflight "TestFlight ç›¸å…³")[URL Schema](/faq/url-schema "URL Schema")

---

# URL Schema

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [link.stash.ws](#linkstashws)
* [å¯¼å…¥é…ç½®æ–‡ä»¶](#å¯¼å…¥é…ç½®æ–‡ä»¶)
* [å¯¼å…¥è¿œç¨‹è¦†å†™](#å¯¼å…¥è¿œç¨‹è¦†å†™)
* [å¯¼å…¥å›¾æ ‡é›†](#å¯¼å…¥å›¾æ ‡é›†)
* [å¼€å…³ Stash](#å¼€å…³-stash)
* [å¼€å¯ Stash](#å¼€å¯-stash)
* [å…³é—­ Stash](#å…³é—­-stash)
* [åˆ‡æ¢å¼€å…³](#åˆ‡æ¢å¼€å…³)

å¸¸è§é—®é¢˜

URL Schema

# URL Schema

Stash æ”¯æŒä½¿ç”¨ URL Schema `stash://` å’Œ `clash://` æ¥æ§åˆ¶ Stashï¼Œ åŒ…å«çš„ URL **éœ€è¦ Encode ã€‚**

### link.stash.ws

é™¤äº†ä¸Šè¿°çš„ URL Schema ä¹‹å¤–ï¼ŒStash è¿˜æ”¯æŒä½¿ç”¨ `https://link.stash.ws` æ ‡å‡† URL æ¥æ§åˆ¶ï¼Œæ ¼å¼ä¸º `https://link.stash.ws/command/url`ï¼ŒåŒ…å«çš„ URL **ä¸å« Schema ä¸”æ— éœ€ Encode ã€‚**

ä»¥ä¸€é”®å®‰è£… BoxJS ä¸ºä¾‹ï¼Œ

åŸ URLï¼š`https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.stash.stoverride`

ä¸€é”®å®‰è£… URLï¼š`https://link.stash.ws/install-override/raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.stash.stoverride`

ğŸ’¡

é»˜è®¤çš„è¿œç¨‹ URL Schema ä¸º HTTPS ï¼Œå¦‚éœ€ä½¿ç”¨ HTTP ï¼Œè¯·åŠ ä¸Šå‚æ•° `?scheme=http`ã€‚

ğŸ’¡

å¦‚è¿œç¨‹ URL æ— æ³•è®¿é—®ï¼Œé“¾æ¥å°†è¿”å› `404`ã€‚

## å¯¼å…¥é…ç½®æ–‡ä»¶

* `stash://install-config?url=${url-encoded}`
* `clash://install-config?url=${url-encoded}`
* `https://link.stash.ws/install-config/example.com/stash.yaml`

## å¯¼å…¥è¿œç¨‹è¦†å†™

* `stash://install-override?url=${url-encoded}`
* `clash://install-override?url=${url-encoded}`
* `https://link.stash.ws/install-override/example.com/stash.stoverride`

## å¯¼å…¥å›¾æ ‡é›†

* `stash://install-icon-set?url=${url-encoded}`
* `clash://install-icon-set?url=${url-encoded}`
* `https://link.stash.ws/install-icon-set/example.com/stash.json`

## å¼€å…³ Stash

### å¼€å¯ Stash

* `stash://start`
* `clash://start`
* `https://link.stash.ws/start`

### å…³é—­ Stash

* `stash://stop`
* `clash://stop`
* `https://link.stash.ws/stop`

### åˆ‡æ¢å¼€å…³

* `stash://toggle`
* `clash://toggle`
* `https://link.stash.ws/toggle`

Last updated on 2023å¹´6æœˆ3æ—¥

[IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible "IPv6 å…¼å®¹æ€§")[è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit "è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶")

---

# è¶Šç‹± iOS ç³»ç»Ÿå†…å­˜é™åˆ¶ä¿®æ”¹

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

å¸¸è§é—®é¢˜

è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶

# è¶Šç‹± iOS ç³»ç»Ÿå†…å­˜é™åˆ¶ä¿®æ”¹

Jetsam åœ¨ iOS ä¸­è´Ÿè´£ç›‘æ§å†…å­˜å¹¶è¿›è¡Œ OOM killã€‚åœ¨ç³»ç»Ÿé»˜è®¤é…ç½®ä¸­ï¼Œä¸åŒç±»å‹çš„è¿›ç¨‹æœ‰ä¸åŒçš„å†…å­˜é™åˆ¶ã€‚åœ¨ iOS 14 åŠä¹‹å‰çš„ç³»ç»Ÿä¸­ï¼ŒNetwork Extension çš„å†…å­˜é™åˆ¶ä¸º 15 MBï¼›è€Œåœ¨ iOS 15 åŠä»¥åï¼ŒNetwork Extension çš„å†…å­˜é™åˆ¶å¢åŠ åˆ°äº† 50 MBã€‚

å¯¹äºè¶Šç‹±ç”¨æˆ·ï¼Œå¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼ä»¥å…è®¸ Network Extension ä½¿ç”¨æ›´å¤šå†…å­˜ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶å­˜æ”¾åœ¨ `/System/Library/LaunchDaemons/com.apple.jetsamproperties.{Model}.plist`ã€‚

æ‰“å¼€ä»»æ„ä¸€ä¸ªæ–‡ä»¶åæœç´¢ `com.apple.networkextension.packet-tunnel` è¿™ä¸ªé”®å³å¯æ‰¾åˆ° Network Extension çš„é™åˆ¶ã€‚å»ºè®®å°†å…¶ä¿®æ”¹ä¸º 50 åˆ° 100 ä¹‹é—´çš„ä»»æ„æ•°å€¼ã€‚`ActiveHardMemoryLimit` å’Œ `InactiveHardMemoryLimit` éƒ½éœ€è¦ä¿®æ”¹ã€‚

```
<key>com.apple.networkextension.packet-tunnel</key>
<dict>
    <key>ActiveHardMemoryLimit</key>
    <integer>50</integer>
    <key>InactiveHardMemoryLimit</key>
    <integer>50</integer>
    <key>JetsamPriority</key>
    <integer>14</integer>
</dict>
```

* åœ¨æ“ä½œå‰åŠ¡å¿…å¤‡ä»½æ•°æ®ã€‚
* ä¸åŒæ‰‹æœºçš„ Model å¯èƒ½å„ä¸ç›¸åŒï¼Œä¹Ÿå¯èƒ½å­˜åœ¨å¤šä¸ªç±»ä¼¼æ–‡ä»¶ï¼Œå¦‚æœä¸ç¡®å®šæœ¬æœºåŒ¹é…çš„ Modelï¼Œå¯ä»¥å°è¯•ä¿®æ”¹æ‰€æœ‰ç›¸å…³æ–‡ä»¶ã€‚
* ä¿®æ”¹åï¼Œéœ€é‡å¯ iOS ç³»ç»Ÿæ‰èƒ½ç”Ÿæ•ˆã€‚

æ‚¨å¯ä»¥åœ¨ [github.com/eycorsican/jetsamproperties (opens in a new tab)](https://github.com/eycorsican/jetsamproperties) é¡¹ç›®ä¸­è·å–æ›´å¤šä¿¡æ¯ã€‚

Last updated on 2024å¹´8æœˆ4æ—¥

[URL Schema](/faq/url-schema "URL Schema")[æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper "æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)")

---

# æ— æ³•å®‰è£… Stash Mac å¸®åŠ©ç¨‹åº (Helper)

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

On This Page

* [macOS 13 Ventura](#macos-13-ventura)
* [ä¿®å¤æ­¥éª¤](#ä¿®å¤æ­¥éª¤)

å¸¸è§é—®é¢˜

æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)

# æ— æ³•å®‰è£… Stash Mac å¸®åŠ©ç¨‹åº (Helper)

éƒ¨åˆ†ç”¨æˆ·å¯èƒ½ä¼šé‡åˆ°åå¤æç¤ºéœ€è¦å®‰è£…å¸®åŠ©ç¨‹åº (Helper) çš„æƒ…å†µã€‚Stash éœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æƒé™å®‰è£…ä¸€ä¸ªå¸®åŠ©ç¨‹åºï¼Œå¦åˆ™ Stash å°†æ— æ³•è®¾ç½®ç³»ç»Ÿä»£ç†ã€‚

âš ï¸

éƒ¨åˆ†æ€æ¯’è½¯ä»¶æˆ–æ¸…ç†è½¯ä»¶å¯èƒ½ä¼šå¯¼è‡´ Stash Helper
æ— æ³•æ­£å¸¸è¿è¡Œï¼Œè¯·ç¡®ä¿æ²¡æœ‰ä½¿ç”¨è¿™ä¸€ç±»è½¯ä»¶é˜»æ­¢æˆ–æ¸…ç† Stash Mac ã€‚

## macOS 13 Ventura

åœ¨ macOS 13 è‹¹æœå¼•å…¥äº†æ–°çš„åå°æƒé™ç®¡ç†ï¼Œå¦‚é”™è¯¯é…ç½®æ­¤é¡¹ä¼šå¼•èµ· Stash Helper æ— æ³•æ­£å¸¸è¿è¡Œã€‚

* åœ¨ Mac çš„ã€Œç³»ç»Ÿè®¾ç½®ã€ - ã€Œé€šç”¨ã€ - ã€Œç™»é™†é¡¹ã€ - ã€Œå…è®¸åœ¨åå°ã€ï¼Œè¯·ç¡®ä¿ `Stash` æˆ– `Stash Networks Limited` ç­‰å¼€å…³ä¸ºå¯ç”¨çŠ¶æ€ã€‚

## ä¿®å¤æ­¥éª¤

å¦‚æ‰§è¡Œä¸Šè¿°æ“ä½œåä¾ç„¶æ— æ³•å®‰è£… Stash Helper ï¼Œè¯·å°è¯•å‚ç…§ä»¥ä¸‹æ­¥éª¤ä¿®å¤ï¼š

1. æ‰“å¼€ç»ˆç«¯ (Terminal)ã€‚
2. è¿è¡Œä»¥ä¸‹å‘½ä»¤ç§»é™¤ Helper ï¼ˆéœ€è¾“å…¥ç³»ç»Ÿå¯†ç å¹¶æŒ‰å›è½¦é”®ï¼‰ã€‚

```
sudo rm -rf /Library/PrivilegedHelperTools/ws.stash.app.mac.daemon.helper
```

3. è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯ç”¨ Helper ï¼ˆéœ€è¾“å…¥ç³»ç»Ÿå¯†ç å¹¶æŒ‰å›è½¦é”®ï¼‰ã€‚

```
sudo /bin/launchctl load -w /Library/LaunchDaemons/ws.stash.app.mac.daemon.helper.plist
```

å¦‚æç¤º `service already loaded` æˆ– `Operation already in progress` ï¼Œæ— éœ€ç†ä¼šã€‚

4. é‡å¯ç”µè„‘ã€‚
5. æ‰“å¼€ Stash ï¼Œé‡æ–°å®‰è£…å¸®åŠ©ç¨‹åºï¼ˆéœ€è¾“å…¥ç³»ç»Ÿå¯†ç ï¼‰ã€‚

è‡³æ­¤ï¼Œæ‚¨çš„ Stash Helper å·²ä¿®å¤ã€‚å¦‚æœä»ç„¶ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œè¯·ä¸ [info@stash.ws](mailto:info@stash.ws) è”ç³»ã€‚

Last updated on 2023å¹´8æœˆ1æ—¥

[è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit "è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶")[Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn "Stash ä¸å…¶ä»– VPN å†²çª")

---

# Stash ä¸å…¶ä»– VPN çš„å†²çªè§£å†³æ–¹æ³•

[Stash ç”¨æˆ·æ–‡æ¡£æ˜“ç”¨ä¸”å¼ºåŠ²çš„ç½‘ç»œå·¥å…·](/)

* [Stash ç®€ä»‹](/)
* [å¿«é€Ÿä¸Šæ‰‹](/get-started)
* æ›´æ–°æ—¥å¿—

  + [iOS](/release-notes/ios)
* åˆ†æµè§„åˆ™

  + [è§„åˆ™ç±»å‹](/rules/rule-types)
  + [è§„åˆ™é›†åˆ](/rules/rule-set)
* ä»£ç†åè®®

  + [åè®®ç±»å‹](/proxy-protocols/proxy-types)
  + [ç­–ç•¥ç»„](/proxy-protocols/proxy-groups)
  + [è¿œç¨‹ä»£ç†é›†](/proxy-protocols/proxy-providers)
  + [å»¶è¿Ÿæµ‹è¯•](/proxy-protocols/proxy-benchmark)
* é…ç½®æ–‡ä»¶

  + [é…ç½®æ ·ä¾‹](/configuration/example-config)
  + [è¦†å†™é…ç½®ï¼ˆOverrideï¼‰](/configuration/override)
  + [ç­–ç•¥ç»„å›¾æ ‡](/configuration/proxy-group-icon)
* HTTP å¼•æ“

  + [ç®€ä»‹](/http-engine/intro)
  + [MitM](/http-engine/mitm)
  + [å¼ºåˆ¶ HTTP å¼•æ“](/http-engine/force-http-engine)
  + [HTTP é‡å†™](/http-engine/rewrite)
* JavsScript è„šæœ¬

  + [è¯­æ³•ä¸æ¥å£](/script/syntax-and-interface)
  + [æ”¹å†™ HTTP](/script/rewrite-requests)
  + [é¢æ¿ï¼ˆTileï¼‰](/script/tile)
  + [å®šæ—¶ä»»åŠ¡](/script/scheduled-tasks)
* åŠŸèƒ½ä»‹ç»

  + [å†…ç½® DNS æœåŠ¡](/features/dns-server)
  + [ä¸ºå±€åŸŸç½‘è®¾å¤‡æä¾›ä»£ç†](/features/provide-proxy-to-lan-device)
  + [æœåŠ¡æä¾›å•†è®¢é˜…](/features/service-provider-subscription)
  + [ç½‘ç»œæ€§èƒ½å¢å¼º](/features/network-performance-enhance)
  + [æŒ‰éœ€å¯åŠ¨](/features/on-demand)
* [Stash Mac](/stash-mac)
* å¸¸è§é—®é¢˜

  + [ç¼–å†™é«˜æ•ˆé…ç½®](/faq/effective-stash)
  + [é˜²æ­¢ä»£ç†è¢«æ£€æµ‹](/faq/proxy-detected)
  + [æˆæƒä¸æ¿€æ´»](/faq/license-activation)
  + [TestFlight ç›¸å…³](/faq/testflight)
  + [IPv6 å…¼å®¹æ€§](/faq/ipv6-compatible)
  + [URL Schema](/faq/url-schema)
  + [è¶Šç‹±ä¿®æ”¹å†…å­˜é™åˆ¶](/faq/jailbreak-ios-memory-limit)
  + [æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper)
  + [Stash ä¸å…¶ä»– VPN å†²çª](/faq/conflict-with-vpn)

å¸¸è§é—®é¢˜

Stash ä¸å…¶ä»– VPN å†²çª

# Stash ä¸å…¶ä»– VPN çš„å†²çªè§£å†³æ–¹æ³•

ä¸ºé¿å… Stash ä¸å…¶ä»– VPN ä¹‹é—´å‘ç”Ÿå†²çªï¼Œæ‚¨å¯ä»¥é€šè¿‡ç»‘å®šç½‘å¡çš„æ–¹å¼è¿›è¡Œè®¾ç½®ã€‚è¯·[å‚è€ƒæ­¤å¤„](/proxy-protocols/proxy-types#direct-with-specified-interface)ã€‚

Last updated on 2024å¹´8æœˆ4æ—¥

[æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)](/faq/stash-mac-helper "æ— æ³•å®‰è£…å¸®åŠ©ç¨‹åº (Helper)")

---

