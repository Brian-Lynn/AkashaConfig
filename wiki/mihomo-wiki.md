# è™šç©ºç»ˆç«¯ Docs æ–‡æ¡£ç›®å½• (ZH)
- [ç®€ä»‹](#ç®€ä»‹)- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)- [ä½¿ç”¨é¢„ç¼–è¯‘äºŒè¿›åˆ¶](#ä½¿ç”¨é¢„ç¼–è¯‘äºŒè¿›åˆ¶)- [å®¢æˆ·ç«¯](#å®¢æˆ·ç«¯)- [webé¢æ¿](#webé¢æ¿)- [åˆ›å»ºè¿è¡ŒæœåŠ¡](#åˆ›å»ºè¿è¡ŒæœåŠ¡)- [ä¸‰æ–¹å·¥å…·/å®¢æˆ·ç«¯](#ä¸‰æ–¹å·¥å…·å®¢æˆ·ç«¯)- [ç”»é¥¼](#ç”»é¥¼)- [è¯­æ³•](#è¯­æ³•)- [å¿«æ·é…ç½®](#å¿«æ·é…ç½®)- [é…ç½®](#é…ç½®)- [å…¨å±€é…ç½®](#å…¨å±€é…ç½®)- [DNSé…ç½®](#dnsé…ç½®)- [DNSç±»å‹](#dnsç±»å‹)- [hosts](#hosts)- [è§£ææµç¨‹](#è§£ææµç¨‹)- [åŸŸåå—…æ¢](#åŸŸåå—…æ¢)- [å…¥ç«™é…ç½®](#å…¥ç«™é…ç½®)- [ä»£ç†ç«¯å£](#ä»£ç†ç«¯å£)- [TUN](#tun)- [é€šç”¨å­—æ®µ](#é€šç”¨å­—æ®µ)- [HTTP](#http)- [SOCKS](#socks)- [MIXED](#mixed)- [REDIRECT](#redirect)- [TPROXY](#tproxy)- [TUN](#tun)- [ShadowSocks](#shadowsocks)- [VMESS](#vmess)- [VLESS](#vless)- [Trojan](#trojan)- [AnyTLS](#anytls)- [TUIC v4](#tuic-v4)- [TUIC v5](#tuic-v5)- [Hysteria2](#hysteria2)- [TUNNEL](#tunnel)- [é€šç”¨å­—æ®µ](#é€šç”¨å­—æ®µ)- [TLSé…ç½®](#tlsé…ç½®)- [ä¼ è¾“å±‚é…ç½®](#ä¼ è¾“å±‚é…ç½®)- [dialer-proxy](#dialer-proxy)- [å†…ç½®ä»£ç†ç­–ç•¥](#å†…ç½®ä»£ç†ç­–ç•¥)- [DIRECT](#direct)- [DNS](#dns)- [HTTP](#http)- [SOCKS](#socks)- [Shadowsocks](#shadowsocks)- [ShadowsocksR](#shadowsocksr)- [Mieru](#mieru)- [Snell](#snell)- [VMess](#vmess)- [VLESS](#vless)- [Trojan](#trojan)- [AnyTLS](#anytls)- [Hysteria](#hysteria)- [Hysteria2](#hysteria2)- [TUIC](#tuic)- [WireGuard](#wireguard)- [SSH](#ssh)- [ä»£ç†é›†åˆé…ç½®](#ä»£ç†é›†åˆé…ç½®)- [ä»£ç†é›†åˆå†…å®¹](#ä»£ç†é›†åˆå†…å®¹)- [ä»£ç†ç»„é…ç½®](#ä»£ç†ç»„é…ç½®)- [å†…ç½®ä»£ç†ç»„](#å†…ç½®ä»£ç†ç»„)- [æ‰‹åŠ¨é€‰æ‹©](#æ‰‹åŠ¨é€‰æ‹©)- [è‡ªåŠ¨é€‰æ‹©](#è‡ªåŠ¨é€‰æ‹©)- [è‡ªåŠ¨å›é€€](#è‡ªåŠ¨å›é€€)- [è´Ÿè½½å‡è¡¡](#è´Ÿè½½å‡è¡¡)- [é“¾å¼ä»£ç†](#é“¾å¼ä»£ç†)- [è·¯ç”±è§„åˆ™](#è·¯ç”±è§„åˆ™)- [è§„åˆ™é›†åˆ](#è§„åˆ™é›†åˆ)- [è§„åˆ™é›†åˆå†…å®¹](#è§„åˆ™é›†åˆå†…å®¹)- [å­è§„åˆ™](#å­è§„åˆ™)- [æµé‡éš§é“](#æµé‡éš§é“)- [NTP](#ntp)- [å®éªŒæ€§é…ç½®](#å®éªŒæ€§é…ç½®)- [APIs](#apis)
---
# ç®€ä»‹
[**è™šç©ºç»ˆç«¯**](https://github.com/MetaCubeX/mihomo/tree/Meta) **æ˜¯ä¸€ä¸ªåŸºäºå¼€æºé¡¹ç›®** [**åŸç¥**](https://www.yuanshen.com/) **çš„äºŒæ¬¡å¼€å‘ç‰ˆæœ¬ï¼Œå¢åŠ äº†ä¸€äº›ç‹¬æœ‰ç‰¹æ€§**,[æœ¬æ–‡æ¡£](https://github.com/MetaCubeX/Meta-Docs/)ä»åœ¨ä¿®è®¢ä¸­ï¼Œæ¬¢è¿ PRã€‚
**ä½¿ç”¨ è™šç©ºç»ˆç«¯ å‰ï¼Œè¯·æ‚‰çŸ¥ï¼š**
* **ä»»ä½•ä¸ [MetaCubeX](https://github.com/MetaCubeX) æ— å…³çš„ä¸‹æ¸¸é¡¹ç›®åç§°ä¸­ä¸å¾—åŒ…å«mihomoä¸€è¯ã€‚**
* æœ¬ Wiki ä¸»è¦ä»‹ç» è™šç©ºç»ˆç«¯ çš„ç‰¹è‰²åŠŸèƒ½ï¼ŒåŸç¥ ç‰¹æ€§è¯·æŸ¥çœ‹ [**åŸç¥ Wiki**](https://wiki.biligame.com/ys/%E9%A6%96%E9%A1%B5)
* æœ¬ Wiki åŸºäºæœ€æ–°çš„ [**è™šç©ºç»ˆç«¯**](https://github.com/MetaCubeX/mihomo/tree/Alpha) åˆ†æ”¯ä»‹ç»ï¼Œå¦‚æœæ‚¨çš„ è™šç©ºç»ˆç«¯ ä½äºæ­¤ç‰ˆæœ¬ï¼Œå¯èƒ½ä¼šæœ‰éƒ¨åˆ†åŠŸèƒ½ä¸æ”¯æŒï¼›
* è™šç©ºç»ˆç«¯ æ”¯æŒåŸç¥çš„å…¨éƒ¨ç‰¹æ€§ï¼Œæ”¯æŒ åŸç¥ Premium æ ¸å¿ƒéƒ¨åˆ†ç‰¹æ€§ã€‚
---
# å¸¸è§é—®é¢˜
(æ­¤éƒ¨åˆ†å†…å®¹ 'å¸¸è§é—®é¢˜' å·²è¢«ç”¨æˆ·é€‰æ‹©ç²¾ç®€)
---
# ä½¿ç”¨é¢„ç¼–è¯‘äºŒè¿›åˆ¶
ä¸ºäº†å¼€å§‹ä½¿ç”¨ mihomo, ä½ å¯ä»¥ä»ä»¥ä¸‹å®‰è£…æ–¹å¼ä¸­é€‰æ‹©ä¸€ä¸ªä¸ºå½“å‰ç³»ç»Ÿå®‰è£… mihomo
## ä½¿ç”¨é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶
è¯·åœ¨ä¸‹æ–¹é€‰æ‹©ä¸‹è½½å¸¸è§çš„æ“ä½œç³»ç»Ÿå¯¹åº”çš„äºŒè¿›åˆ¶æ–‡ä»¶
=== "Windows"
    === "amd64/x86_64"
        <div class="download-list" data-keyword="windows-amd64" data-suffix="zip"><ul>åŠ è½½ä¸­...</ul></div>
    === "386/x86_32"
        <div class="download-list" data-keyword="windows-386" data-suffix="zip"><ul>åŠ è½½ä¸­...</ul></div>
    === "arm64/armv8"
        <div class="download-list" data-keyword="windows-arm64" data-suffix="zip"><ul>åŠ è½½ä¸­...</ul></div>
    === "armv7"
        <div class="download-list" data-keyword="windows-armv7" data-suffix="zip"><ul>åŠ è½½ä¸­...</ul></div>
=== "Linux"
    === "äºŒè¿›åˆ¶å‹ç¼©åŒ…"
        === "amd64/x86_64"
            <div class="download-list" data-keyword="linux-amd64"data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
        === "386/x86_32"
            <div class="download-list" data-keyword="linux-386"data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
        === "arm64/armv8"
            <div class="download-list" data-keyword="linux-arm64"data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
        === "armv7"
            <div class="download-list" data-keyword="linux-armv7"data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
        === "riscv64"
            <div class="download-list" data-keyword="linux-riscv64"data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
        === "loong64"
            <div class="download-list" data-keyword="linux-loong64"data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
        === "s390x"
            <div class="download-list" data-keyword="linux-s390x"data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
        === "mips"
            <div class="download-list" data-keyword="linux-mips"data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
    === "Debian / DEB"
        === "amd64/x86_64"
            <div class="download-list" data-keyword="linux-amd64"data-suffix="deb"><ul>åŠ è½½ä¸­...</ul></div>
        === "386/x86_32"
            <div class="download-list" data-keyword="linux-386"data-suffix="deb"><ul>åŠ è½½ä¸­...</ul></div>
        === "arm64/armv8"
            <div class="download-list" data-keyword="linux-arm64"data-suffix="deb"><ul>åŠ è½½ä¸­...</ul></div>
        === "armv7"
            <div class="download-list" data-keyword="linux-armv7"data-suffix="deb"><ul>åŠ è½½ä¸­...</ul></div>
        === "riscv64"
            <div class="download-list" data-keyword="linux-riscv64"data-suffix="deb"><ul>åŠ è½½ä¸­...</ul></div>
        === "loong64"
            <div class="download-list" data-keyword="linux-loong64"data-suffix="deb"><ul>åŠ è½½ä¸­...</ul></div>
        === "s390x"
            <div class="download-list" data-keyword="linux-s390x"data-suffix="deb"><ul>åŠ è½½ä¸­...</ul></div>
    === "Redhat / RPM"
        === "amd64/x86_64"
            <div class="download-list" data-keyword="linux-amd64"data-suffix="rpm"><ul>åŠ è½½ä¸­...</ul></div>
        === "386/x86_32"
            <div class="download-list" data-keyword="linux-386"data-suffix="rpm"><ul>åŠ è½½ä¸­...</ul></div>
        === "arm64/armv8"
            <div class="download-list" data-keyword="linux-arm64"data-suffix="rpm"><ul>åŠ è½½ä¸­...</ul></div>
        === "armv7"
            <div class="download-list" data-keyword="linux-armv7"data-suffix="rpm"><ul>åŠ è½½ä¸­...</ul></div>
        === "riscv64"
            <div class="download-list" data-keyword="linux-riscv64"data-suffix="rpm"><ul>åŠ è½½ä¸­...</ul></div>
        === "loong64"
            <div class="download-list" data-keyword="linux-loong64"data-suffix="rpm"><ul>åŠ è½½ä¸­...</ul></div>
        === "s390x"
            <div class="download-list" data-keyword="linux-s390x"data-suffix="rpm"><ul>åŠ è½½ä¸­...</ul></div>
    === "Archlinux / PKG"
        === "amd64/x86_64"
            <div class="download-list" data-keyword="linux-amd64"data-suffix="pkg.tar.zst"><ul>åŠ è½½ä¸­...</ul></div>
        === "386/x86_32"
            <div class="download-list" data-keyword="linux-386"data-suffix="pkg.tar.zst"><ul>åŠ è½½ä¸­...</ul></div>
        === "arm64/armv8"
            <div class="download-list" data-keyword="linux-arm64"data-suffix="pkg.tar.zst"><ul>åŠ è½½ä¸­...</ul></div>
        === "armv7"
            <div class="download-list" data-keyword="linux-armv7"data-suffix="pkg.tar.zst"><ul>åŠ è½½ä¸­...</ul></div>
        === "riscv64"
            <div class="download-list" data-keyword="linux-riscv64"data-suffix="pkg.tar.zst"><ul>åŠ è½½ä¸­...</ul></div>
        === "loong64"
            <div class="download-list" data-keyword="linux-loong64"data-suffix="pkg.tar.zst"><ul>åŠ è½½ä¸­...</ul></div>
        === "s390x"
            <div class="download-list" data-keyword="linux-s390x"data-suffix="pkg.tar.zst"><ul>åŠ è½½ä¸­...</ul></div>
=== "MacOS"
    === "amd64/x86_64"
        <div class="download-list" data-keyword="darwin-amd64" data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
    === "arm64/armv8"
        <div class="download-list" data-keyword="darwin-arm64" data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
=== "FreeBSD"
    === "amd64/x86_64"
        <div class="download-list" data-keyword="freebsd-amd64" data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
    === "386/x86_32"
        <div class="download-list" data-keyword="freebsd-386" data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
    === "arm64/armv8"
        <div class="download-list" data-keyword="freebsd-arm64" data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
=== "Android"
    === "arm64/armv8"
        <div class="download-list" data-keyword="android-arm64" data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
    === "armv7"
        <div class="download-list" data-keyword="android-armv7" data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
    === "amd64/x86_64"
        <div class="download-list" data-keyword="android-amd64" data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
    === "386/x86_32"
        <div class="download-list" data-keyword="android-386" data-suffix="gz"><ul>åŠ è½½ä¸­...</ul></div>
<script>
  const fileList = []
  const divList = document.querySelectorAll('div.download-list')
  const githubLink = 'https://github.com/MetaCubeX/mihomo/releases'

  const getFileList = async () => {
    const link = 'https://api.github.com/repos/MetaCubeX/mihomo/releases/tags/Prerelease-Alpha'
    const { assets } = await fetch(link).then(r => r.json())
    for (const { name, browser_download_url: url } of assets) fileList.push({ name, url })
  }

  getFileList().then(() => {
    for (const div of divList) {
      const keyword = div.getAttribute('data-keyword')
      const suffix = div.getAttribute('data-suffix')
      const ul = div.querySelector('ul')
      ul.innerHTML = ''
      for (const { name, url } of fileList) {
        if (!name.includes(keyword)) continue
        if (!name.includes(suffix)) continue

        const a = document.createElement('a')
        const li = document.createElement('li')
        a.href = url
        a.download = name
        a.innerText = name
        li.appendChild(a)
        ul.appendChild(li)
      }
    }
  }, () => {
    for (const div of divList) {
      const ul = div.querySelector('ul')
      ul.innerHTML = `åŠ è½½å¤±è´¥ï¼Œæ‚¨å¯ä»¥åœ¨ github ä¸‹è½½ mihomo çš„å†…æ ¸äºŒè¿›åˆ¶æ–‡ä»¶ï¼š <a href="${githubLink}" target="_blank">github release</a>`
    }
  })
</script>

---
# å®¢æˆ·ç«¯
# Client
## Windows
[**Clash.Mini**](https://github.com/MetaCubeX/Clash.Mini)
## Mac OS
[**ClashX.Meta**](https://github.com/MetaCubeX/ClashX.Meta)
## Android
[**Clash.Meta for Android**](https://github.com/MetaCubeX/ClashMetaForAndroid/releases/tag/Prerelease-alpha)

---
# webé¢æ¿
[Yacd](http://yacd.metacubex.one)
[Metacubexd](http://d.metacubex.one)
[zashboard](http://board.zash.run.place/)

---
# åˆ›å»ºè¿è¡ŒæœåŠ¡
## ä½¿ç”¨ systemd

- ä¸‹è½½äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ [releases](https://github.com/MetaCubeX/mihomo/releases)

- å°†ä¸‹è½½çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶é‡ååä¸º `mihomo` å¹¶ç§»åŠ¨åˆ° `/usr/local/bin/`

- ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼ï¼Œè¿è¡Œ mihomoã€‚
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°† mihomo äºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ° /usr/local/bin, é…ç½®æ–‡ä»¶å¤åˆ¶åˆ° /etc/mihomo:
```shell
cp mihomo /usr/local/bin
cp config.yaml /etc/mihomo
```
åˆ›å»º systemd é…ç½®æ–‡ä»¶ `/etc/systemd/system/mihomo.service`:
```ini
[Unit]
Description=mihomo Daemon, Another Clash Kernel.
After=network.target NetworkManager.service systemd-networkd.service iwd.service
[Service]
Type=simple
LimitNPROC=500
LimitNOFILE=1000000
CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_RAW CAP_NET_BIND_SERVICE CAP_SYS_TIME CAP_SYS_PTRACE CAP_DAC_READ_SEARCH CAP_DAC_OVERRIDE
AmbientCapabilities=CAP_NET_ADMIN CAP_NET_RAW CAP_NET_BIND_SERVICE CAP_SYS_TIME CAP_SYS_PTRACE CAP_DAC_READ_SEARCH CAP_DAC_OVERRIDE
Restart=always
ExecStartPre=/usr/bin/sleep 1s
ExecStart=/usr/local/bin/mihomo -d /etc/mihomo
ExecReload=/bin/kill -HUP $MAINPID
[Install]
WantedBy=multi-user.target
```
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é‡æ–°åŠ è½½ systemd:
```shell
systemctl daemon-reload
```
å¯ç”¨ mihomo æœåŠ¡ï¼š
```shell
systemctl enable mihomo
```
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç«‹å³å¯åŠ¨ mihomo:
```shell
systemctl start mihomo
```
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä½¿ mihomo é‡æ–°åŠ è½½ï¼š
```shell
systemctl reload mihomo
```
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ mihomo çš„è¿è¡ŒçŠ¶å†µï¼š
```shell
systemctl status mihomo
```
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ mihomo çš„è¿è¡Œæ—¥å¿—ï¼š
```shell
journalctl -u mihomo -o cat -e
```
æˆ–
```shell
journalctl -u mihomo -o cat -f
```

---
# ä¸‰æ–¹å·¥å…·/å®¢æˆ·ç«¯
# ä¸‰æ–¹å·¥å…·/å®¢æˆ·ç«¯
## Windows
|é¡¹ç›®åç§° | ç»´æŠ¤çŠ¶æ€ |
|:----|:----|
|[mihomo-party](https://github.com/mihomo-party-org/mihomo-party)|ç»´æŠ¤ä¸­ |
|[clash-verge](https://github.com/MetaCubeX/clash-verge)|åœæ­¢ç»´æŠ¤ |
|[clash-verge-rev](https://github.com/clash-verge-rev/clash-verge-rev)|ç»´æŠ¤ä¸­ |
|[clash-nyanpasu](https://github.com/keiko233/clash-nyanpasu)|ç»´æŠ¤ä¸­ |
|[ClashMetaForWindows_Mini](https://github.com/kogekiplay/ClashMetaForWindows_Mini)|åœæ­¢ç»´æŠ¤ |
|[clashN](https://github.com/2dust/clashN)|åœæ­¢ç»´æŠ¤ |
|[v2rayN](https://github.com/2dust/v2rayN)|ç»´æŠ¤ä¸­ |
|[clashtui](https://github.com/JohanChane/clashtui)|ç»´æŠ¤ä¸­ |
|[GUI.for.Clash](https://github.com/GUI-for-Cores/GUI.for.Clash)|ç»´æŠ¤ä¸­ |
|[FlClash](https://github.com/chen08209/FlClash)|ç»´æŠ¤ä¸­ |
|[Pandora-Box](https://github.com/snakem982/Pandora-Box)|ç»´æŠ¤ä¸­ |
|[mihomo-purity](https://github.com/mihomo-purity/mihomo-purity)|ç»´æŠ¤ä¸­ |
|[mihomosh](https://github.com/SamuNatsu/mihomosh)|ç»´æŠ¤ä¸­ |
## MacOS
|é¡¹ç›®åç§° | ç»´æŠ¤çŠ¶æ€ |
|:----|:----|
|[mihomo-party](https://github.com/mihomo-party-org/mihomo-party)|ç»´æŠ¤ä¸­ |
|[clash-verge](https://github.com/MetaCubeX/clash-verge)|åœæ­¢ç»´æŠ¤ |
|[clash-verge-rev](https://github.com/clash-verge-rev/clash-verge-rev)|ç»´æŠ¤ä¸­ |
|[clash-nyanpasu](https://github.com/keiko233/clash-nyanpasu)|ç»´æŠ¤ä¸­ |
|[GUI.for.Clash](https://github.com/GUI-for-Cores/GUI.for.Clash)|ç»´æŠ¤ä¸­ |
|[FlClash](https://github.com/chen08209/FlClash)|ç»´æŠ¤ä¸­ |
|[Pandora-Box](https://github.com/snakem982/Pandora-Box)|ç»´æŠ¤ä¸­ |
|[mihomo-purity](https://github.com/mihomo-purity/mihomo-purity)|ç»´æŠ¤ä¸­ |
|[mihomosh](https://github.com/SamuNatsu/mihomosh)|ç»´æŠ¤ä¸­ |
## Linux
|é¡¹ç›®åç§° | ç»´æŠ¤çŠ¶æ€ |
|:----|:----|
|[mihomo-party](https://github.com/mihomo-party-org/mihomo-party)|ç»´æŠ¤ä¸­ |
|[clash-verge](https://github.com/MetaCubeX/clash-verge)|åœæ­¢ç»´æŠ¤ |
|[clash-verge-rev](https://github.com/clash-verge-rev/clash-verge-rev)|ç»´æŠ¤ä¸­ |
|[clash-nyanpasu](https://github.com/keiko233/clash-nyanpasu)|ç»´æŠ¤ä¸­ |
|[clashtui](https://github.com/JohanChane/clashtui)|ç»´æŠ¤ä¸­ |
|[GUI.for.Clash](https://github.com/GUI-for-Cores/GUI.for.Clash)|ç»´æŠ¤ä¸­ |
|[FlClash](https://github.com/chen08209/FlClash)|ç»´æŠ¤ä¸­ |
|[Pandora-Box](https://github.com/snakem982/Pandora-Box)|ç»´æŠ¤ä¸­ |
|[mihomo-purity](https://github.com/mihomo-purity/mihomo-purity)|ç»´æŠ¤ä¸­ |
|[mihomosh](https://github.com/SamuNatsu/mihomosh)|ç»´æŠ¤ä¸­ |
## Android
|é¡¹ç›®åç§° | ç»´æŠ¤çŠ¶æ€ |
|:----|:----|
|[FlClash](https://github.com/chen08209/FlClash)|ç»´æŠ¤ä¸­ |
## Merlin (KoolCenter å›ºä»¶/paldier SWRT å›ºä»¶)
|é¡¹ç›®åç§° | ç»´æŠ¤çŠ¶æ€ |
|:----|:----|
|[merlinclashcat](https://t.me/merlinclashcat)|ç»´æŠ¤ä¸­|
## OpenWRT
|é¡¹ç›®åç§° | ç»´æŠ¤çŠ¶æ€ |
|:----|:----|
|[OpenClash](https://github.com/vernesong/OpenClash)|ç»´æŠ¤ä¸­ |
|[OpenWrt-nikki](https://github.com/nikkinikki-org/OpenWrt-nikki)|ç»´æŠ¤ä¸­ |
|[openwrt-fchomo](https://github.com/fcshark-org/openwrt-fchomo)|ç»´æŠ¤ä¸­|
## Shell
|é¡¹ç›®åç§° | ç»´æŠ¤çŠ¶æ€ |
|:----|:----|
|[ShellClash](https://github.com/juewuy/ShellClash)|ç»´æŠ¤ä¸­ |
|[Xray4Magisk](https://github.com/Asterisk4Magisk/Xray4Magisk)|ç»´æŠ¤ä¸­ |
|[Box4](https://github.com/CHIZI-0618/box4magisk)|ç»´æŠ¤ä¸­ |
|[Box for Root](https://github.com/taamarin/box_for_magisk)|ç»´æŠ¤ä¸­ |
|[Surfing](https://github.com/MoGuangYu/Surfing)|ç»´æŠ¤ä¸­ |
|[Clash Tproxy Android](https://t.me/e58695/59)|ç»´æŠ¤ä¸­ |
|[mihomosh](https://github.com/SamuNatsu/mihomosh)|ç»´æŠ¤ä¸­ |
|[Clash.Meta for Magisk](https://t.me/MagiskChangeKing/126)|åœæ­¢ç»´æŠ¤ |

---
# ç”»é¥¼
# ç”»é¥¼

---
# è¯­æ³•
# è¯­æ³•

mihomo ä½¿ç”¨ `yaml` ä½œä¸ºé…ç½®æ–‡ä»¶æ ¼å¼
`yaml` å¤§å°å†™æ•æ„Ÿï¼Œä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œç¼©è¿›ä¸å…è®¸ä½¿ç”¨ tab, åªå…è®¸ç©ºæ ¼ï¼Œç¼©è¿›çš„ç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯
## æ³¨é‡Š
åœ¨ `yaml` æ ¼å¼çš„æ–‡ä»¶ä¸­ï¼Œä»¥"#"ä½œä¸ºæ³¨é‡Šå¼€å¤´ï¼Œè¡Œå°¾ä¸ºç»“å°¾ï¼Œ"#"å¿…é¡»åœ¨è¡Œå¤´æˆ–è€…å¿…é¡»åœ¨å‰æ–¹æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ä¸è§†ä¸ºæ³¨é‡Š
```{.yaml linenums="1"}
port: 7890 # http ä»£ç†ç«¯å£
socks-port: 7891
# socks ä»£ç†ç«¯å£
```
## å¯¹è±¡
å¯¹è±¡é”®å€¼å¯¹ä½¿ç”¨å†’å·ç»“æ„è¡¨ç¤º`key: value`,å†’å·åé¢è¦åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»
å› `yaml`æ ¼å¼ä¸º`json`çš„è¶…é›†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨`json`çš„å†™æ³•
### å¤šè¡Œ
```{.yaml linenums="1"}
tun:
  enable: true
  stack: system
  auto-route: true
  auto-detect-interface: true
```
### å¤šè¡Œ json
```{.yaml linenums="1"}
tun: {
  enable: true,
  stack: system,
  auto-route: true,
  auto-detect-interface: true
  }
```
### å•è¡Œ json
```{.yaml linenums="1"}
tun: { enable: true, stack: system, auto-route: true, auto-detect-interface: true}
```
### å…¨ json
```{.json linenums="1"}
{
  "tun": {
    "enable": true,
    "stack": "system",
    "auto-route": true,
    "auto-detect-interface": true
  }
}
```
## æ•°ç»„
ä»¥`-`å¼€å¤´çš„è¡Œè¡¨ç¤ºæ„æˆä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºä¸€ä¸ªå¯¹è±¡å†…çš„å¤šä¸ªå€¼
### å¤šè¡Œæ•°ç»„
```{.yaml linenums="1"}
a:
  - b
  - c
  - d
```
### å•è¡Œ json æ•°ç»„
```{.yaml linenums="1"}
a: [b, c, d]
```
## å¼•ç”¨
`&` é”šç‚¹å’Œ `*` åˆ«åï¼Œå¯ä»¥ç”¨æ¥å¼•ç”¨ï¼Œ`&` ç”¨æ¥å»ºç«‹é”šç‚¹ï¼Œ`<<`è¡¨ç¤ºåˆå¹¶åˆ°å½“å‰æ•°æ®ï¼Œ`*` ç”¨æ¥å¼•ç”¨é”šç‚¹
å¦‚ä¸‹ç¤ºä¾‹ä¸­ï¼Œå› `p`è¿™ä¸ªé”®åœ¨`mihomo`ä¸­ä¸å­˜åœ¨ï¼Œæ‰€ä»¥åœ¨`mihomo`è§£æé…ç½®ä¼šè¢«å¿½è§†
å¦‚åˆå¹¶æ—¶æœ‰é‡å¤çš„é¡¹ï¼Œåˆ™ä¸ä¼šå»åˆå¹¶
```{.yaml linenums="1"}
p: &p
  type: http
  interval: 3600
  health-check:
    enable: true
    url: https://www.gstatic.com/generate_204
    interval: 300

proxy-providers:
  provider1:
    <<: *p
    url: ""
    path: ./proxy_providers/provider1.yaml

  provider2:
    <<: *p
    type: file
    path: ./proxy_providers/provider2.yaml
```
ç­‰åŒäº
```{.yaml linenums="1"}
proxy-providers:
  provider1:
    type: http
    interval: 3600
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    url: ""
    path: ./proxy_providers/provider1.yaml

  provider2:
    interval: 3600
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    type: file
    path: ./proxy_providers/provider2.yaml
```
## åŸŸåé€šé…ç¬¦
### é€šé…ç¬¦ `*`

Clash çš„é€šé…ç¬¦ `*` ä¸€æ¬¡åªèƒ½åŒ¹é…ä¸€çº§åŸŸå
`*.baidu.com` åªåŒ¹é… `tieba.baidu.com` è€Œä¸åŒ¹é… `123.tieba.baidu.com` æˆ–è€… `baidu.com`
`*`åªåŒ¹é… localhost ç­‰æ²¡æœ‰`.`çš„ä¸»æœºå
### é€šé…ç¬¦ `+`
é€šé…ç¬¦ ï¼‹ ç±»ä¼¼ DOMAIN-SUFFIX, å¯ä»¥ä¸€æ¬¡æ€§åŒ¹é…å¤šä¸ªçº§åˆ«
`ï¼‹.baidu.com` åŒ¹é… `tieba.baidu.com` å’Œ `123.tieba.baidu.com` æˆ–è€… `baidu.com`
é€šé…ç¬¦ `ï¼‹` åªèƒ½ç”¨äºåŸŸåå‰ç¼€åŒ¹é…
### é€šé…ç¬¦ `.`
é€šé…ç¬¦ . å¯ä»¥ä¸€æ¬¡æ€§åŒ¹é…å¤šä¸ªçº§åˆ«
`.baidu.com` åŒ¹é… `tieba.baidu.com` å’Œ `123.tieba.baidu.com`, ä½†ä¸èƒ½åŒ¹é… `baidu.com`
é€šé…ç¬¦ `.` åªèƒ½ç”¨äºåŸŸåå‰ç¼€åŒ¹é…
### ä½¿ç”¨ç¤ºä¾‹
ä½¿ç”¨é€šé…ç¬¦æ—¶ï¼Œåº”å½“ä½¿ç”¨å¼•å· `' '`æˆ– `" "`å°†å†…å®¹åŒ…è£¹èµ·æ¥
```{.yaml linenums="1"}
fake-ip-filter:
- ".lan"
- "xbox.*.microsoft.com"
- "+.xboxlive.com"
- localhost.ptlogin2.qq.com
```
## å¼•å…¥åŸŸåé›†åˆ
!!! warning
    rule-set ä»…æ”¯æŒ behavior ä¸º domain/classical
```{.yaml linenums="1"}
fake-ip-filter:
- "rule-set:xxx"
- "geosite:xxx"
```
## ç«¯å£èŒƒå›´

mihomo å¯ä»¥ä½¿ç”¨ `-` æ¥åŒ¹é…ç«¯å£èŒƒå›´ï¼Œä½¿ç”¨ `/` æˆ–è€… `,` æ¥åŒºåˆ†å¤šä¸ªç«¯å£/ç«¯å£èŒƒå›´
### ç¤ºä¾‹
åŒ¹é… 114 åˆ° 514 å’Œ 810 åˆ° 1919 ç«¯å£ï¼Œä»¥åŠ 65530 ç«¯å£
```{.yaml linenums="1"}
114-514/810-1919,65530
```
<!--
## æ—¶é—´æ ¼å¼

mihomo æ”¯æŒä¸¤ç§æ—¶é—´æ ¼å¼ï¼Œåˆ†åˆ«æ˜¯æ•´æ•°å’ŒæŒç»­æ—¶é—´
=== "æ•´æ•°æ ¼å¼"
    ```{.yaml linenums="1"}
    interval: 3600
    ```
=== "æŒç»­æ—¶é—´æ ¼å¼"
    ```{.yaml linenums="1"}
    interval: 1h
    ```
-->

---
# å¿«æ·é…ç½®
=== "GeoX"
    === "config"
        ```{.yaml linenums="1"}
        # url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
        proxy-providers:
          provider1:
            url: ""
            type: http
            interval: 86400
            health-check: {enable: true,url: "https://www.gstatic.com/generate_204", interval: 300}
            override:
              additional-prefix: "[provider1]"

          provider2:
            url: ""
            type: http
            interval: 86400
            health-check: {enable: true,url: "https://www.gstatic.com/generate_204",interval: 300}
            override:
              additional-prefix: "[provider2]"

        proxies:
          - name: "ç›´è¿"
            type: direct
            udp: true

        mixed-port: 7890
        ipv6: true
        allow-lan: true
        unified-delay: false
        tcp-concurrent: true
        external-controller: 127.0.0.1:9090
        external-ui: ui
        external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

        geodata-mode: true
        geox-url:
          geoip: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
          geosite: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
          mmdb: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
          asn: "https://mirror.ghproxy.com/https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"

        find-process-mode: strict
        global-client-fingerprint: chrome

        profile:
          store-selected: true
          store-fake-ip: true

        sniffer:
          enable: true
          sniff:
            HTTP:
              ports: [80, 8080-8880]
              override-destination: true
            TLS:
              ports: [443, 8443]
            QUIC:
              ports: [443, 8443]
          skip-domain:
            - "Mijia Cloud"
            - "+.push.apple.com"

        tun:
          enable: true
          stack: mixed
          dns-hijack:
            - "any:53"
            - "tcp://any:53"
          auto-route: true
          auto-redirect: true
          auto-detect-interface: true

        dns:
          enable: true
          ipv6: true
          enhanced-mode: fake-ip
          fake-ip-filter:
            - "*"
            - "+.lan"
            - "+.local"
            - "+.market.xiaomi.com"
          default-nameserver:
            - tls://223.5.5.5
            - tls://223.6.6.6
          nameserver:
            - https://doh.pub/dns-query
            - https://dns.alidns.com/dns-query

        proxy-groups:

          - name: é»˜è®¤
            type: select
            proxies: [è‡ªåŠ¨é€‰æ‹©,ç›´è¿,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹]

          - name: Google
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: Telegram
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: Twitter
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: å“”å“©å“”å“©
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: å·´å“ˆå§†ç‰¹
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: YouTube
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: NETFLIX
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: Spotify
            type: select
            proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: Github
            type: select
            proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: å›½å†…
            type: select
            proxies:  [ç›´è¿,é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©]

          - name: å…¶ä»–
            type: select
            proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]
#åˆ†éš”,ä¸‹é¢æ˜¯åœ°åŒºåˆ†ç»„
          - name: é¦™æ¸¯
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)æ¸¯|hk|hongkong|hong kong"

          - name: å°æ¹¾
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)å°|tw|taiwan"

          - name: æ—¥æœ¬
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)æ—¥|jp|japan"

          - name: ç¾å›½
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)ç¾|us|unitedstates|united states"

          - name: æ–°åŠ å¡
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)(æ–°|sg|singapore)"

          - name: å…¶å®ƒåœ°åŒº
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|æ–°|sg|singapore|ç¾|us|unitedstates)).*"

          - name: å…¨éƒ¨èŠ‚ç‚¹
            type: select
            include-all: true
            exclude-type: direct

          - name: è‡ªåŠ¨é€‰æ‹©
            type: url-test
            include-all: true
            exclude-type: direct
            tolerance: 10

        rules:
          - GEOIP,lan,ç›´è¿,no-resolve
          - GEOSITE,github,Github
          - GEOSITE,twitter,Twitter
          - GEOSITE,youtube,YouTube
          - GEOSITE,google,Google
          - GEOSITE,telegram,Telegram
          - GEOSITE,netflix,NETFLIX
          - GEOSITE,bilibili,å“”å“©å“”å“©
          - GEOSITE,bahamut,å·´å“ˆå§†ç‰¹
          - GEOSITE,spotify,Spotify
          - GEOSITE,CN,å›½å†…
          - GEOSITE,geolocation-!cn,å…¶ä»–

          - GEOIP,google,Google
          - GEOIP,netflix,NETFLIX
          - GEOIP,telegram,Telegram
          - GEOIP,twitter,Twitter
          - GEOIP,CN,å›½å†…
          - MATCH,å…¶ä»–
        ```
    === "link"
        ```text
        https://wiki.metacubex.one/example/geox
        ```
=== "RULE-SET"
    === "config"
        ```{.yaml linenums="1"}
        # url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
        proxy-providers:
          provider1:
            url: ""
            type: http
            interval: 86400
            health-check: {enable: true,url: "https://www.gstatic.com/generate_204",interval: 300}
            override:
              additional-prefix: "[provider1]"

          provider2:
            url: ""
            type: http
            interval: 86400
            health-check: {enable: true,url: "https://www.gstatic.com/generate_204",interval: 300}
            override:
              additional-prefix: "[provider2]"

        proxies:
          - name: "ç›´è¿"
            type: direct
            udp: true

        mixed-port: 7890
        ipv6: true
        allow-lan: true
        unified-delay: false
        tcp-concurrent: true
        external-controller: 127.0.0.1:9090
        external-ui: ui
        external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

        find-process-mode: strict
        global-client-fingerprint: chrome

        profile:
          store-selected: true
          store-fake-ip: true

        sniffer:
          enable: true
          sniff:
            HTTP:
              ports: [80, 8080-8880]
              override-destination: true
            TLS:
              ports: [443, 8443]
            QUIC:
              ports: [443, 8443]
          skip-domain:
            - "Mijia Cloud"
            - "+.push.apple.com"

        tun:
          enable: true
          stack: mixed
          dns-hijack:
            - "any:53"
            - "tcp://any:53"
          auto-route: true
          auto-redirect: true
          auto-detect-interface: true

        dns:
          enable: true
          ipv6: true
          enhanced-mode: fake-ip
          fake-ip-filter:
            - "*"
            - "+.lan"
            - "+.local"
            - "+.market.xiaomi.com"
          default-nameserver:
            - tls://223.5.5.5
            - tls://223.6.6.6
          nameserver:
            - https://doh.pub/dns-query
            - https://dns.alidns.com/dns-query

        proxy-groups:

          - name: é»˜è®¤
            type: select
            proxies: [è‡ªåŠ¨é€‰æ‹©,ç›´è¿,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹]

          - name: Google
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: Telegram
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: Twitter
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: å“”å“©å“”å“©
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: å·´å“ˆå§†ç‰¹
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: YouTube
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: NETFLIX
            type: select
            proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: Spotify
            type: select
            proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: Github
            type: select
            proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

          - name: å›½å†…
            type: select
            proxies:  [ç›´è¿,é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©]

          - name: å…¶ä»–
            type: select
            proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]
#åˆ†éš”,ä¸‹é¢æ˜¯åœ°åŒºåˆ†ç»„
          - name: é¦™æ¸¯
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)æ¸¯|hk|hongkong|hong kong"

          - name: å°æ¹¾
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)å°|tw|taiwan"

          - name: æ—¥æœ¬
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)æ—¥|jp|japan"

          - name: ç¾å›½
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)ç¾|us|unitedstates|united states"

          - name: æ–°åŠ å¡
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)(æ–°|sg|singapore)"

          - name: å…¶å®ƒåœ°åŒº
            type: select
            include-all: true
            exclude-type: direct
            filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|æ–°|sg|singapore|ç¾|us|unitedstates)).*"

          - name: å…¨éƒ¨èŠ‚ç‚¹
            type: select
            include-all: true
            exclude-type: direct

          - name: è‡ªåŠ¨é€‰æ‹©
            type: url-test
            include-all: true
            exclude-type: direct
            tolerance: 10

        rules:
          - RULE-SET,private_ip,ç›´è¿,no-resolve
          - RULE-SET,github_domain,Github
          - RULE-SET,twitter_domain,Twitter
          - RULE-SET,youtube_domain,YouTube
          - RULE-SET,google_domain,Google
          - RULE-SET,telegram_domain,Telegram
          - RULE-SET,netflix_domain,NETFLIX
          - RULE-SET,bilibili_domain,å“”å“©å“”å“©
          - RULE-SET,bahamut_domain,å·´å“ˆå§†ç‰¹
          - RULE-SET,spotify_domain,Spotify
          - RULE-SET,cn_domain,å›½å†…
          - RULE-SET,geolocation-!cn,å…¶ä»–

          - RULE-SET,google_ip,Google
          - RULE-SET,netflix_ip,NETFLIX
          - RULE-SET,telegram_ip,Telegram
          - RULE-SET,twitter_ip,Twitter
          - RULE-SET,cn_ip,å›½å†…
          - MATCH,å…¶ä»–

        rule-anchor:
          ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
          domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
        rule-providers:
          private_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"
          cn_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"
          biliintl_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/biliintl.mrs"
          ehentai_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ehentai.mrs"
          github_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"
          twitter_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.mrs"
          youtube_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"
          google_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"
          telegram_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"
          netflix_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs"
          bilibili_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs"
          bahamut_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bahamut.mrs"
          spotify_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.mrs"
          pixiv_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/pixiv.mrs"
          geolocation-!cn:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"

          private_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs"
          cn_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"
          google_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"
          netflix_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs"
          twitter_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs"
          telegram_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"
        ```
    === "link"
        ```text
        https://wiki.metacubex.one/example/mrs
        ```
=== "Stash(ç§è´§)"
    === "config"
        ```{.yaml linenums="1"}
        ######### é”šç‚¹ start #######
        # ç­–ç•¥ç»„ç›¸å…³
        pr: &pr {type: select, proxies: [é»˜è®¤, é¦™æ¸¯, é¦™æ¸¯è‡ªåŠ¨é€‰æ‹©, å°æ¹¾, å°æ¹¾è‡ªåŠ¨é€‰æ‹©, æ—¥æœ¬, æ—¥æœ¬è‡ªåŠ¨é€‰æ‹©, æ–°åŠ å¡, æ–°åŠ å¡è‡ªåŠ¨é€‰æ‹©, ç¾å›½, ç¾å›½è‡ªåŠ¨é€‰æ‹©, å…¶å®ƒåœ°åŒº, å…¨éƒ¨èŠ‚ç‚¹, è‡ªåŠ¨é€‰æ‹©, ç›´è¿]}
        #è¿™é‡Œæ˜¯è®¢é˜…æ›´æ–°å’Œå»¶è¿Ÿæµ‹è¯•ç›¸å…³çš„
        p: &p {type: http, interval: 3600, health-check: {enable: true, url: "https://www.gstatic.com/generate_204", interval: 300}}
        ######### é”šç‚¹ end #######
# url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
        proxy-providers:
          provider1:
            <<: *p
            url: ""
          provider2:
            <<: *p
            url: ""
        ipv6: true
        allow-lan: true
        mixed-port: 7890
        external-controller: 127.0.0.1:9090
        profile:
          store-selected: true
          store-fake-ip: true
        dns:
          enable: true
          ipv6: true
          enhanced-mode: fake-ip
          fake-ip-range: 28.0.0.1/8
          fake-ip-filter:
            - "*"
            - "+.lan"
            - "+.local"
          default-nameserver:
            - 223.5.5.5
          nameserver:
            - https://doh.pub/dns-query
            - https://dns.alidns.com/dns-query

        proxies:
        - name: "ç›´è¿"
          type: direct
          udp: true
        proxy-groups:
        - {name: é»˜è®¤, type: select, proxies: [è‡ªåŠ¨é€‰æ‹©, ç›´è¿, é¦™æ¸¯, é¦™æ¸¯è‡ªåŠ¨é€‰æ‹©, å°æ¹¾, å°æ¹¾è‡ªåŠ¨é€‰æ‹©, æ—¥æœ¬, æ—¥æœ¬è‡ªåŠ¨é€‰æ‹©, æ–°åŠ å¡, æ–°åŠ å¡è‡ªåŠ¨é€‰æ‹©, ç¾å›½, ç¾å›½è‡ªåŠ¨é€‰æ‹©, å…¶å®ƒåœ°åŒº, å…¨éƒ¨èŠ‚ç‚¹], icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Proxy.png"}
        - {name: Google, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Google_Search.png"}
        - {name: Apple, <<: *pr, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Apple.png}
        - {name: Telegram, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Telegram.png"}
        - {name: Twitter, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Twitter.png"}
        - {name: ehentai, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Panda.png"}
        - {name: å“”å“©å“”å“©, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/bilibili.png"}
        - {name: å“”å“©ä¸œå—äºš, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/bilibili.png"}
        - {name: å·´å“ˆå§†ç‰¹, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Bahamut.png"}
        - {name: YouTube, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/YouTube.png"}
        - {name: NETFLIX, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Netflix.png"}
        - {name: Spotify, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Spotify.png"}
        - {name: å›½å†…, type: select, proxies: [ç›´è¿, é»˜è®¤, é¦™æ¸¯, é¦™æ¸¯è‡ªåŠ¨é€‰æ‹©, å°æ¹¾, å°æ¹¾è‡ªåŠ¨é€‰æ‹©, æ—¥æœ¬, æ—¥æœ¬è‡ªåŠ¨é€‰æ‹©, æ–°åŠ å¡, æ–°åŠ å¡è‡ªåŠ¨é€‰æ‹©, ç¾å›½, ç¾å›½è‡ªåŠ¨é€‰æ‹©, å…¶å®ƒåœ°åŒº, å…¨éƒ¨èŠ‚ç‚¹, è‡ªåŠ¨é€‰æ‹©], icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/China_Map.png"}
        - {name: å…¶ä»–, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Final.png"}
          #åˆ†éš”,ä¸‹é¢æ˜¯åœ°åŒºåˆ†ç»„
        - {name: é¦™æ¸¯, type: select, include-all: true, filter: "(?i)(?!ç›´è¿)(æ¸¯|hk|hongkong|hong kong)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/HK.png"}
        - {name: å°æ¹¾, type: select, include-all: true, filter: "(?i)(?!ç›´è¿)(å°|tw|taiwan)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/TW.png"}
        - {name: æ—¥æœ¬, type: select, include-all: true, filter: "(?i)(?!ç›´è¿)(æ—¥|jp|japan)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/JP.png"}
        - {name: ç¾å›½, type: select, include-all: true, filter: "(?i)(?!ç›´è¿)(ç¾|us|unitedstates|united states)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/US.png"}
        - {name: æ–°åŠ å¡, type: select, include-all: true, filter: "(?i)(?!ç›´è¿)(æ–°|sg|singapore)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/SG.png"}
        - {name: å…¶å®ƒåœ°åŒº, type: select, include-all: true, filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|æ–°|sg|singapore|ç¾|us|unitedstates|ç›´è¿)).*", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Available.png"}
        - {name: è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all: true, tolerance: 10, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Auto.png"}
        - {name: å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Global.png"}

        - {name: é¦™æ¸¯è‡ªåŠ¨é€‰æ‹©,type: url-test, include-all: true, filter: "(?i)(?!ç›´è¿)(æ¸¯|hk|hongkong|hong kong)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/HK.png"}
        - {name: å°æ¹¾è‡ªåŠ¨é€‰æ‹©,type: url-test, include-all: true, filter: "(?i)(?!ç›´è¿)(å°|tw|taiwan)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/TW.png"}
        - {name: æ—¥æœ¬è‡ªåŠ¨é€‰æ‹©,type: url-test, include-all: true, filter: "(?i)(?!ç›´è¿)(æ—¥|jp|japan)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/JP.png"}
        - {name: ç¾å›½è‡ªåŠ¨é€‰æ‹©,type: url-test, include-all: true, filter: "(?i)(?!ç›´è¿)(ç¾|us|unitedstates|united states)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/US.png"}
        - {name: æ–°åŠ å¡è‡ªåŠ¨é€‰æ‹©,type: url-test, include-all: true, filter: "(?i)(æ–°|sg|singapore)", icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/SG.png"}

        rules:
        - GEOIP,lan,ç›´è¿,no-resolve
        - RULE-SET,biliintl_domain,å“”å“©ä¸œå—äºš
        - RULE-SET,ehentai_domain,ehentai
        - RULE-SET,github_domain,å…¶ä»–
        - RULE-SET,twitter_domain,Twitter
        - RULE-SET,youtube_domain,YouTube
        - RULE-SET,google_domain,Google
        - RULE-SET,telegram_domain,Telegram
        - RULE-SET,netflix_domain,NETFLIX
        - RULE-SET,bilibili_domain,å“”å“©å“”å“©
        - RULE-SET,bahamut_domain,å·´å“ˆå§†ç‰¹
        - RULE-SET,spotify_domain,Spotify
        - RULE-SET,pixiv_domain,å…¶ä»–
        - RULE-SET,geolocation-!cn,å…¶ä»–

        - RULE-SET,google_ip,Google
        - RULE-SET,netflix_ip,NETFLIX
        - RULE-SET,telegram_ip,Telegram
        - RULE-SET,twitter_ip,Twitter
        - RULE-SET,cn_domain,å›½å†…
        - RULE-SET,cn_ip,å›½å†…
        - MATCH,å…¶ä»–

        rule-anchor:
          ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: text}
          domain: &domain {type: http, interval: 86400, behavior: domain, format: text}
        rule-providers:
          private:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.list"
          cn_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.list"
          biliintl_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/biliintl.list"
          ehentai_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ehentai.list"
          github_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.list"
          twitter_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.list"
          youtube_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.list"
          google_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.list"
          telegram_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.list"
          netflix_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.list"
          bilibili_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.list"
          bahamut_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bahamut.list"
          spotify_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.list"
          pixiv_domain:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/pixiv.list"
          geolocation-!cn:
            <<: *domain
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.list"

          cn_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.list"
          google_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.list"
          netflix_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.list"
          twitter_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.list"
          telegram_ip:
            <<: *ip
            url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.list"
        ```
    === "link"
        ```text
        https://wiki.metacubex.one/example/stash
        ```

---
# é…ç½®
# é…ç½®
<div class="grid cards" markdown>

- :octicons-file-code-24: &nbsp; __[å®Œæ•´ç¤ºä¾‹][example]__

    test

- :material-login: &nbsp; __[æµé‡å…¥ç«™][inbound]__

    test

- :material-shuffle-variant: &nbsp; __[è·¯ç”±è§„åˆ™][rule]__

    test

- :material-logout: &nbsp; __[å‡ºç«™ä»£ç†][proxie]__

    test

- :material-dns-outline: &nbsp; __[DNS][dns]__

    test

- :material-format-list-group: &nbsp; __[ç­–ç•¥ç»„][proxy-group]__

    test
</div>
[example]: https://github.com/MetaCubeX/mihomo/blob/Meta/docs/config.yaml
[inbound]: ./inbound/index.md
[proxy-group]: ./proxy-groups/index.md
[proxie]: ./proxies/index.md
[rule]: ./rules/index.md
[dns]: ./dns/index.md

---
# å…¨å±€é…ç½®
# å…¨å±€é…ç½®
## å…è®¸å±€åŸŸç½‘
å…è®¸å…¶ä»–è®¾å¤‡ç»è¿‡ Clash çš„[ä»£ç†ç«¯å£](./inbound/port.md)è®¿é—®äº’è”ç½‘
å¯é€‰å€¼ `true/false`
```{.yaml linenums="1"}
allow-lan: true
```
ç»‘å®šåœ°å€ï¼Œä»…å…è®¸å…¶ä»–è®¾å¤‡é€šè¿‡è¿™ä¸ªåœ°å€è®¿é—®
***`"*"`*** ç»‘å®šæ‰€æœ‰ IP åœ°å€
***`192.168.31.31`*** ç»‘å®šå•ä¸ª IPV4 åœ°å€
***`[aaaa::a8aa:ff:fe09:57d8]`*** ç»‘å®šå•ä¸ª IPV6 åœ°å€
```{.yaml linenums="1"}
bind-address: "*"
```
å…è®¸è¿æ¥çš„ IP åœ°å€æ®µï¼Œä»…ä½œç”¨äº `allow-lan` ä¸º `true`
é»˜è®¤å€¼ä¸º `0.0.0.0/0`å’Œ `::/0`
```{.yaml linenums="1"}
lan-allowed-ips:
- 0.0.0.0/0
- ::/0
```
ç¦æ­¢è¿æ¥çš„ IP åœ°å€æ®µï¼Œé»‘åå•ä¼˜å…ˆçº§é«˜äºç™½åå•ï¼Œé»˜è®¤å€¼ä¸ºç©º
```{.yaml linenums="1"}
lan-disallowed-ips:
- 192.168.0.3/32
```
### ç”¨æˆ·éªŒè¯
`http(s)`/`socks`/`mixed`ä»£ç†çš„ç”¨æˆ·éªŒè¯
```{.yaml linenums="1"}
authentication:
- "user1:pass1"
- "user2:pass2"
```
è®¾ç½®å…è®¸è·³è¿‡éªŒè¯çš„ IP æ®µ
```{.yaml linenums="1"}
skip-auth-prefixes:
- 127.0.0.1/8
- ::1/128
```
## è¿è¡Œæ¨¡å¼
* ***`rule`*** è§„åˆ™åŒ¹é…
* ***`global`*** å…¨å±€ä»£ç† (éœ€è¦åœ¨ GLOBAL ç­–ç•¥ç»„é€‰æ‹©ä»£ç†/ç­–ç•¥)
* ***`direct`*** å…¨å±€ç›´è¿
æ­¤é¡¹æ‹¥æœ‰é»˜è®¤å€¼ï¼Œé»˜è®¤ä¸ºè§„åˆ™æ¨¡å¼
```{.yaml linenums="1"}
mode: rule
```
## æ—¥å¿—çº§åˆ«

Clash å†…æ ¸è¾“å‡ºæ—¥å¿—çš„ç­‰çº§ï¼Œä»…åœ¨æ§åˆ¶å°å’Œæ§åˆ¶é¡µé¢è¾“å‡º
```{.yaml linenums="1"}
log-level: info
```
* ***`silent`*** é™é»˜ï¼Œä¸è¾“å‡º
* ***`error`*** ä»…è¾“å‡ºå‘ç”Ÿé”™è¯¯è‡³æ— æ³•ä½¿ç”¨çš„æ—¥å¿—
* ***`warning`*** è¾“å‡ºå‘ç”Ÿé”™è¯¯ä½†ä¸å½±å“è¿è¡Œçš„æ—¥å¿—ï¼Œä»¥åŠ error çº§åˆ«å†…å®¹
* ***`info`*** è¾“å‡ºä¸€èˆ¬è¿è¡Œçš„å†…å®¹ï¼Œä»¥åŠ error å’Œ warning çº§åˆ«çš„æ—¥å¿—
* ***`debug`*** å°½å¯èƒ½çš„è¾“å‡ºè¿è¡Œä¸­æ‰€æœ‰çš„ä¿¡æ¯
## IPv6
æ˜¯å¦å…è®¸å†…æ ¸æ¥å— IPv6 æµé‡
å¯é€‰å€¼ `true/false,`é»˜è®¤ä¸º `true`
```{.yaml linenums="1"}
ipv6: true
```
## TCP Keep Alive è®¾ç½®
ä¿®æ”¹æ­¤é¡¹ä»¥å‡å°‘ç§»åŠ¨è®¾å¤‡[è€—ç”µé—®é¢˜](https://github.com/vernesong/OpenClash/issues/2614)

TCP Keep Alive åŒ…çš„é—´éš”ï¼Œå•ä½ä¸ºç§’
```{.yaml linenums="1"}
keep-alive-interval: 15
```

TCP Keep Alive çš„æœ€å¤§ç©ºé—²æ—¶é—´
```{.yaml linenums="1"}
keep-alive-idle: 15
```
ç¦ç”¨ TCP Keep Aliveï¼Œåœ¨ Android é»˜è®¤ä¸º true
```{.yaml linenums="1"}
disable-keep-alive: false
```
## è¿›ç¨‹åŒ¹é…æ¨¡å¼
æ§åˆ¶æ˜¯å¦è®© Clash å»åŒ¹é…è¿›ç¨‹
* ***`always`*** å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹
* ***`strict`*** é»˜è®¤ï¼Œç”± Clash åˆ¤æ–­æ˜¯å¦å¼€å¯
* ***`off`*** ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
```{.yaml linenums="1"}
find-process-mode: strict
```
## å¤–éƒ¨æ§åˆ¶ (API)
å¤–éƒ¨æ§åˆ¶å™¨ï¼Œå¯ä»¥ä½¿ç”¨ RESTful API æ¥æ§åˆ¶ä½ çš„ Clash å†…æ ¸

API ç›‘å¬åœ°å€ï¼Œä½ å¯ä»¥å°† 127.0.0.1 ä¿®æ”¹ä¸º 0.0.0.0 æ¥ç›‘å¬æ‰€æœ‰ IP
```{.yaml linenums="1"}
external-controller: 127.0.0.1:9090
```

API CORS æ ‡å¤´é…ç½®
```{.yaml linenums="1"}
external-controller-cors:
  allow-origins:
    - '*'
  allow-private-network: true
```

Unix socket API ç›‘å¬åœ°å€
!!! warning ""
    ä»Unix socketè®¿é—®apiæ¥å£ä¸ä¼šéªŒè¯secretï¼Œ å¦‚æœå¼€å¯è¯·è‡ªè¡Œä¿è¯å®‰å…¨é—®é¢˜
```{.yaml linenums="1"}
external-controller-unix: mihomo.sock
```

Windows namedpipe API ç›‘å¬åœ°å€
!!! warning ""
    ä»Windows namedpipeè®¿é—®apiæ¥å£ä¸ä¼šéªŒè¯secretï¼Œ å¦‚æœå¼€å¯è¯·è‡ªè¡Œä¿è¯å®‰å…¨é—®é¢˜
```{.yaml linenums="1"}
external-controller-pipe: \\.\pipe\mihomo
```

HTTPS-API ç›‘å¬åœ°å€ï¼Œéœ€è¦é…ç½® `tls` éƒ¨åˆ†è¯ä¹¦å’Œå…¶ç§é’¥é…ç½®ï¼Œä½¿ç”¨ TLS ä¹Ÿå¿…é¡»å¡«å†™ `external-controller`
```{.yaml linenums="1"}
external-controller-tls: 127.0.0.1:9443
```
åœ¨ RESTful API ç«¯å£ä¸Šå¼€å¯ DOH æœåŠ¡å™¨
!!! warning ""
    è¯¥URLä¸ä¼šéªŒè¯secretï¼Œ å¦‚æœå¼€å¯è¯·è‡ªè¡Œä¿è¯å®‰å…¨é—®é¢˜
```{.yaml linenums="1"}
external-doh-server: /dns-query
```

API çš„è®¿é—®å¯†é’¥
```{.yaml linenums="1"}
secret: ""
```
## å¤–éƒ¨ç”¨æˆ·ç•Œé¢
å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æº (æ¯”å¦‚ Clash-dashboard) è¿è¡Œåœ¨ Clash API, è·¯å¾„ä¸º API åœ°å€/ui
```{.yaml linenums="1"}
external-ui: /path/to/ui/folder
```
å¯ä»¥ä¸ºç»å¯¹è·¯å¾„ï¼Œæˆ–è€… Clash å·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„
!!! note
    æ³¨æ„ï¼Œå¦‚æœè·¯å¾„ä¸åœ¨ Clash å·¥ä½œç›®å½•ï¼Œè¯·æ‰‹åŠ¨è®¾ç½®`SAFE_PATHS`ç¯å¢ƒå˜é‡å°†å…¶åŠ å…¥å®‰å…¨è·¯å¾„ï¼Œè¯¥ç¯å¢ƒå˜é‡çš„è¯­æ³•åŒæœ¬æ“ä½œç³»ç»Ÿçš„PATHç¯å¢ƒå˜é‡è§£æè§„åˆ™ï¼ˆå³Windowsä¸‹ä»¥åˆ†å·åˆ†å‰²ï¼Œå…¶ä»–ç³»ç»Ÿä¸‹ä»¥å†’å·åˆ†å‰²ï¼‰ã€‚
## è‡ªå®šä¹‰å¤–éƒ¨ç”¨æˆ·ç•Œé¢åå­—
```{.yaml linenums="1"}
external-ui-name: xd      #  åˆå¹¶ä¸º external-ui/xd
```
éå¿…é¡»ï¼Œæ›´æ–°æ—¶ä¼šæ›´æ–°åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œä¸é…ç½®åˆ™ç›´æ¥æ›´æ–°åˆ° external-ui ç›®å½•
## è‡ªå®šä¹‰å¤–éƒ¨ç”¨æˆ·ç•Œé¢ä¸‹è½½åœ°å€
```{.yaml linenums="1"}
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip" #ä» GitHub Pages åˆ†æ”¯è·å–
```
## ç¼“å­˜
```{.yaml linenums="1"}
profile:
  store-selected: true
  # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-fake-ip: true
  # å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€
```
## ç»Ÿä¸€å»¶è¿Ÿ
å¼€å¯ç»Ÿä¸€å»¶è¿Ÿæ—¶ï¼Œä¼šè®¡ç®— RTTï¼Œä»¥æ¶ˆé™¤è¿æ¥æ¡æ‰‹ç­‰å¸¦æ¥çš„ä¸åŒç±»å‹èŠ‚ç‚¹çš„å»¶è¿Ÿå·®å¼‚
å¯é€‰å€¼ `true/false`
```{.yaml linenums="1"}
unified-delay: true
```
## TCP å¹¶å‘
å¯é€‰å€¼ `true/false`
```{.yaml linenums="1"}
tcp-concurrent: true
```
## å‡ºç«™æ¥å£

Clash çš„æµé‡å‡ºç«™æ¥å£
```{.yaml linenums="1"}
interface-name: en0
```
## è·¯ç”±æ ‡è®°
ä¸º Linux ä¸‹çš„å‡ºç«™è¿æ¥æä¾›é»˜è®¤æµé‡æ ‡è®°
```{.yaml linenums="1"}
routing-mark: 6666
```
## TLS
ç›®å‰ä»…ç”¨äº API çš„ https
```{.yaml linenums="1"}
tls:
  certificate: string # è¯ä¹¦ PEM æ ¼å¼ï¼Œæˆ–è€… è¯ä¹¦çš„è·¯å¾„
  private-key: string # è¯ä¹¦å¯¹åº”çš„ç§é’¥ PEM æ ¼å¼ï¼Œæˆ–è€…ç§é’¥è·¯å¾„
```
## å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹
å…¨å±€ TLS æŒ‡çº¹ï¼Œä¼˜å…ˆä½äº proxy å†…çš„ client-fingerprintã€‚
ç›®å‰æ”¯æŒå¼€å¯ TLS ä¼ è¾“çš„ TCP/grpc/WS/HTTP , æ”¯æŒåè®®æœ‰ VLESS,Vmess å’Œ trojan.
```{.yaml linenums="1"}
global-client-fingerprint: chrome
```
!!! note
    å¯é€‰ï¼š`chrome`, `firefox`, `safari`, `iOS`, `android`, `edge`, `360`, `qq`, `random`, è‹¥é€‰æ‹© `random`, åˆ™æŒ‰ Cloudflare Radar æ•°æ®æŒ‰æ¦‚ç‡ç”Ÿæˆä¸€ä¸ªç°ä»£æµè§ˆå™¨æŒ‡çº¹ã€‚
## GEOIP æ•°æ®æ¨¡å¼
æ›´æ”¹ geoip ä½¿ç”¨æ–‡ä»¶ï¼Œmmdb æˆ–è€… datï¼Œå¯é€‰ `true`/`false`,`true`ä¸º datï¼Œæ­¤é¡¹æœ‰é»˜è®¤å€¼ `false`
```{.yaml linenums="1"}
geodata-mode: true
```
## GEO æ–‡ä»¶åŠ è½½æ¨¡å¼
å¯é€‰çš„åŠ è½½æ¨¡å¼å¦‚ä¸‹
* `standard`ï¼šæ ‡å‡†åŠ è½½å™¨
* `memconservative`ï¼šä¸“ä¸ºå†…å­˜å—é™ (å°å†…å­˜) è®¾å¤‡ä¼˜åŒ–çš„åŠ è½½å™¨ (é»˜è®¤å€¼)
```{.yaml linenums="1"}
geodata-loader: memconservative
```
## è‡ªåŠ¨æ›´æ–° GEO
```{.yaml linenums="1"}
geo-auto-update: false
```
æ›´æ–°é—´éš”ï¼Œå•ä½ä¸ºå°æ—¶
```{.yaml linenums="1"}
geo-update-interval: 24
```
## è‡ªå®š GEO ä¸‹è½½åœ°å€
```{.yaml linenums="1"}
geox-url:
  geoip: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
  asn: "https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"
```
## è‡ªå®šå…¨å±€ UA
è‡ªå®šä¹‰å¤–éƒ¨èµ„æºä¸‹è½½æ—¶ä½¿ç”¨çš„çš„ UAï¼Œé»˜è®¤ä¸º `clash.meta`
```{.yaml linenums="1"}
global-ua: clash.meta
```
## ETag æ”¯æŒ
å¤–éƒ¨èµ„æºä¸‹è½½çš„ ETag æ”¯æŒï¼Œé»˜è®¤ä¸º `true`
```{.yaml linenums="1"}
etag-support: true
```

---
# DNSé…ç½®
# DNS
```{.yaml linenums="1"}
dns:
  enable: true
  cache-algorithm: arc
  prefer-h3: false
  use-hosts: true
  use-system-hosts: true
  respect-rules: false
  listen: 0.0.0.0:1053
  ipv6: false
  default-nameserver:
    - 223.5.5.5
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - '*.lan'
  nameserver-policy:
    '+.arpa': '10.0.0.1'
    'rule-set:cn':
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - tls://8.8.4.4
    - tls://1.1.1.1
  proxy-server-nameserver:
    - https://doh.pub/dns-query
  direct-nameserver:
    - system
  direct-nameserver-follow-policy: false
  fallback-filter:
    geoip: true
    geoip-code: CN
    geosite:
      - gfw
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'
```
## enable
æ˜¯å¦å¯ç”¨ï¼Œå¦‚ä¸º falseï¼Œåˆ™ä½¿ç”¨ç³»ç»Ÿ DNS è§£æ
## cache-algorithm
æ”¯æŒçš„ç®—æ³•ï¼š

- lru: Least Recently Used, é»˜è®¤å€¼
- arc: Adaptive Replacement Cache
## prefer-h3

DOH ä¼˜å…ˆä½¿ç”¨ http/3
## listen

DNS æœåŠ¡ç›‘å¬ï¼Œæ”¯æŒ udp, tcp
## IPV6
æ˜¯å¦è§£æ IPV6, å¦‚ä¸º false, åˆ™å›åº” AAAA çš„ç©ºè§£æ
## enhanced-mode
å¯é€‰å€¼ `fake-ip`/`redir-host`ï¼Œé»˜è®¤`redir-host`

mihomo çš„ DNS å¤„ç†æ¨¡å¼
## fake-ip-range

fakeip ä¸‹çš„ IP æ®µè®¾ç½®ï¼Œ[tun](../inbound/tun.md) çš„é»˜è®¤ IPV4 åœ°å€ ä¹Ÿä½¿ç”¨æ­¤å€¼ä½œä¸ºå‚è€ƒ
## fake-ip-filter

fakeip è¿‡æ»¤ï¼Œä»¥ä¸‹åœ°å€ä¸ä¼šä¸‹å‘ fakeip æ˜ å°„ç”¨äºè¿æ¥
å€¼æ”¯æŒ[åŸŸåé€šé…](../../handbook/syntax.md#_8)ä»¥åŠ[å¼•å…¥åŸŸåé›†åˆ](../../handbook/syntax.md#_13)
## fake-ip-filter-mode: blacklist
å¯é€‰ `blacklist`/`whitelist`ï¼Œé»˜è®¤`blacklist`ï¼Œ`whitelist` å³åªæœ‰åŒ¹é…æˆåŠŸæ‰è¿”å› fake-ip
## use-hosts
æ˜¯å¦å›åº”é…ç½®ä¸­çš„ [hosts](./hosts.md)ï¼Œé»˜è®¤ true
## use-system-hosts
æ˜¯å¦æŸ¥è¯¢ç³»ç»Ÿ hostsï¼Œé»˜è®¤ true
## respect-rules

dns è¿æ¥éµå®ˆ[è·¯ç”±è§„åˆ™](../rules/index.md)ï¼Œéœ€é…ç½® [proxy-server-nameserver](./index.md#proxy-server-nameserver)
!!! note ""
    å¼ºçƒˆä¸å»ºè®®å’Œ `prefer-h3` ä¸€èµ·ä½¿ç”¨
## default-nameserver
é»˜è®¤ DNS, ç”¨äºè§£æ DNS æœåŠ¡å™¨ çš„åŸŸå
!!! note ""
    å¿…é¡»ä¸º IP, å¯ä¸ºåŠ å¯† DNS
## nameserver-policy
æŒ‡å®šåŸŸåæŸ¥è¯¢çš„è§£ææœåŠ¡å™¨ï¼Œå¯ä½¿ç”¨ geosite, ä¼˜å…ˆäº `nameserver/fallback æŸ¥è¯¢`
é”®æ”¯æŒ[åŸŸåé€šé…](../../handbook/syntax.md#_8)
å€¼æ”¯æŒå­—ç¬¦ä¸²/æ•°ç»„
## proxy-server-nameserver
ä»£ç†èŠ‚ç‚¹åŸŸåè§£ææœåŠ¡å™¨ï¼Œä»…ç”¨äºè§£æä»£ç†èŠ‚ç‚¹çš„åŸŸåï¼Œå¦‚æœä¸å¡«åˆ™éµå¾ª nameserver-policyã€nameserver å’Œ fallback çš„é…ç½®
## direct-nameserver
ç”¨äº direct å‡ºå£åŸŸåè§£æçš„ DNS æœåŠ¡å™¨ï¼Œå¦‚æœä¸å¡«åˆ™éµå¾ª nameserver-policyã€nameserver å’Œ fallback çš„é…ç½®
## direct-nameserver-follow-policy
æ˜¯å¦éµå¾ª nameserver-policyï¼Œé»˜è®¤ä¸ºä¸éµå®ˆï¼Œä»…å½“ direct-nameserver ä¸ä¸ºç©ºæ—¶ç”Ÿæ•ˆ
## nameserver
é»˜è®¤çš„åŸŸåè§£ææœåŠ¡å™¨
## fallback
åå¤‡åŸŸåè§£ææœåŠ¡å™¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨å¢ƒå¤– DNS, ä¿è¯ç»“æœå¯ä¿¡
é…ç½® `fallback`åé»˜è®¤å¯ç”¨ `fallback-filter`,`geoip-code`ä¸º cn
## fallback-filter
åå¤‡åŸŸåè§£ææœåŠ¡å™¨ç­›é€‰ï¼Œæ»¡è¶³æ¡ä»¶çš„å°†ä½¿ç”¨ `fallback`ç»“æœæˆ–åªä½¿ç”¨ `fallback`è§£æ
### geoip
æ˜¯å¦å¯ç”¨ geoip åˆ¤æ–­
### geoip-code
å¯é€‰å€¼ä¸º å›½å®¶ç¼©å†™ï¼Œé»˜è®¤å€¼ä¸º `CN`
é™¤äº† `geoip-code` é…ç½®çš„å›½å®¶ IP, å…¶ä»–çš„ IP ç»“æœä¼šè¢«è§†ä¸ºæ±¡æŸ“
`geoip-code` é…ç½®çš„å›½å®¶çš„ç»“æœä¼šç›´æ¥é‡‡ç”¨ï¼Œå¦åˆ™å°†é‡‡ç”¨ `fallback`ç»“æœ
### geosite
å¯é€‰å€¼ä¸ºå¯¹äºçš„ geosite å†…åŒ…å«çš„é›†åˆ

geosite åˆ—è¡¨çš„å†…å®¹è¢«è§†ä¸ºå·²æ±¡æŸ“ï¼ŒåŒ¹é…åˆ° geosite çš„åŸŸåï¼Œå°†åªä½¿ç”¨ `fallback`è§£æï¼Œä¸å»ä½¿ç”¨ `nameserver`
### ipcidr
ä¹¦å†™å†…å®¹ä¸º `IP/æ©ç `
è¿™äº›ç½‘æ®µçš„ç»“æœä¼šè¢«è§†ä¸ºæ±¡æŸ“ï¼Œ`nameserver`è§£æå‡ºè¿™äº›ç»“æœæ—¶å°†ä¼šé‡‡ç”¨ `fallback`çš„è§£æç»“æœ
### domain
è¿™äº›åŸŸåè¢«è§†ä¸ºå·²æ±¡æŸ“ï¼ŒåŒ¹é…åˆ°è¿™äº›åŸŸåï¼Œä¼šç›´æ¥ä½¿ç”¨ `fallback`è§£æï¼Œä¸å»ä½¿ç”¨ `nameserver`
## é™„åŠ å‚æ•°
æ­¤éƒ¨åˆ†å¯ç”¨äºå‘å‘å…¬ç½‘åœ°å€çš„ DNS æœåŠ¡å™¨ï¼Œä½¿ç”¨`#`é™„åŠ ï¼Œä½¿ç”¨`&`è¿æ¥ä¸åŒçš„å‚æ•°ã€‚
æ”¯æŒèŒƒå›´ï¼š
|              | [nameserver](./index.md#nameserver) | [fallback](./index.md#fallback) | [nameserver-policy](./index.md#nameserver-policy) | [proxy-server-nameserver](./index.md#proxy-server-nameserver) | [direct-nameserver](./index.md#direct-nameserver) | [default-nameserver](./index.md#default-nameserver) | [WireGuard.dns](../proxies/wg.md#dns) |
|--------------|---------------------------|-------------------|---------------------|-------------------------|---------------------|----------------------|------------------------------------|
| æŒ‡å®šä»£ç†/æ¥å£      | âœ“                         | âœ“                 | âœ“                   | âœ“                       | âœ“                   | âœ“                    | âœ“                                  |
| å¼ºåˆ¶ HTTP/3    | DOH                       | DOH               | DOH                 | DOH                     | DOH                 | DOH                  | DOH                                |
| è·³è¿‡è¯ä¹¦éªŒè¯       | DOH                       | DOH               | DOH                 | DOH                     | DOH                 | DOH                  | DOH                                |
| ecs          | DOH                       | DOH               | DOH                 | DOH                     | DOH                 | DOH                  | DOH                                |
| ecs-override | DOH                       | DOH               | DOH                 | DOH                     | DOH                 | DOH                  | DOH                                |
> ä»¥ä¸Šè¡¨æ ¼ä¸­çš„ `âœ“` è¡¨ç¤ºæ”¯æŒ[æ‰€æœ‰çš„ç±»å‹](./type.md)
### DNS æŒ‡å®š ä»£ç†/æ¥å£ è¿›è¡Œè¿æ¥
ä¼˜å…ˆä½¿ç”¨å·²æœ‰ä»£ç†ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥åç§°çš„ä»£ç†åˆ™æŒ‡å®šæ¥å£è¿æ¥
`#RULES`ä¸ºéµå®ˆè·¯ç”±è§„åˆ™è¿›è¡Œè¿æ¥ï¼Œç­‰åŒäº[respect-rules](./index.md#respect-rules)
å¦‚éœ€ç»è¿‡ä»£ç†æŸ¥è¯¢ï¼Œåº”é…ç½® `proxy-server-nameserver`, ä»¥é˜²å‡ºç°é¸¡è›‹é—®é¢˜
```{.yaml linenums="1"}
nameserver:
  - 'tls://dns.google#proxy'
  - 'tls://dns.alidns.com#eth0'
```
### å¼ºåˆ¶ HTTP/3
æ­¤é€‰é¡¹ä¸ `prefer-h3` ä¸å†²çªï¼Œå¡«å†™åå¼ºåˆ¶å¯ç”¨ HTTP/3 å»ºç«‹ DOH è¿æ¥ï¼Œä½¿ç”¨å‰éœ€ç¡®ä¿ DOH æœåŠ¡å™¨æ”¯æŒ HTTP/3
```{.yaml linenums="1"}
nameserver:
  - 'https://dns.cloudflare.com/dns-query#h3=true'
```
### doh è·³è¿‡è¯ä¹¦éªŒè¯
```{.yaml linenums="1"}
nameserver:
  - 'https://dns.cloudflare.com/dns-query#skip-cert-verify=true'
```
### ecs
æŒ‡å®š dns æŸ¥è¯¢çš„ subnet åœ°å€ï¼Œä»…æ”¯æŒ [doh](./type.md#dns-over-https)
```
nameserver:
  - 'https://8.8.8.8/dns-query#ecs=1.1.1.1/24'
```
### ecs-override
å¼ºåˆ¶è¦†ç›– dns æŸ¥è¯¢çš„ subnet åœ°å€ï¼Œä»…æ”¯æŒ [doh](./type.md#dns-over-https)
```
nameserver:
  - 'https://8.8.8.8/dns-query#ecs=1.1.1.1/24&ecs-override=true'
```

---
# DNSç±»å‹
# æ”¯æŒçš„ç±»å‹
## UDP
```{.yaml linenums="1"}
- 223.5.5.5
- udp://223.5.5.5
```
## TCP
```{.yaml linenums="1"}
- tcp://8.8.8.8
```
## DNS over TLS
```{.yaml linenums="1"}
- tls://1.1.1.1
```
## DNS over HTTPS
```{.yaml linenums="1"}
- https://doh.pub/dns-query
```
## DNS over QUIC
```{.yaml linenums="1"}
- quic://dns.adguard.com:784
```
## system
```{.yaml linenums="1"}
- system://
- system
```
## dhcp
```{.yaml linenums="1"}
- dhcp://en0
```
ä»…é™ cmfaï¼Œä½¿ç”¨ç³»ç»Ÿ dns
```{.yaml linenums="1"}
- dhcp://system
```
## rcode
```{.yaml linenums="1"}
- rcode://success            # No error
- rcode://format_error       # Format error
- rcode://server_failure     # Server failure
- rcode://name_error         # Non-existent domain
- rcode://not_implemented    # Not implemented
- rcode://refused            # Query refused
```

---
# hosts
# hosts
```{.yaml linenums="1"}
hosts:
  '*.clash.dev': 127.0.0.1
  'alpha.clash.dev': '::1'
  test.com: [1.1.1.1, 2.2.2.2]
  baidu.com: google.com
```
é”®æ”¯æŒ[åŸŸåé€šé…](../../handbook/syntax.md#_8)
å€¼æ”¯æŒå­—ç¬¦ä¸²/æ•°ç»„ï¼ŒåŸŸåé‡å®šå‘ä¸æ”¯æŒæ•°ç»„
!!! note
    å®Œæ•´çš„çš„åŸŸåä¼˜å…ˆçº§é«˜äºä½¿ç”¨é€šé…ç¬¦çš„åŸŸåï¼Œä¾‹å¦‚ï¼šfoo.example.com > \*.example.com > .example.com

---
# è§£ææµç¨‹
# è§£ææµç¨‹
## ç¤ºä¾‹é…ç½®
```{.yaml linenums="1"}
dns:
  nameserver:
    - https://doh.pub/dns-query
  fallback:
    - https://8.8.8.8/dns-query
  direct-nameserver:
    - system
  nameserver-policy:
    "geosite:cn,private":
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    geosite:
      - gfw
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'

rules:
- DOMAIN-SUFFIX,google.com,PROXY
- GEOIP,CN,DIRECT
- MATCH,PROXY
```
## æµç¨‹
!!! note ""
    æ­¤éƒ¨åˆ†ä»…è¯´æ˜ dns æ¨¡å—çš„å¤„ç†è¿‡ç¨‹
!!! warning ""
    direct-nameserver é‡æ–°è§£æä»…é™ tcp è¿æ¥
```mermaid
flowchart TD
  Rule[åŒ¹é…è§„åˆ™]
  Domain[åŒ¹é…åˆ°åŸŸåè§„åˆ™]
  IP[åŒ¹é…åˆ°ç›®æ ‡ IP è§„åˆ™]
  Resolve[è§£æåŸŸå]

  NameServer[ä½¿ç”¨ nameserver æŸ¥è¯¢]
  Policy[åŒ¹é… nameserver-policy]
  Concurrent[ä½¿ç”¨ nameserver å’Œ fallback å¹¶å‘æŸ¥è¯¢]
  Filter[åŒ¹é… fallback-filter]
  DirectNS[ä½¿ç”¨ direct-nameserver é‡æ–°è§£æ]

  GetIP[æŸ¥è¯¢å¾—åˆ°IP]

  Proxy[å‘é€åŸŸåç»™ä»£ç†]
  Direct[ä½¿ç”¨ IP ç›´æ¥è¿æ¥]

  Rule -->  Domain
  Rule --> IP

  Domain -- åŸŸååŒ¹é…åˆ°ç›´è¿ --> Resolve
  Domain -- åŸŸååŒ¹é…åˆ°ç›´è¿å¹¶é…ç½®äº† direct-nameserver --> DirectNS

  IP --> Resolve

  Resolve -- é…ç½®äº† nameserver-policy --> Policy
  Policy -- æœªåŒ¹é…åˆ° --> NameServer
  Policy --> GetIP
  Resolve -- æœªé…ç½® nameserver-policy --> NameServer

  NameServer -- é…ç½®äº† fallback --> Concurrent
  Concurrent --> Filter
  Filter --> GetIP
  NameServer -- æœªé…ç½® fallback --> GetIP

  GetIP -- åŒ¹é…åˆ°ç›´è¿å¹¶é…ç½®äº† direct-nameserver --> DirectNS
  DirectNS --> Direct

  GetIP -- IP åŒ¹é…åˆ°ä»£ç† --> Proxy[å‘é€åŸŸåç»™ä»£ç†]
  Domain -- åŸŸååŒ¹é…åˆ°ä»£ç† --> Proxy

  GetIP -- IP åŒ¹é…åˆ°ç›´è¿ --> Direct
```

---
# åŸŸåå—…æ¢
# åŸŸåå—…æ¢
```{.yaml linenums="1"}
sniffer:
  enable: false
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: false
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - +.v2ex.com
  skip-domain:
    - Mijia Cloud
  skip-src-address:
    - 192.168.0.3/32
  skip-dst-address:
    - 192.168.0.3/32
```
## enable
æ˜¯å¦å¯ç”¨ sniffer
## force-dns-mapping
å¯¹ `redir-host` ç±»å‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
## parse-pure-ip
å¯¹æ‰€æœ‰æœªè·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
## override-destination
æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®ï¼Œé»˜è®¤ä¸º true
## sniff
éœ€è¦å—…æ¢çš„åè®®è®¾ç½®ï¼Œä»…æ”¯æŒ `HTTP`/`TLS`/`QUIC`

- `ports`: [ç«¯å£èŒƒå›´](../../handbook/syntax.md#_14)
- `override-destination`: è¦†ç›–å…¨å±€`override-destination`è®¾ç½®
## force-domain
å¼ºåˆ¶è¿›è¡Œå—…æ¢çš„åŸŸååˆ—è¡¨ï¼Œä½¿ç”¨[åŸŸåé€šé…](../../handbook/syntax.md#_8)
## skip-domain
è·³è¿‡å—…æ¢çš„åŸŸååˆ—è¡¨ï¼Œä½¿ç”¨[åŸŸåé€šé…](../../handbook/syntax.md#_8)
## skip-src-address
è·³è¿‡å—…æ¢çš„æ¥æº IP æ®µåˆ—è¡¨
## skip-dst-address
è·³è¿‡å—…æ¢çš„ç›®æ ‡ IP æ®µåˆ—è¡¨

---
# å…¥ç«™é…ç½®

Clash.Meta ä½¿ç”¨æµé‡å…¥ç«™ï¼Œå¯ä»¥ä½œä¸ºæœåŠ¡å™¨ã€‚
## å±€åŸŸç½‘å…¥ç«™
ç”¨äºç›‘å¬å±€åŸŸç½‘æµé‡çš„å…¥ç«™ï¼Œé€‚ç”¨äºæ— åŠ å¯†ä¼ è¾“ï¼š
```{.yaml linenums="1"}
listeners:
  - name: socks5-in-1
    type: socks
    port: 10808
    #listen: 0.0.0.0 # é»˜è®¤ç›‘å¬ 0.0.0.0
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rules,å¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†
    # udp: false # é»˜è®¤ true

  - name: http-in-1
    type: http
    port: 10809
    listen: 0.0.0.0
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rules,å¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†(å½“proxyä¸ä¸ºç©ºæ—¶,è¿™é‡Œçš„proxyåç§°å¿…é¡»åˆæ³•,å¦åˆ™ä¼šå‡ºé”™)

  - name: mixed-in-1
    type: mixed #  HTTP(S) å’Œ SOCKS ä»£ç†æ··åˆ
    port: 10810
    listen: 0.0.0.0
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rules,å¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†(å½“proxyä¸ä¸ºç©ºæ—¶,è¿™é‡Œçš„proxyåç§°å¿…é¡»åˆæ³•,å¦åˆ™ä¼šå‡ºé”™)
    # udp: false # é»˜è®¤ true

  - name: reidr-in-1
    type: redir
    port: 10811
    listen: 0.0.0.0
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rules,å¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†(å½“proxyä¸ä¸ºç©ºæ—¶,è¿™é‡Œçš„proxyåç§°å¿…é¡»åˆæ³•,å¦åˆ™ä¼šå‡ºé”™)

  - name: tproxy-in-1
    type: tproxy
    port: 10812
    listen: 0.0.0.0
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rules,å¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†(å½“proxyä¸ä¸ºç©ºæ—¶,è¿™é‡Œçš„proxyåç§°å¿…é¡»åˆæ³•,å¦åˆ™ä¼šå‡ºé”™)
    # udp: false # é»˜è®¤ true

  - name: tunnel-in-1
    type: tunnel
    port: 10816
    listen: 0.0.0.0
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rules,å¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†(å½“proxyä¸ä¸ºç©ºæ—¶,è¿™é‡Œçš„proxyåç§°å¿…é¡»åˆæ³•,å¦åˆ™ä¼šå‡ºé”™)
    network: [tcp, udp]
    target: target.com

  - name: tun-in-1
    type: tun
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rules,å¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†(å½“proxyä¸ä¸ºç©ºæ—¶,è¿™é‡Œçš„proxyåç§°å¿…é¡»åˆæ³•,å¦åˆ™ä¼šå‡ºé”™)
    stack: system # gvisor / lwip
    dns-hijack:
      - 0.0.0.0:53 # éœ€è¦åŠ«æŒçš„ DNS
    # auto-detect-interface: false # è‡ªåŠ¨è¯†åˆ«å‡ºå£ç½‘å¡
    # auto-route: false # é…ç½®è·¯ç”±è¡¨
    # mtu: 9000 # æœ€å¤§ä¼ è¾“å•å…ƒ
    inet4-address: # å¿…é¡»æ‰‹åŠ¨è®¾ç½®ipv4åœ°å€æ®µ
      - 198.19.0.1/30
    inet6-address: # å¿…é¡»æ‰‹åŠ¨è®¾ç½®ipv6åœ°å€æ®µ
      - "fdfe:dcba:9877::1/126"
    # strict-route: true # å°†æ‰€æœ‰è¿æ¥è·¯ç”±åˆ°tunæ¥é˜²æ­¢æ³„æ¼,ä½†ä½ çš„è®¾å¤‡å°†æ— æ³•å…¶ä»–è®¾å¤‡è¢«è®¿é—®
    #    inet4-route-address: # å¯ç”¨ auto-route æ—¶ä½¿ç”¨è‡ªå®šä¹‰è·¯ç”±è€Œä¸æ˜¯é»˜è®¤è·¯ç”±
    #      - 0.0.0.0/1
    #      - 128.0.0.0/1
    #    inet6-route-address: # å¯ç”¨ auto-route æ—¶ä½¿ç”¨è‡ªå®šä¹‰è·¯ç”±è€Œä¸æ˜¯é»˜è®¤è·¯ç”±
    #      - "::/1"
    #      - "8000::/1"
    # endpoint-independent-nat: false # å¯ç”¨ç‹¬ç«‹äºç«¯ç‚¹çš„ NAT
    # include-uid: # UID è§„åˆ™ä»…åœ¨ Linux ä¸‹è¢«æ”¯æŒ,å¹¶ä¸”éœ€è¦ auto-route
    # - 0
    # include-uid-range: # é™åˆ¶è¢«è·¯ç”±çš„çš„ç”¨æˆ·èŒƒå›´
    # - 1000-99999
    # exclude-uid: # æ’é™¤è·¯ç”±çš„çš„ç”¨æˆ·
    #- 1000
    # exclude-uid-range: # æ’é™¤è·¯ç”±çš„çš„ç”¨æˆ·èŒƒå›´
    # - 1000-99999
# Android ç”¨æˆ·å’Œåº”ç”¨è§„åˆ™ä»…åœ¨ Android ä¸‹è¢«æ”¯æŒ
    # å¹¶ä¸”éœ€è¦ auto-route
# include-android-user: # é™åˆ¶è¢«è·¯ç”±çš„ Android ç”¨æˆ·
    # - 0
    # - 10
    # include-package: # é™åˆ¶è¢«è·¯ç”±çš„ Android åº”ç”¨åŒ…å
    # - com.android.chrome
    # exclude-package: # æ’é™¤è¢«è·¯ç”±çš„ Android åº”ç”¨åŒ…å
    # - com.android.captiveportallogin
```
## äº’è”ç½‘å…¥ç«™
ç”¨äºåŠ å¯†ä¼ è¾“æµé‡çš„å…¥ç«™å¦‚ä¸‹ï¼š
```{.yaml linenums="1"}
listeners:
  - name: shadowsocks-in-1
    type: shadowsocks
    port: 10813
    listen: 0.0.0.0
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rules,å¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†(å½“proxyä¸ä¸ºç©ºæ—¶,è¿™é‡Œçš„proxyåç§°å¿…é¡»åˆæ³•,å¦åˆ™ä¼šå‡ºé”™)
    password: vlmpIPSyHH6f4S8WVPdRIHIlzmB+GIRfoH3aNJ/t9Gg=
    cipher: 2022-blake3-aes-256-gcm

  - name: vmess-in-1
    type: vmess
    port: 10814
    listen: 0.0.0.0
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rules,å¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†(å½“proxyä¸ä¸ºç©ºæ—¶,è¿™é‡Œçš„proxyåç§°å¿…é¡»åˆæ³•,å¦åˆ™ä¼šå‡ºé”™)
    users:
      - username: 1
        uuid: 9d0cb9d0-964f-4ef6-897d-6c6b3ccf9e68
        alterId: 1

  - name: tuic-in-1
    type: tuic
    port: 10815
    listen: 0.0.0.0
    # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rulesï¼Œå¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
    # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®šproxyå¤„ç†(å½“proxyä¸ä¸ºç©ºæ—¶ï¼Œè¿™é‡Œçš„proxyåç§°å¿…é¡»åˆæ³•ï¼Œå¦åˆ™ä¼šå‡ºé”™)
    # token:    # tuicV4å¡«å†™ï¼ˆä¸å¯åŒæ—¶å¡«å†™usersï¼‰
    #   - TOKEN
    # users:    # tuicV5å¡«å†™ï¼ˆä¸å¯åŒæ—¶å¡«å†™tokenï¼‰
    #   00000000-0000-0000-0000-000000000000: PASSWORD-0
    #   00000000-0000-0000-0000-000000000001: PASSWORD-1
    #  certificate: ./server.crt
    #  private-key: ./server.key
    #  congestion-controller: bbr
    #  max-idle-time: 15000
    #  authentication-timeout: 1000
    #  alpn:
    #    - h3
    #  max-udp-relay-packet-size: 1500
```
!!! note
    proxy å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®š[proxy](../proxies/index.md)å¤„ç†

    rule å¦‚æœå®šä¹‰çš„ [å­è§„åˆ™ (sub-rule)](../sub-rule.md)ä¸å­˜åœ¨ åˆ™ç›´æ¥ä½¿ç”¨ rules
## å…¥å£é…ç½®
å…¥å£é…ç½®ä¸ Listener ç­‰ä»·ï¼Œä¼ å…¥æµé‡å°†å’Œ socks,mixed ç­‰å…¥å£ä¸€æ ·æŒ‰ç…§ mode æ‰€æŒ‡å®šçš„æ–¹å¼è¿›è¡ŒåŒ¹é…å¤„ç†
```{.yaml linenums="1"}
# shadowsocks,vmess å…¥å£é…ç½®ï¼ˆä¼ å…¥æµé‡å°†å’Œsocks,mixedç­‰å…¥å£ä¸€æ ·æŒ‰ç…§modeæ‰€æŒ‡å®šçš„æ–¹å¼è¿›è¡ŒåŒ¹é…å¤„ç†ï¼‰
ss-config: ss://2022-blake3-aes-256-gcm:vlmpIPSyHH6f4S8WVPdRIHIlzmB+GIRfoH3aNJ/t9Gg=@:23456
vmess-config: vmess://1:9d0cb9d0-964f-4ef6-897d-6c6b3ccf9e68@:12345
# tuicæœåŠ¡å™¨å…¥å£ï¼ˆä¼ å…¥æµé‡å°†å’Œsocks,mixedç­‰å…¥å£ä¸€æ ·æŒ‰ç…§modeæ‰€æŒ‡å®šçš„æ–¹å¼è¿›è¡ŒåŒ¹é…å¤„ç†ï¼‰
tuic-server:
 enable: true
 listen: 127.0.0.1:10443
 token:    # tuicV4å¡«å†™ï¼ˆä¸å¯åŒæ—¶å¡«å†™usersï¼‰
   - TOKEN
 users:    # tuicV5å¡«å†™ï¼ˆä¸å¯åŒæ—¶å¡«å†™tokenï¼‰
   00000000-0000-0000-0000-000000000000: PASSWORD-0
   00000000-0000-0000-0000-000000000001: PASSWORD-1
 certificate: ./server.crt
 private-key: ./server.key
 congestion-controller: bbr
 max-idle-time: 15000
 authentication-timeout: 1000
 alpn:
   - h3
 max-udp-relay-packet-size: 1500
```

---
# ä»£ç†ç«¯å£
# ä»£ç†ç«¯å£
[http/socks/mixedç«¯å£éªŒè¯ä¸å¤–éƒ¨è®¿é—®](../general.md/#_1)
## http(s) ä»£ç†ç«¯å£
```{.yaml linenums="1"}
port: 7890
```
## socks4/4a/5 ä»£ç†ç«¯å£
```{.yaml linenums="1"}
socks-port: 7891
```
## æ··åˆç«¯å£
!!! node
    æ··åˆç«¯å£æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç«¯å£ï¼Œå®ƒåŒæ—¶æ”¯æŒ HTTP(S) å’Œ SOCKS5 åè®®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•æ”¯æŒ HTTP æˆ– SOCKS ä»£ç†çš„ç¨‹åºè¿æ¥åˆ°è¿™ä¸ªç«¯å£
```{.yaml linenums="1"}
mixed-port: 7892
```
## é€æ˜ä»£ç†ç«¯å£
!!! note
    redirect ç«¯å£ä»…é™ Linux(Android) ä»¥åŠ macOS é€‚ç”¨ï¼Œtproxy ç«¯å£ä»…é™ linux(Android) é€‚ç”¨

redirect é€æ˜ä»£ç†ç«¯å£ï¼Œä»…èƒ½ä»£ç† TCP æµé‡
```{.yaml linenums="1"}
redir-port: 7893
```

tproxy é€æ˜ä»£ç†ç«¯å£ï¼Œå¯ä»£ç† TCP ä¸ UDP æµé‡
```{.yaml linenums="1"}
tproxy-port: 7894
```

---
# TUN
# TUN
```{.yaml linenums="1"}
tun:
  enable: true
  stack: system
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - tcp://any:53
  device: utun0
  mtu: 9000
  strict-route: true
  gso: true
  gso-max-size: 65536
  udp-timeout: 300
  iproute2-table-index: 2022
  iproute2-rule-index: 9000
  endpoint-independent-nat: false
  route-address-set:
    - ruleset-1
  route-exclude-address-set:
    - ruleset-2
  route-address:
    - 0.0.0.0/1
    - 128.0.0.0/1
    - "::/1"
    - "8000::/1"
  route-exclude-address:
  - 192.168.0.0/16
  - fc00::/7
  include-interface:
  - eth0
  exclude-interface:
  - eth1
  include-uid:
  - 0
  include-uid-range:
  - 1000:9999
  exclude-uid:
  - 1000
  exclude-uid-range:
  - 1000:9999
  include-android-user:
  - 0
  - 10
  include-package:
  - com.android.chrome
  exclude-package:
  - com.android.captiveportallogin
## æ—§å†™æ³•
  inet4-route-address:
  - 0.0.0.0/1
  - 128.0.0.0/1
  inet6-route-address:
  - "::/1"
  - "8000::/1"
  inet4-route-exclude-address:
  - 192.168.0.0/16
  inet6-route-exclude-address:
  - fc00::/7
```
## enable
å¯ç”¨ tun
## stack

tun æ¨¡å¼å †æ ˆï¼Œå¦‚æ— ä½¿ç”¨é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨ `mixed`æ ˆï¼Œé»˜è®¤ `gvisor`
å¯ç”¨å€¼ï¼š `system/gvisor/mixed`
!!! note "åè®®æ ˆä¹‹é—´çš„åŒºåˆ«"
    * `system` ä½¿ç”¨ç³»ç»Ÿåè®®æ ˆï¼Œå¯ä»¥æä¾›æ›´ç¨³å®š/å…¨é¢çš„ tun ä½“éªŒï¼Œä¸”å ç”¨ç›¸å¯¹å…¶ä»–å †æ ˆæ›´ä½
    * `gvisor` é€šè¿‡åœ¨ç”¨æˆ·ç©ºé—´ä¸­å®ç°ç½‘ç»œåè®®æ ˆï¼Œå¯ä»¥æä¾›æ›´é«˜çš„å®‰å…¨æ€§å’Œéš”ç¦»æ€§ï¼ŒåŒæ—¶å¯ä»¥é¿å…æ“ä½œç³»ç»Ÿå†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´çš„åˆ‡æ¢ï¼Œä»è€Œåœ¨ç‰¹å®šæƒ…å†µä¸‹å…·æœ‰æ›´å¥½çš„ç½‘ç»œå¤„ç†æ€§èƒ½
    * `mixed` æ··åˆå †æ ˆï¼Œtcp ä½¿ç”¨ `system`æ ˆï¼Œudp ä½¿ç”¨ `gvisor`æ ˆï¼Œä½¿ç”¨ä½“éªŒå¯èƒ½ç›¸å¯¹æ›´å¥½
    * [ç®€å•æ€§èƒ½æµ‹è¯•](tun.md#tun_1)
    * å¦‚æœæ‰“å¼€äº†é˜²ç«å¢™ï¼Œåˆ™æ— æ³•ä½¿ç”¨ `system` å’Œ `mixed` åè®®æ ˆï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼æ”¾è¡Œå†…æ ¸ï¼š
        * Windows: è®¾ç½® -> Windows å®‰å…¨ä¸­å¿ƒ -> å…è®¸åº”ç”¨é€šè¿‡é˜²ç«å¢™ -> é€‰ä¸­å†…æ ¸
        * MacOS: ä¸€èˆ¬æ— éœ€é…ç½®ï¼Œé˜²ç«å¢™é»˜è®¤æ”¾è¡Œç­¾åè½¯ä»¶ï¼Œå¦‚æœé‡åˆ°å¼€å¯é˜²ç«å¢™æ— æ³•ä½¿ç”¨çš„æƒ…å†µï¼Œå¯ä»¥å°è¯•æ”¾è¡Œï¼šç³»ç»Ÿè®¾ç½® -> ç½‘ç»œ -> é˜²ç«å¢™ -> é€‰é¡¹ -> æ·»åŠ  mihomo app
        * Linux: ä¸€èˆ¬æ— éœ€é…ç½®ï¼Œé˜²ç«å¢™é»˜è®¤ä¸æ‹¦æˆªåº”ç”¨ï¼Œå¦‚æœé‡åˆ°å¼€å¯é˜²ç«å¢™æ— æ³•ä½¿ç”¨çš„æƒ…å†µï¼Œå¯ä»¥å°è¯•æ”¾è¡Œ TUN ç½‘å¡å‡ºç«™æµé‡ï¼ˆå‡è®¾ TUN ç½‘å¡ä¸º Mihomoï¼‰: `sudo iptables -A OUTPUT -o Mihomo -j ACCEPT`
## device
æŒ‡å®š tun ç½‘å¡åç§°ï¼ŒMacOS è®¾å¤‡åªèƒ½ä½¿ç”¨ utun å¼€å¤´çš„ç½‘å¡å
## auto-route
è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥ tun ç½‘å¡ã€‚
## auto-redirect
ä»…æ”¯æŒ Linuxï¼Œè‡ªåŠ¨é…ç½® iptables/nftables ä»¥é‡å®šå‘ TCP è¿æ¥ï¼Œéœ€è¦`auto-route`å·²å¯ç”¨
*åœ¨ Android ä¸­*ï¼š
ä»…è½¬å‘æœ¬åœ° IPv4 è¿æ¥ã€‚è¦é€šè¿‡çƒ­ç‚¹æˆ–ä¸­ç»§å…±äº«æ‚¨çš„ VPN è¿æ¥ï¼Œè¯·ä½¿ç”¨ [VPNHotspot](https://github.com/Mygod/VPNHotspot)ã€‚
*åœ¨ Linux ä¸­*ï¼š
å¸¦æœ‰ auto-route çš„ auto-redirect ç°åœ¨å¯ä»¥åœ¨è·¯ç”±å™¨ä¸ŠæŒ‰é¢„æœŸå·¥ä½œï¼Œæ— éœ€å¹²é¢„ã€‚
## auto-detect-interface
è‡ªåŠ¨é€‰æ‹©æµé‡å‡ºå£æ¥å£ï¼Œå¤šå‡ºå£ç½‘å¡åŒæ—¶è¿æ¥çš„è®¾å¤‡å»ºè®®æ‰‹åŠ¨æŒ‡å®šå‡ºå£ç½‘å¡
## dns-hijack

dns åŠ«æŒï¼Œå°†åŒ¹é…åˆ°çš„è¿æ¥å¯¼å…¥å†…éƒ¨ [dns](../dns/index.md) æ¨¡å—ï¼Œä¸ä¹¦å†™åè®®åˆ™ä¸º udp://
!!! warning ""
    * åœ¨ `MacOS`/`Windows` æ— æ³•è‡ªåŠ¨åŠ«æŒå‘å¾€å±€åŸŸç½‘çš„ dns è¯·æ±‚
    * åœ¨ `Android` å¦‚å¼€å¯ `ç§äººdns` åˆ™æ— æ³•è‡ªåŠ¨åŠ«æŒ dns è¯·æ±‚
## strict-route
å¯ç”¨ `auto-route` æ—¶æ‰§è¡Œä¸¥æ ¼çš„è·¯ç”±è§„åˆ™
*åœ¨ Linux ä¸­*:
* è®©ä¸æ”¯æŒçš„ç½‘ç»œæ— æ³•åˆ°è¾¾
* å°†æ‰€æœ‰è¿æ¥è·¯ç”±åˆ° tun
å®ƒå¯ä»¥é˜²æ­¢åœ°å€æ³„æ¼ï¼Œå¹¶ä½¿ DNS åŠ«æŒåœ¨ Android ä¸Šå·¥ä½œã€‚
*åœ¨ Windows ä¸­*:
* æ·»åŠ é˜²ç«å¢™è§„åˆ™ä»¥é˜»æ­¢ Windows
  çš„ [æ™®é€šå¤šå®¿ä¸» DNS è§£æè¡Œä¸º](https://learn.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd197552%28v%3Dws.10%29)
  é€ æˆçš„ DNS æ³„éœ²
å®ƒå¯èƒ½ä¼šä½¿æŸäº›åº”ç”¨ç¨‹åºï¼ˆå¦‚ VirtualBoxï¼‰åœ¨æŸäº›æƒ…å†µä¸‹æ— æ³•æ­£å¸¸å·¥ä½œã€‚
## mtu
æœ€å¤§ä¼ è¾“å•å…ƒï¼Œä¼šå½±å“æé™çŠ¶æ€ä¸‹çš„é€Ÿç‡ï¼Œä¸€èˆ¬ç”¨æˆ·é»˜è®¤å³å¯ã€‚
## gso
å¯ç”¨é€šç”¨åˆ†æ®µå¸è½½ï¼Œä»…æ”¯æŒ Linux
## gso-max-size
æ•°æ®å—çš„æœ€å¤§é•¿åº¦
## udp-timeout

UDP NAT è¿‡æœŸæ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œé»˜è®¤ä¸º 300(5 åˆ†é’Ÿ)
## iproute2-table-index
`auto-route` ç”Ÿæˆçš„ iproute2 è·¯ç”±è¡¨ç´¢å¼•ï¼Œé»˜è®¤ä½¿ç”¨ `2022`
## iproute2-rule-index
`auto-route` ç”Ÿæˆçš„ iproute2 è§„åˆ™èµ·å§‹ç´¢å¼•ï¼Œé»˜è®¤ä½¿ç”¨ `9000`
## endpoint-independent-nat
å¯ç”¨ç‹¬ç«‹äºç«¯ç‚¹çš„ NATï¼Œæ€§èƒ½å¯èƒ½ä¼šç•¥æœ‰ä¸‹é™ï¼Œæ‰€ä»¥ä¸å»ºè®®åœ¨ä¸éœ€è¦çš„æ—¶å€™å¼€å¯ã€‚
## route-address-set
å°†æŒ‡å®šè§„åˆ™é›†ä¸­çš„ç›®æ ‡ IP CIDR è§„åˆ™æ·»åŠ åˆ°é˜²ç«å¢™ï¼Œä¸åŒ¹é…çš„æµé‡å°†ç»•è¿‡è·¯ç”±
ä»…æ”¯æŒ Linuxï¼Œä¸”éœ€è¦ nftables ä»¥åŠ`auto-route` å’Œ `auto-redirect` å·²å¯ç”¨ã€‚
!!! warning ""
    ä¸ä»»æ„é…ç½®ä¸­çš„ routing-mark å†²çª
## route-exclude-address-set
å°†æŒ‡å®šè§„åˆ™é›†ä¸­çš„ç›®æ ‡ IP CIDR è§„åˆ™æ·»åŠ åˆ°é˜²ç«å¢™ï¼ŒåŒ¹é…çš„æµé‡å°†ç»•è¿‡è·¯ç”±
ä»…æ”¯æŒ Linuxï¼Œä¸”éœ€è¦ nftables ä»¥åŠ`auto-route` å’Œ `auto-redirect` å·²å¯ç”¨ã€‚
!!! warning ""
    ä¸ä»»æ„é…ç½®ä¸­çš„ routing-mark å†²çª
## route-address
å¯ç”¨ `auto-route`æ—¶è·¯ç”±è‡ªå®šä¹‰è·¯ç”±ç½‘æ®µè€Œä¸æ˜¯é»˜è®¤è·¯ç”±ï¼Œä¸€èˆ¬æ— éœ€é…ç½®ã€‚
## route-exclude-address
å¯ç”¨ `auto-route` æ—¶æ’é™¤è‡ªå®šä¹‰ç½‘æ®µ
## include-interface
é™åˆ¶è¢«è·¯ç”±çš„æ¥å£ï¼Œé»˜è®¤ä¸é™åˆ¶ï¼Œä¸ `exclude-interface` å†²çªï¼Œä¸å¯ä¸€èµ·é…ç½®
## exclude-interface
æ’é™¤è·¯ç”±çš„æ¥å£ï¼Œä¸ `include-interface` å†²çªï¼Œä¸å¯ä¸€èµ·é…ç½®
## include-uid
åŒ…å«çš„ç”¨æˆ·ï¼Œä½¿å…¶è¢« Tun è·¯ç”±æµé‡ï¼Œæœªè¢«é…ç½®çš„ç”¨æˆ·ä¸ä¼šè¢« Tun è·¯ç”±æµé‡ï¼Œé»˜è®¤ä¸é™åˆ¶
!!! note ""
    UID è§„åˆ™ä»…åœ¨ Linux ä¸‹è¢«æ”¯æŒ,å¹¶ä¸”éœ€è¦ `auto-route`
## include-uid-range
åŒ…å«çš„ç”¨æˆ·èŒƒå›´ï¼Œä½¿å…¶è¢« Tun è·¯ç”±æµé‡ï¼Œæœªè¢«é…ç½®çš„ç”¨æˆ·ä¸ä¼šè¢« Tun è·¯ç”±æµé‡
## exclude-uid
æ’é™¤ç”¨æˆ·ï¼Œä½¿å…¶é¿å…è¢« Tun è·¯ç”±æµé‡
## exclude-uid-range
æ’é™¤ç”¨æˆ·èŒƒå›´ï¼Œä½¿å…¶é¿å…è¢« Tun è·¯ç”±æµé‡
## include-android-user
åŒ…å«çš„ Android ç”¨æˆ·ï¼Œä½¿å…¶è¢« Tun è·¯ç”±æµé‡ï¼Œæœªè¢«é…ç½®çš„ç”¨æˆ·ä¸ä¼šè¢« Tun è·¯ç”±æµé‡
!!! note ""
    Android ç”¨æˆ·å’Œåº”ç”¨è§„åˆ™ä»…åœ¨ Android ä¸‹è¢«æ”¯æŒ,å¹¶ä¸”éœ€è¦ `auto-route`
| å¸¸ç”¨ç”¨æˆ· | ID  |
| -------- | --- |
| æœºä¸»     | 0   |
| æ‰‹æœºåˆ†èº« | 10  |
| åº”ç”¨å¤šå¼€ | 999 |
## include-package
åŒ…å«çš„ Android åº”ç”¨åŒ…åï¼Œä½¿å…¶è¢« Tun è·¯ç”±æµé‡ï¼Œæœªé…ç½®çš„åº”ç”¨åŒ…ä¸ä¼šè¢« Tun è·¯ç”±æµé‡
## exclude-package
æ’é™¤ Android åº”ç”¨åŒ…åï¼Œä½¿å…¶é¿å…è¢« Tun è·¯ç”±æµé‡
## æ—§å†™æ³•ï¼Œå³å°†åºŸå¼ƒ
### inet4-route-address
å¯ç”¨ `auto-route`æ—¶è·¯ç”±è‡ªå®šä¹‰ç½‘æ®µè€Œä¸æ˜¯é»˜è®¤è·¯ç”±ï¼Œä¸€èˆ¬æ— éœ€é…ç½®ã€‚
### inet6-route-address
å¯ç”¨ `auto-route`æ—¶è·¯ç”±è‡ªå®šä¹‰ç½‘æ®µè€Œä¸æ˜¯é»˜è®¤è·¯ç”±ï¼Œä¸€èˆ¬æ— éœ€é…ç½®ã€‚
### inet4-route-exclude-address
å¯ç”¨ `auto-route` æ—¶æ’é™¤è‡ªå®šä¹‰ç½‘æ®µ
### inet6-route-exclude-address
å¯ç”¨ `auto-route` æ—¶æ’é™¤è‡ªå®šä¹‰ç½‘æ®µ
## Tun çš„åè®®æ ˆç½‘ç»œå›ç¯æµ‹è¯•
ä»ä¸Šåˆ°ä¸‹åˆ†åˆ«ä¸º `system/gvisor/lwip`,ä»…ä¾›å‚è€ƒï¼Œå¹³å°ä¸º linux,Windows å’Œ MacOS å¯èƒ½ä¼šæœ‰å·®å¼‚

---
# é€šç”¨å­—æ®µ
# LISTENERS
```{.yaml linenums="1"}
listeners:
- name: in-name
  type: shadowsocks
  port: 10000
  listen: 0.0.0.0
  rule: sub-rule-1
  proxy: proxy
```
## name
å…¥ç«™åç§°ï¼Œå¯ç”¨äºåŒ¹é…[`å…¥ç«™è§„åˆ™`](../../rules/index.md#in-name)
## type
å…¥ç«™ç±»å‹
## listen
ç›‘å¬åœ°å€
## port
ç›‘å¬ç«¯å£ï¼Œæ”¯æŒä½¿ç”¨ ports æ ¼å¼ï¼Œæ ¼å¼å‚è€ƒ[ç«¯å£èŒƒå›´](../../../handbook//syntax.md#_14)
## rule
ä½¿ç”¨[`å­è§„åˆ™`](../../sub-rule.md)ä½œä¸ºå…¥ç«™åŒ¹é…è§„åˆ™å‡ºç«™ï¼Œä¸ºç©ºåˆ™é»˜è®¤ä½¿ç”¨[`rules`](../../rules/index.md),å¦‚æœæœªæ‰¾åˆ°[`å­è§„åˆ™`](../../sub-rule.md)åˆ™ç›´æ¥ä½¿ç”¨[`rules`](../../rules/index.md)
## proxy
ä½¿ç”¨[`å‡ºç«™ä»£ç†`](../../proxies/index.md)æˆ–[`ç­–ç•¥ç»„`](../../proxy-groups/index.md)ç›´æ¥å‡ºç«™ï¼Œä¸ºç©ºåˆ™é»˜è®¤ä½¿ç”¨[`rules`](../../rules/index.md)
!!! warning ""
    å½“`proxy`ä¸ä¸ºç©ºæ—¶ï¼Œè¿™é‡Œçš„`proxy`åç§°å¿…é¡»åˆæ³•ï¼Œå¦åˆ™ä¼šå‡ºé”™

---
# HTTP
# HTTP
```{.yaml linenums="1"}
listeners:
- name: http-in
  type: http
  port: 7890
  listen: 0.0.0.0
  users:
    - username: username1
      password: password1
  certificate: ./server.crt
  private-key: ./server.key
```
## [é€šç”¨å­—æ®µ](./index.md)
## åè®®é…ç½®
### ç”¨æˆ·éªŒè¯
å¦‚æœä¸å¡«å†™ users é¡¹ï¼Œåˆ™éµä»å…¨å±€ [ç”¨æˆ·éªŒè¯](../../general.md/#_2) è®¾ç½®ï¼Œå¦‚æœå¡«å†™ä¼šå¿½ç•¥å…¨å±€è®¾ç½®ï¼Œå¦‚æƒ³è·³è¿‡è¯¥å…¥ç«™çš„éªŒè¯å¯å¡«å†™ `users: []`

---
# SOCKS
# SOCKS
```{.yaml linenums="1"}
listeners:
- name: socks-in
  type: socks
  port: 7891
  listen: 0.0.0.0
  udp: true
  users:
    - username: username1
      password: password1
  certificate: ./server.crt
  private-key: ./server.key
```
## [é€šç”¨å­—æ®µ](./index.md)
## åè®®é…ç½®
### udp
æ˜¯å¦ç›‘å¬ UDP
### ç”¨æˆ·éªŒè¯
å¦‚æœä¸å¡«å†™ users é¡¹ï¼Œåˆ™éµä»å…¨å±€ [ç”¨æˆ·éªŒè¯](../../general.md/#_2) è®¾ç½®ï¼Œå¦‚æœå¡«å†™ä¼šå¿½ç•¥å…¨å±€è®¾ç½®ï¼Œå¦‚æƒ³è·³è¿‡è¯¥å…¥ç«™çš„éªŒè¯å¯å¡«å†™ users: []

---
# MIXED
# MIXED
```{.yaml linenums="1"}
listeners:
- name: mixed-in
  type: mixed
  port: 7892
  listen: 0.0.0.0
  udp: true
  users:
    - username: username1
      password: password1
  certificate: ./server.crt
  private-key: ./server.key
```
## [é€šç”¨å­—æ®µ](./index.md)
## åè®®é…ç½®
### udp
æ˜¯å¦ç›‘å¬ UDP
### ç”¨æˆ·éªŒè¯
å¦‚æœä¸å¡«å†™ users é¡¹ï¼Œåˆ™éµä»å…¨å±€ [ç”¨æˆ·éªŒè¯](../../general.md/#_2) è®¾ç½®ï¼Œå¦‚æœå¡«å†™ä¼šå¿½ç•¥å…¨å±€è®¾ç½®ï¼Œå¦‚æƒ³è·³è¿‡è¯¥å…¥ç«™çš„éªŒè¯å¯å¡«å†™ users: []

---
# REDIRECT
# REDIRECT
```{.yaml linenums="1"}
listeners:
- name: redir-in
  type: redir
  port: 7893
  listen: 0.0.0.0
```
## [é€šç”¨å­—æ®µ](./index.md)

---
# TPROXY
# TPROXY
```{.yaml linenums="1"}
listeners:
- name: tproxy-in
  type: tproxy
  port: 7894
  listen: 0.0.0.0
  udp: true
```
## [é€šç”¨å­—æ®µ](./index.md)
## åè®®é…ç½®
### udp
æ˜¯å¦ç›‘å¬ UDP

---
# TUN
# TUN
```{.yaml linenums="1"}
listeners:
- name: tun-in
  type: tun
  stack: system
  dns-hijack:
  - 0.0.0.0:53
  # auto-detect-interface: false
  # auto-route: false
  # mtu: 9000
  inet4-address:
  - 198.19.0.1/30
  inet6-address:
  - "fdfe:dcba:9877::1/126"
  # strict-route: true
  # inet4-route-address:ç”±
  # - 0.0.0.0/1
  # - 128.0.0.0/1
  # inet6-route-address:
  # - "::/1"
  # - "8000::/1"
  # endpoint-independent-nat: false
  # include-uid:
  # - 0
  # include-uid-range:
  # - 1000-99999
  # exclude-uid:
  # - 1000
  # exclude-uid-range:
  # - 1000-99999
  # include-android-user:
  # - 0
  # - 10
  # include-package:
  # - com.android.chrome
  # exclude-package:
  # - com.android.captiveportallogin
```

---
# ShadowSocks
# ShadowSocks
```{.yaml linenums="1"}
listeners:
- name: ss-in
  type: shadowsocks
  port: 10001
  listen: 0.0.0.0
  cipher: 2022-blake3-aes-256-gcm
  password: vlmpIPSyHH6f4S8WVPdRIHIlzmB+GIRfoH3aNJ/t9Gg=
  udp: true
```
## [é€šç”¨å­—æ®µ](./index.md)
## åè®®é…ç½®
### cipher
åŠ å¯†æ–¹æ³•
| æ–¹æ³•                          | å¯†ç é•¿åº¦ |
| ----------------------------- | -------- |
| 2022-blake3-aes-128-gcm       | 16       |
| 2022-blake3-aes-256-gcm       | 32       |
| 2022-blake3-chacha20-poly1305 | 32       |
| none                          | /        |
| aes-128-gcm                   | /        |
| aes-192-gcm                   | /        |
| aes-256-gcm                   | /        |
| chacha20-ietf-poly1305        | /        |
| xchacha20-ietf-poly1305       | /        |
### password
| æ–¹æ³• | å¯†ç æ ¼å¼                             |
| ---- | ------------------------------------ |
| none | /                                    |
| 2022 | `openssl rand --base64 <å¯†ç é•¿åº¦>` |
| å…¶ä»– | ä»»æ„å­—ç¬¦ä¸²                           |
### udp
æ˜¯å¦ç›‘å¬ UDP

---
# VMESS
# VMESS
```{.yaml linenums="1"}
listeners:
- name: vmess-in-1
  type: vmess
  port: 10814 # æ”¯æŒä½¿ç”¨portsæ ¼å¼ï¼Œä¾‹å¦‚200,302 or 200,204,401-429,501-503
  listen: 0.0.0.0
  # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rulesï¼Œå¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
  # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®š proxy å¤„ç† (å½“ proxy ä¸ä¸ºç©ºæ—¶ï¼Œè¿™é‡Œçš„ proxy åç§°å¿…é¡»åˆæ³•ï¼Œå¦åˆ™ä¼šå‡ºé”™)
  users:
    - username: 1
      uuid: 9d0cb9d0-964f-4ef6-897d-6c6b3ccf9e68
      alterId: 1
  # ws-path: "/" # å¦‚æœä¸ä¸ºç©ºåˆ™å¼€å¯ websocket ä¼ è¾“å±‚
  # grpc-service-name: "GunService" # å¦‚æœä¸ä¸ºç©ºåˆ™å¼€å¯ grpc ä¼ è¾“å±‚
  # ä¸‹é¢ä¸¤é¡¹å¦‚æœå¡«å†™åˆ™å¼€å¯ tlsï¼ˆéœ€è¦åŒæ—¶å¡«å†™ï¼‰
  # certificate: ./server.crt
  # private-key: ./server.key
  # å¦‚æœå¡«å†™reality-configåˆ™å¼€å¯realityï¼ˆæ³¨æ„ä¸å¯ä¸certificateå’Œprivate-keyåŒæ—¶å¡«å†™ï¼‰
  # reality-config:
  #   dest: test.com:443
  #   private-key: jNXHt1yRo0vDuchQlIP6Z0ZvjT3KtzVI-T4E7RoLJS0 # å¯ç”± mihomo generate reality-keypair å‘½ä»¤ç”Ÿæˆ
  #   short-id:
  #     - 0123456789abcdef
  #   server-names:
  #     - test.com
```

---
# VLESS
# VLESS
```{.yaml linenums="1"}
listeners:
- name: vless-in-1
  type: vless
  port: 10817 # æ”¯æŒä½¿ç”¨portsæ ¼å¼ï¼Œä¾‹å¦‚200,302 or 200,204,401-429,501-503
  listen: 0.0.0.0
  # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rulesï¼Œå¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
  # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®š proxy å¤„ç† (å½“ proxy ä¸ä¸ºç©ºæ—¶ï¼Œè¿™é‡Œçš„ proxy åç§°å¿…é¡»åˆæ³•ï¼Œå¦åˆ™ä¼šå‡ºé”™)
  users:
    - username: 1
      uuid: 9d0cb9d0-964f-4ef6-897d-6c6b3ccf9e68
      flow: xtls-rprx-vision
  # ws-path: "/" # å¦‚æœä¸ä¸ºç©ºåˆ™å¼€å¯ websocket ä¼ è¾“å±‚
  # grpc-service-name: "GunService" # å¦‚æœä¸ä¸ºç©ºåˆ™å¼€å¯ grpc ä¼ è¾“å±‚
  # ä¸‹é¢ä¸¤é¡¹å¦‚æœå¡«å†™åˆ™å¼€å¯ tlsï¼ˆéœ€è¦åŒæ—¶å¡«å†™ï¼‰
  # certificate: ./server.crt
  # private-key: ./server.key
  # å¦‚æœå¡«å†™reality-configåˆ™å¼€å¯realityï¼ˆæ³¨æ„ä¸å¯ä¸certificateå’Œprivate-keyåŒæ—¶å¡«å†™ï¼‰
  reality-config:
    dest: test.com:443
    private-key: jNXHt1yRo0vDuchQlIP6Z0ZvjT3KtzVI-T4E7RoLJS0 # å¯ç”± mihomo generate reality-keypair å‘½ä»¤ç”Ÿæˆ
    short-id:
      - 0123456789abcdef
    server-names:
      - test.com
  ### æ³¨æ„ï¼Œå¯¹äºvless listener, è‡³å°‘éœ€è¦å¡«å†™ â€œcertificateå’Œprivate-keyâ€ æˆ– â€œreality-configâ€ çš„å…¶ä¸­ä¸€é¡¹ ###
```

---
# Trojan
# Trojan
```{.yaml linenums="1"}
listeners:
- name: trojan-in-1
  type: trojan
  port: 10819 # æ”¯æŒä½¿ç”¨portsæ ¼å¼ï¼Œä¾‹å¦‚200,302 or 200,204,401-429,501-503
  listen: 0.0.0.0
  # rule: sub-rule-name1 # é»˜è®¤ä½¿ç”¨ rulesï¼Œå¦‚æœæœªæ‰¾åˆ° sub-rule åˆ™ç›´æ¥ä½¿ç”¨ rules
  # proxy: proxy # å¦‚æœä¸ä¸ºç©ºåˆ™ç›´æ¥å°†è¯¥å…¥ç«™æµé‡äº¤ç”±æŒ‡å®š proxy å¤„ç† (å½“ proxy ä¸ä¸ºç©ºæ—¶ï¼Œè¿™é‡Œçš„ proxy åç§°å¿…é¡»åˆæ³•ï¼Œå¦åˆ™ä¼šå‡ºé”™)
  users:
    - username: 1
      password: 9d0cb9d0-964f-4ef6-897d-6c6b3ccf9e68
  # ws-path: "/" # å¦‚æœä¸ä¸ºç©ºåˆ™å¼€å¯ websocket ä¼ è¾“å±‚
  # grpc-service-name: "GunService" # å¦‚æœä¸ä¸ºç©ºåˆ™å¼€å¯ grpc ä¼ è¾“å±‚
  # ä¸‹é¢ä¸¤é¡¹å¦‚æœå¡«å†™åˆ™å¼€å¯ tlsï¼ˆéœ€è¦åŒæ—¶å¡«å†™ï¼‰
  certificate: ./server.crt
  private-key: ./server.key
  # å¦‚æœå¡«å†™reality-configåˆ™å¼€å¯realityï¼ˆæ³¨æ„ä¸å¯ä¸certificateå’Œprivate-keyåŒæ—¶å¡«å†™ï¼‰
  # reality-config:
  #   dest: test.com:443
  #   private-key: jNXHt1yRo0vDuchQlIP6Z0ZvjT3KtzVI-T4E7RoLJS0 # å¯ç”± mihomo generate reality-keypair å‘½ä»¤ç”Ÿæˆ
  #   short-id:
  #     - 0123456789abcdef
  #   server-names:
  #     - test.com
  # ss-option: # like trojan-go's `shadowsocks` config
  #   enabled: false
  #   method: aes-128-gcm # aes-128-gcm/aes-256-gcm/chacha20-ietf-poly1305
  #   password: "example"
  ### æ³¨æ„ï¼Œå¯¹äºtrojan listener, è‡³å°‘éœ€è¦å¡«å†™ â€œcertificateå’Œprivate-keyâ€ æˆ– â€œreality-configâ€ æˆ– â€œss-optionâ€ çš„å…¶ä¸­ä¸€é¡¹ ###
```

---
# AnyTLS
# AnyTLS
```{.yaml linenums="1"}
listeners:
- name: anytls-in-1
  type: anytls
  port: 10818
  listen: 0.0.0.0
  users:
    username1: password1
    username2: password2
  certificate: ./server.crt
  private-key: ./server.key
  padding-scheme: "" # https://github.com/anytls/anytls-go/blob/main/docs/protocol.md#cmdupdatepaddingscheme
```
[é€šç”¨å­—æ®µ](./index.md)
!!! warning ""
    `certificate` å’Œ `private-key` æ˜¯å¿…è¦çš„
## padding-scheme
å‚é˜… https://github.com/anytls/anytls-go/blob/main/docs/protocol.md#cmdupdatepaddingscheme

---
# TUIC v4
# TUIC V4
```{.yaml linenums="1"}
listeners:
- name: tuicv4-in
  type: tuic
  port: 10003
  listen: 0.0.0.0
  token:
    - TOKEN
  certificate: ./server.crt
  private-key: ./server.key
  congestion-controller: bbr
  max-idle-time: 15000
  authentication-timeout: 1000
  alpn:
    - h3
  max-udp-relay-packet-size: 1500
```

---
# TUIC v5
# TUIC V5
```{.yaml linenums="1"}
listeners:
- name: tuicv5-in
  type: tuic
  port: 10004
  listen: 0.0.0.0
  users:
    UUID1: PASSWORD1
    UUID2: PASSWORD2
  certificate: ./server.crt
  private-key: ./server.key
  congestion-controller: bbr
  max-idle-time: 15000
  authentication-timeout: 1000
  alpn:
    - h3
  max-udp-relay-packet-size: 1500
```

---
# Hysteria2
# Hysteria2
```{.yaml linenums="1"}
listeners:
- name: hy-in
  type: hysteria2
  port: 8443
  listen: 0.0.0.0
  users:
    user1: password1
    user2: password2
  up: 1000
  down: 1000
  ignore-client-bandwidth: false
  obfs: salamander
  obfs-password: password
  masquerade: ""
  alpn:
  - h3
  certificate: ./server.crt
  private-key: ./server.key
```
## [é€šç”¨å­—æ®µ](./index.md)
## åè®®é…ç½®
### users

Hysteria ç”¨æˆ·ä»¥åŠè®¤è¯å¯†ç ï¼Œæ ¼å¼ä¸º`ç”¨æˆ·å: å¯†ç `
!!! note ""
    ç”¨æˆ·åä¸å‚ä¸è®¤è¯,ä»…ç”¨äº[å…¥ç«™è§„åˆ™](../../rules/index.md#in-user)åŒ¹é…
### up/down

Hysteria é€Ÿç‡è®¾ç½®ï¼Œé»˜è®¤ Mbpsï¼Œå…·ä½“å¯å‚è€ƒ [Hysteria æ–‡æ¡£](https://v2.hysteria.network/zh/docs/advanced/Full-Server-Config/#_4)
### ignore-client-bandwidth
å¯ç”¨å€¼ï¼š`true/false`
å¯ç”¨åï¼ŒæœåŠ¡å™¨å°†å¿½ç•¥å®¢æˆ·ç«¯è®¾ç½®çš„ä»»ä½•å¸¦å®½ï¼Œæ°¸è¿œä½¿ç”¨ä¼ ç»Ÿçš„æ‹¥å¡æ§åˆ¶ç®—æ³• (BBR)
### obfs

QUIC æµé‡æ··æ·†å™¨ï¼Œä»…å¯è®¾ä¸º `salamander`,å¦‚æœä¸ºç©ºåˆ™ç¦ç”¨
!!! warning ""
    å¯ç”¨æ··æ·†å°†ä½¿æœåŠ¡å™¨ä¸æ ‡å‡†çš„ QUIC è¿æ¥ä¸å…¼å®¹ï¼Œå¤±å» HTTP/3 ä¼ªè£…çš„èƒ½åŠ›
### obfs-password

QUIC æµé‡æ··æ·†å™¨å¯†ç 
### masquerade
ä¼ªè£… HTTP/3 æµé‡ï¼Œä»…æ”¯æŒ`file`å’Œ`http/https`,å¦‚æœä¸ºç©ºï¼Œåˆ™å§‹ç»ˆè¿”å› 404 Not Found
å…·ä½“å¯å‚è€ƒ [Hysteria æ–‡æ¡£](https://v2.hysteria.network/zh/docs/advanced/Full-Server-Config/#masquerade)
|              | ç¤ºä¾‹                     | æè¿°         |
|--------------|-------------------------|--------------|
| `file`       | `file:///var/www`       | ä½œä¸ºæ–‡ä»¶æœåŠ¡å™¨ |
| `http/https` | `http://127.0.0.1:8080` | ä½œä¸ºåå‘ä»£ç†   |
### alpn

TLS åº”ç”¨å±‚åè®®åå•†åˆ—è¡¨ï¼Œå®¢æˆ·ç«¯éœ€å†™å…¥æœåŠ¡ç«¯ alpn åˆ—è¡¨ä¸­çš„ä¸€ä¸ªï¼Œå¦åˆ™å°†è®¤è¯å¤±è´¥ï¼Œé»˜è®¤ä¸º`h3`
### certificate/private-key

TLS è¯ä¹¦æ–‡ä»¶è·¯å¾„

---
# TUNNEL
# TUNNEL
```{.yaml linenums="1"}
listeners:
- name: tunnel-in
  type: tunnel
  port: 10816
  listen: 0.0.0.0
  network: [tcp, udp]
  target: target.com
```

---
# é€šç”¨å­—æ®µ
# é€šç”¨å­—æ®µ
```{.yaml linenums="1"}
proxies:
- name: "ss"
  type: ss
  server: server
  port: 443
  ip-version: ipv4
  udp: true
  interface-name: eth0
  routing-mark: 1234
  tfo: false
  mptcp: false

  dialer-proxy: ss1

  smux:
    enabled: true
    protocol: smux
    max-connections: 4
    min-streams: 4
    max-streams: 0
    statistic: false
    only-tcp: false
    padding: true
    brutal-opts:
      enabled: true
      up: 50
      down: 100
```
ä»£ç†èŠ‚ç‚¹ï¼Œå†…å®¹ä¸ºæ•°ç»„
## name
å¿…é¡»ï¼Œä»£ç†åç§°ï¼Œä¸å¯é‡å¤
## type
å¿…é¡»ï¼Œä»£ç†èŠ‚ç‚¹ç±»å‹
## server
å¿…é¡»ï¼Œä»£ç†èŠ‚ç‚¹æœåŠ¡å™¨ (åŸŸå/ip)
## port
å¿…é¡»é¡¹ï¼Œä»£ç†èŠ‚ç‚¹ç«¯å£
## ip-version
ä»£ç†è½¯ä»¶å‡ºç«™ä½¿ç”¨çš„ ip ç‰ˆæœ¬ï¼Œå¦‚æœä¸æ˜¯ directï¼Œåˆ™ä¼šå½±å“ server ä¸ºåŸŸåæ—¶ä½¿ç”¨çš„ ip åœ°å€
å¯é€‰ï¼š`dual`/`ipv4`/`ipv6`/`ipv4-prefer`/`ipv6-prefer` ,é»˜è®¤ä½¿ç”¨ `dual`
* ipv4: ä»…ä½¿ç”¨ IPv4
* ipv6: ä»…ä½¿ç”¨ IPv6
* ipv4-prefer: ä¼˜å…ˆä½¿ç”¨ IPv4ï¼Œå¯¹äº TCP ä¼šè¿›è¡ŒåŒæ ˆè§£æï¼Œå¹¶å‘é“¾æ¥ä½†æ˜¯ä¼˜å…ˆä½¿ç”¨ IPv4 é“¾æ¥ï¼ŒUDP åˆ™ä¸ºåŒæ ˆè§£æï¼Œè·å–ç»“æœä¸­çš„ç¬¬ä¸€ä¸ª IPv4
* ipv6-prefer:ä¼˜å…ˆä½¿ç”¨ IPv6ï¼Œå¯¹äº TCP ä¼šè¿›è¡ŒåŒæ ˆè§£æï¼Œå¹¶å‘é“¾æ¥ä½†æ˜¯ä¼˜å…ˆä½¿ç”¨ IPv6 é“¾æ¥ï¼ŒUDP åˆ™ä¸ºåŒæ ˆè§£æï¼Œè·å–ç»“æœä¸­çš„ç¬¬ä¸€ä¸ª IPv6
## udp
æ˜¯å¦å…è®¸ UDP é€šè¿‡ä»£ç†ï¼Œé»˜è®¤ä¸º `false`
!!! note
    æ­¤é€‰é¡¹åœ¨ `TUIC` ç­‰åŸºäº `UDP` çš„åè®®ä»¥åŠ `direct` å’Œ `dns` ç±»å‹ä¸­é»˜è®¤å¼€å¯
## interface-name
æŒ‡å®šèŠ‚ç‚¹ç»‘å®šçš„æ¥å£ï¼Œä»æ­¤æ¥å£å‘èµ·è¿æ¥
## routing-mark
èŠ‚ç‚¹å‘èµ·è¿æ¥æ—¶é™„åŠ çš„è·¯ç”±æ ‡è®°
## tfo
å¯ç”¨ `TCP Fast Open`, ä»…ç”Ÿæ•ˆäº `TCP` åè®®
## mptcp
å¯ç”¨ `TCP Multi Path`, ä»…ç”Ÿæ•ˆäº `TCP` åè®®
## dialer-proxy
æŒ‡å®šå½“å‰ `proxies` é€šè¿‡ `dialer-proxy` å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œå€¼å¯ä»¥ä¸º[ç­–ç•¥ç»„](../proxy-groups/index.md)/[å‡ºç«™ä»£ç†](../proxies/index.md)çš„ `name`
## smux

sing-muxï¼Œä»…é™ä½¿ç”¨ tcp ä¼ è¾“çš„åè®®
### smux.enabled
æ˜¯å¦å¯ç”¨å¤šè·¯å¤ç”¨
### smux.protocol
å¤šè·¯å¤ç”¨åè®®ï¼Œæ”¯æŒå¦‚ä¸‹åè®®ï¼Œé»˜è®¤ä½¿ç”¨ `h2mux`
| åè®®     | æè¿°                                  |
|---------|--------------------------------------|
| `smux`  | <https://github.com/xtaci/smux>      |
| `yamux` | <https://github.com/hashicorp/yamux> |
| `h2mux` | <https://golang.org/x/net/http2>     |
### smux.max-connections
æœ€å¤§è¿æ¥æ•°é‡
ä¸ `max-streams` å†²çª
### smux.min-streams
åœ¨æ‰“å¼€æ–°è¿æ¥ä¹‹å‰ï¼Œè¿æ¥ä¸­çš„æœ€å°å¤šè·¯å¤ç”¨æµæ•°é‡
ä¸ `max-streams` å†²çª
### smux.max-streams
åœ¨æ‰“å¼€æ–°è¿æ¥ä¹‹å‰ï¼Œè¿æ¥ä¸­çš„æœ€å¤§å¤šè·¯å¤ç”¨æµæ•°é‡
ä¸ `max-connections` å’Œ `min-streams` å†²çª
### smux.statistic
æ§åˆ¶æ˜¯å¦å°†åº•å±‚è¿æ¥æ˜¾ç¤ºåœ¨é¢æ¿ä¸­ï¼Œæ–¹ä¾¿æ‰“æ–­åº•å±‚è¿æ¥
### smux.only-tcp
ä»…å…è®¸ tcpï¼Œå¦‚æœè®¾ç½®ä¸º true,smux çš„è®¾ç½®å°†ä¸ä¼šå¯¹ udp ç”Ÿæ•ˆï¼Œudp è¿æ¥ä¼šç›´æ¥èµ°èŠ‚ç‚¹é»˜è®¤ udp åè®®ä¼ è¾“
### smux.padding
å¯ç”¨å¡«å……
### smux.brutal-opts

TCP Brutal è®¾ç½®
#### smux.brutal-opts.enabled
å¯ç”¨ TCP Brutal æ‹¥å¡æ§åˆ¶ç®—æ³•
#### smux.brutal-opts.up/down
ä¸Šä¼ å’Œä¸‹è½½å¸¦å®½ï¼Œä»¥é»˜è®¤ä»¥ Mbps ä¸ºå•ä½

---
# TLSé…ç½®
# TLS é…ç½®
```{.yaml linenums="1"}
proxies:
- name: "tls-example"
  tls: true
  sni: example.com
  servername: example.com
  fingerprint: xxx
  alpn:
  - h2
  - http/1.1
  skip-cert-verify: true
  client-fingerprint: random
  reality-opts:
    public-key: xxxx
    short-id: xxxx
```
## tls
å¯ç”¨ tlsï¼Œä»…é€‚ç”¨äºä½¿ç”¨ `tls` çš„åè®®ï¼Œ`trojan` åè®®å¼ºåˆ¶å¯ç”¨
## sni/servername
æœåŠ¡å™¨åç§°æŒ‡ç¤ºï¼Œåœ¨ [`VMess`](./vmess.md)/[`VLESS`](./vless.md) ä¸­ä¸º `servername`ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™ä¸º `server` ä¸­çš„åœ°å€
## fingerprint
è¯ä¹¦æŒ‡çº¹ï¼Œä»…é€‚ç”¨äºä½¿ç”¨ `tls` çš„åè®®ï¼Œå¯ä½¿ç”¨
```bash
openssl x509 -noout -fingerprint -sha256 -inform pem -in yourcert.pem
```
è·å–
## alpn
æ”¯æŒçš„åº”ç”¨å±‚åè®®åå•†åˆ—è¡¨ï¼ŒæŒ‰ä¼˜å…ˆé¡ºåºæ’åˆ—ã€‚
å¦‚æœä¸¤ä¸ªå¯¹ç­‰ç‚¹éƒ½æ”¯æŒ ALPNï¼Œåˆ™é€‰æ‹©çš„åè®®å°†æ˜¯æ­¤åˆ—è¡¨ä¸­çš„ä¸€ä¸ªï¼Œå¦‚æœæ²¡æœ‰ç›¸äº’æ”¯æŒçš„åè®®åˆ™è¿æ¥å°†å¤±è´¥ã€‚
å‚é˜… [Application-Layer Protocol Negotiation](https://en.wikipedia.org/wiki/Application-Layer_Protocol_Negotiation)
## skip-cert-verify
è·³è¿‡è¯ä¹¦éªŒè¯ï¼Œä»…é€‚ç”¨äºä½¿ç”¨ `tls` çš„åè®®
## client-fingerprint
å®¢æˆ·ç«¯ utls æŒ‡çº¹ï¼Œä»…é€‚ç”¨äº [`VMess`](./vmess.md)/[`VLESS`](./vless.md)/[`Trojan`](./trojan.md) åè®®ï¼Œå¯é€‰é¡¹å‚é˜…[å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹](../general.md#_14)
## reality-opts

reality é…ç½®ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œåˆ™å¯ç”¨ reality
### reality-opts.public-key

reality æœåŠ¡ç«¯ç§é’¥å¯¹åº”çš„å…¬é’¥
### reality-opts.short-id
æœåŠ¡ç«¯ short id ä¹‹ä¸€

---
# ä¼ è¾“å±‚é…ç½®
# ä¼ è¾“å±‚é…ç½®
=== "http"
    ```{.yaml linenums="1"}
    proxies:
    - name: "http-opts-example"
      type: xxxxx
      network: http
      http-opts:
        method: "GET"
        path:
        - '/'
        - '/video'
        headers:
          Connection:
          - keep-alive
    ```
=== "h2"
    ```{.yaml linenums="1"}
    proxies:
    - name: "h2-opts-example"
      type: xxxxx
      network: h2
      h2-opts:
        host:
        - example.com
        path: /
    ```
=== "grpc"
    ```{.yaml linenums="1"}
    proxies:
    - name: "grpc-opts-example"
      type: xxxxx
      network: grpc
      grpc-opts:
        grpc-service-name: example
    ```
=== "ws"
    ```{.yaml linenums="1"}
    proxies:
    - name: "ws-opts-example"
      type: xxxxx
      network: ws
      ws-opts:
        path: /path
        headers:
          Host: example.com
        max-early-data:
        early-data-header-name:
        v2ray-http-upgrade: false
        v2ray-http-upgrade-fast-open: false
    ```
## http-opts
`http` ä¼ è¾“å±‚è®¾ç½®ï¼Œä»…ä¼ è¾“å±‚ä¸º `http` æ—¶ç”Ÿæ•ˆ
### http-opts.method

http è¯·æ±‚æ–¹æ³•
### http-opts.path

http è¯·æ±‚è·¯å¾„
### http-opts.headers

http è¯·æ±‚å¤´
!!! note
    Mihomo çš„ H2 ä¼ è¾“å±‚æœªå®ç°å¤šè·¯å¤ç”¨åŠŸèƒ½ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å¤šè·¯å¤ç”¨ï¼Œåœ¨ Mihomo ä¸­æ›´å»ºè®®ä½¿ç”¨ gRPC åè®®ï¼Œæˆ–è€… sing-mux
## h2-opts
`h2` ä¼ è¾“å±‚è®¾ç½®ï¼Œä»…ä¼ è¾“å±‚ä¸º `h2` æ—¶ç”Ÿæ•ˆ
### h2-opts.host
ä¸»æœºåŸŸååˆ—è¡¨ï¼Œå¦‚æœè®¾ç½®ï¼Œå®¢æˆ·ç«¯å°†éšæœºé€‰æ‹©ï¼ŒæœåŠ¡å™¨å°†éªŒè¯
### h2-opts.path

http è¯·æ±‚è·¯å¾„
## grpc-opts
`grpc` ä¼ è¾“å±‚è®¾ç½®ï¼Œä»…ä¼ è¾“å±‚ä¸º `grpc` æ—¶ç”Ÿæ•ˆ
### grpc-opts.grpc-service-name

gRPC æœåŠ¡åç§°
## ws-opts
`ws` ä¼ è¾“å±‚è®¾ç½®ï¼Œä»…ä¼ è¾“å±‚ä¸º `ws` æ—¶ç”Ÿæ•ˆ
### ws-opts.path
è¯·æ±‚è·¯å¾„
### ws-opts.headers
è¯·æ±‚å¤´
### ws-opts.max-early-data

Early Data é¦–åŒ…é•¿åº¦é˜ˆå€¼
### ws-opts.early-data-header-name
### ws-opts.v2ray-http-upgrade
ä½¿ç”¨ http upgrade
### ws-opts.v2ray-http-upgrade-fast-open
å¯ç”¨ http upgrade çš„ fast open

---
# dialer-proxy
# dialer-proxy
```{.yaml linenums="1"}
proxies:
- name: "ss1"
  dialer-proxy: dialer
  ...

- name: "ss2"
  ...

proxy-groups:
- name: dialer
  type: select
  proxies:
  - ss2
```
æŒ‡å®šå½“å‰ `proxies` é€šè¿‡ `dialer-proxy` å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œå€¼å¯ä»¥ä¸º[ç­–ç•¥ç»„](../proxy-groups/index.md)/[å‡ºç«™ä»£ç†](../proxies/index.md)çš„ `name`
ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œss1 é€šè¿‡ ss2 å»ºç«‹è¿æ¥
å½“é€šè¿‡ ss1 ä»£ç†æ—¶ï¼Œå°±ç»„æˆäº†ä¸€æ¡ `å…§æ ¸ ---ss1--> ss2åŒ…è£å™¨ ===ss2==> ss2æœå‹™ç«¯ ---ss1--> ss1æœå‹™ç«¯ --> ç›®æ ‡` çš„ä»£ç†é“¾

---
# å†…ç½®ä»£ç†ç­–ç•¥
# é¢„ç½®å‡ºç«™
## DIRECT
ç›´è¿ï¼Œæ•°æ®ç›´æ¥å‡ºç«™
## REJECT
æ‹’ç»ï¼Œæ‹¦æˆªæ•°æ®å‡ºç«™
## REJECT-DROP
æ‹’ç»ï¼Œä¸`REJECT`ä¸åŒçš„æ˜¯ï¼Œè¯¥ç­–ç•¥å°†é™é»˜æŠ›å¼ƒè¯·æ±‚
## PASS
ç»•è¿‡ï¼Œä¼šä½¿åŒ¹é…è§„åˆ™æ—¶è·³è¿‡æ­¤è§„åˆ™
## COMPATIBLE
å…¼å®¹ï¼Œåœ¨ç­–ç•¥ç»„ç­›é€‰ä¸å‡ºèŠ‚ç‚¹æ—¶å‡ºç°ï¼Œç­‰æ•ˆ `DIRECT`

---
# DIRECT
# DIRECT
```{.yaml linenums="1"}
proxies:
- name: "direct"
  type: direct
  udp: true
  ip-version: ipv4
  interface-name: eth0
  routing-mark: 1234
```
[é€šç”¨å­—æ®µ](./index.md)

---
# DNS
# DNS
```{.yaml linenums="1"}
proxies:
- name: "dns-out"
  type: dns
```
`dns`å‡ºç«™ä¼šå°†è¯·æ±‚åŠ«æŒåˆ°å†…éƒ¨[dns](../dns/index.md)æ¨¡å—ï¼Œæ‰€æœ‰è¯·æ±‚å‡åœ¨å†…éƒ¨å¤„ç†

---
# HTTP
# HTTP
```{.yaml linenums="1"}
proxies:
- name: "http"
  type: http
  server: server
  port: 443
  # username: username
  # password: password
  # tls: true # https
  # skip-cert-verify: true
  # sni: custom.com
  # fingerprint: xxxx # åŒ experimental.fingerprints ä½¿ç”¨ sha256 æŒ‡çº¹,é…ç½®åè®®ç‹¬ç«‹çš„æŒ‡çº¹,å°†å¿½ç•¥ experimental.fingerprints
  # ip-version: dual
  headers:
```
[é€šç”¨å­—æ®µ](./index.md)
[TLS å­—æ®µ](./tls.md)

---
# SOCKS
# SOCKS
```{.yaml linenums="1"}
proxies:
- name: "socks"
  type: socks5
  server: server
  port: 443
  # username: username
  # password: password
  # tls: true
  # fingerprint: xxxx
  # skip-cert-verify: true
  # udp: true
  # ip-version: ipv6
```
[é€šç”¨å­—æ®µ](./index.md)
[TLS å­—æ®µ](./tls.md)

---
# Shadowsocks
# Shadowsocks
```{.yaml linenums="1"}
proxies:
- name: "ss1"
  type: ss
  server: server
  port: 443
  cipher: aes-128-gcm
  password: "password"
  udp: true
  udp-over-tcp: false
  udp-over-tcp-version: 2
  ip-version: ipv4
  plugin: obfs
  plugin-opts:
    mode: tls
  smux:
    enabled: false
```
[é€šç”¨å­—æ®µ](./index.md)
## Cipher
=== "AES"
    |          æ–¹æ³•               |                            |                            |
    |----------------------------|----------------------------|----------------------------|
    | aes-128-ctr                | aes-192-ctr                | aes-256-ctr                |
    | aes-128-cfb                | aes-192-cfb                | aes-256-cfb                |
    | aes-128-gcm                | aes-192-gcm                | aes-256-gcm                |
    | aes-128-ccm                | aes-192-ccm                | aes-256-ccm                |
    | aes-128-gcm-siv            |                            | aes-256-gcm-siv            |
=== "CHACHA"
    | æ–¹æ³•                           |                                |
    |--------------------------------|--------------------------------|
    | chacha20-ietf                  |                                |
    | chacha20                       | xchacha20                      |
    | chacha20-ietf-poly1305         | xchacha20-ietf-poly1305        |
    | chacha8-ietf-poly1305          | xchacha8-ietf-poly1305         |
=== "2022 Blake3"
    | æ–¹æ³•                                |
    |-------------------------------------|
    | 2022-blake3-aes-128-gcm             |
    | 2022-blake3-aes-256-gcm             |
    | 2022-blake3-chacha20-poly1305       |
=== "LEA"
    | æ–¹æ³•               |
    |--------------------|
    | lea-128-gcm        |
    | lea-192-gcm        |
    | lea-256-gcm        |
=== "å…¶ä»–"
    | æ–¹æ³•               |
    |--------------------|
    | rabbit128-poly1305|
    | aegis-128l         |
    | aegis-256          |
    | aez-384            |
    | deoxys-ii-256-128  |
    | rc4-md5            |
    | none               |
## password

Shadowsocks å¯†ç 
## udp-over-tcp
å¯ç”¨ UDP over TCPï¼Œé»˜è®¤ false
## udp-over-tcp-version

UDP over TCP çš„åè®®ç‰ˆæœ¬ï¼Œé»˜è®¤ 1ã€‚å¯é€‰å€¼ 1/2ã€‚
## æ’ä»¶
### plugin
æ’ä»¶ï¼Œæ”¯æŒ `obfs`/`v2ray-plugin`/`gost-plugin`/`shadow-tls`/`restls`
### plugin-opts
æ’ä»¶è®¾ç½®
=== "obfs"
    ```{.yaml linenums="1"}
    plugin: obfs
    plugin-opts:
      mode: tls
      host: bing.com
    ```
=== "v2ray-plugin"
    ```{.yaml linenums="1"}
      plugin: v2ray-plugin
      plugin-opts:
        mode: websocket # no QUIC now
          # tls: true # wss
          # å¯ä½¿ç”¨ openssl x509 -noout -fingerprint -sha256 -inform pem -in yourcert.pem è·å–
          # é…ç½®æŒ‡çº¹å°†å®ç° SSL Pining æ•ˆæœ
          # fingerprint: xxxx
          # skip-cert-verify: true
          # host: bing.com
          # path: "/"
          # mux: true
          # headers:
          #   custom: value
          # v2ray-http-upgrade: false
    ```
=== "gost-plugin"
    ```{.yaml linenums="1"}
      plugin: gost-plugin
      plugin-opts:
        mode: websocket
          # tls: true # wss
          # å¯ä½¿ç”¨ openssl x509 -noout -fingerprint -sha256 -inform pem -in yourcert.pem è·å–
          # é…ç½®æŒ‡çº¹å°†å®ç° SSL Pining æ•ˆæœ
          # fingerprint: xxxx
          # skip-cert-verify: true
          # host: bing.com
          # path: "/"
          # mux: true
          # headers:
          #   custom: value
    ```
=== "shadow-tls"
    ```{.yaml linenums="1"}
      plugin: shadow-tls
      client-fingerprint: chrome
      plugin-opts:
        host: "cloud.tencent.com"
        password: "shadow_tls_password"
        version: 2 # support 1/2/3
    ```
=== "restls"
    ```{.yaml linenums="1"}
      plugin: restls
      client-fingerprint: chrome  # å¯ä»¥æ˜¯chrome, ios, firefox, safariä¸­çš„ä¸€ä¸ª
      plugin-opts:
        host: "www.microsoft.com" # åº”å½“æ˜¯ä¸€ä¸ªTLS 1.3 æœåŠ¡å™¨
        password: [YOUR_RESTLS_PASSWORD]
        version-hint: "tls13"
        # Control your post-handshake traffic through restls-script
        # Hide proxy behaviors like "tls in tls".
        # see https://github.com/3andne/restls/blob/main/Restls-Script:%20Hide%20Your%20Proxy%20Traffic%20Behavior.md
        # ç”¨restlså‰§æœ¬æ¥æ§åˆ¶æ¡æ‰‹åçš„è¡Œä¸ºï¼Œéšè—"tls in tls"ç­‰ç‰¹å¾
        # è¯¦æƒ…ï¼šhttps://github.com/3andne/restls/blob/main/Restls-Script:%20%E9%9A%90%E8%97%8F%E4%BD%A0%E7%9A%84%E4%BB%A3%E7%90%86%E8%A1%8C%E4%B8%BA.md
        restls-script: "300?100<1,400~100,350~100,600~100,300~200,300~100"
    ```

---
# ShadowsocksR
# ShadowsocksR
```{.yaml linenums="1"}
proxies:
  - name: "ssr"
    type: ssr
    server: server
    port: 443
    cipher: chacha20-ietf
    password: "password"
    obfs: tls1.2_ticket_auth
    protocol: auth_sha1_v4
    # obfs-param: domain.tld
    # protocol-param: "#"
    # udp: true
```
[é€šç”¨å­—æ®µ](./index.md)

---
# Mieru
# Mieru
```{.yaml linenums="1"}
proxies:
  - name: mieru
    type: mieru
    server: server
    port: 2999
    port-range: 2090-2099
    transport: TCP
    username: user
    password: password
    multiplexing: MULTIPLEXING_LOW
```
[é€šç”¨å­—æ®µ](./index.md)
## port-range
ç«¯å£èŒƒå›´ï¼Œä¸å¯ä¸ `port` åŒæ—¶ä¹¦å†™
## transport
åè®®ï¼Œç›®å‰åªæ”¯æŒ `TCP`
## multiplexing
å¤šè·¯å¤ç”¨ï¼Œå¯ä»¥ä½¿ç”¨çš„å€¼åŒ…æ‹¬ `MULTIPLEXING_OFF`, `MULTIPLEXING_LOW`, `MULTIPLEXING_MIDDLE`, `MULTIPLEXING_HIGH`ã€‚å…¶ä¸­ `MULTIPLEXING_OFF` ä¼šå…³é—­å¤šè·¯å¤ç”¨åŠŸèƒ½ã€‚é»˜è®¤å€¼ä¸º `MULTIPLEXING_LOW`

---
# Snell
# Snell
```{.yaml linenums="1"}
proxies
- name: "snell"
  type: snell
  server: server
  port: 44046
  psk: yourpsk
  version: 3
  obfs-opts:
    mode: http
    host: bing.com
```
[é€šç”¨å­—æ®µ](./index.md)
## psk
å¿…é¡»ï¼ŒSnell é¢„å…±äº«å¯†é’¥
## version

snell ç‰ˆæœ¬ï¼Œä»…æ”¯æŒ v1-3ï¼Œé»˜è®¤ä¸º v1ï¼Œä»… v3 æ”¯æŒ udp
## obfs-opts

Snell æ··æ·†è®¾ç½®
### obfs-opts.mode

Snell æ··æ·†æ¨¡å¼ï¼Œæ”¯æŒ http/tls
### obfs-opts.host

Snell æ··æ·†åŸŸå

---
# VMess
# VMess
```{.yaml linenums="1"}
proxies:
- name: "vmess"
  type: vmess
  server: server
  port: 443
  udp: true
  uuid: uuid
  alterId: 0
  cipher: auto
  packet-encoding: packetaddr
  global-padding: false
  authenticated-length: false

  tls: true
  servername: example.com
  alpn:
  - h2
  - http/1.1
  fingerprint: xxxx
  client-fingerprint: chrome
  skip-cert-verify: true
  reality-opts:
    public-key: xxxx
    short-id: xxxx

  network: tcp

  smux:
    enabled: false
```
[é€šç”¨å­—æ®µ](./index.md)
[TLS å­—æ®µ](./tls.md)
## uuid
å¿…é¡»ï¼ŒVMess ç”¨æˆ· ID
## alterId
å¿…é¡»ï¼Œå¦‚æœä¸ä¸º 0ï¼Œåˆ™å¯ç”¨æ—§åè®®
## cipher
å¿…é¡»ï¼ŒåŠ å¯†æ–¹æ³•ï¼Œæ”¯æŒ `auto`/`none`/`zero`/`aes-128-gcm`/`chacha20-poly1305`
## packet-encoding

UDP åŒ…ç¼–ç ï¼Œä¸ºç©ºåˆ™ä½¿ç”¨åŸå§‹ç¼–ç ï¼Œå¯é€‰ `packetaddr` (ç”± `v2ray 5+` æ”¯æŒ)/`xudp` (ç”± `xray` æ”¯æŒ)
## global-padding
åè®®å‚æ•°ã€‚å¦‚æœå¯ç”¨ä¼šéšæœºæµªè´¹æµé‡ï¼ˆåœ¨ v2ray ä¸­é»˜è®¤å¯ç”¨å¹¶ä¸”æ— æ³•ç¦ç”¨ï¼‰ã€‚
## authenticated-length
åè®®å‚æ•°ã€‚å¯ç”¨é•¿åº¦å—åŠ å¯†
## network
ä¼ è¾“å±‚ï¼Œæ”¯æŒ ws/http/h2/grpcï¼Œä¸é…ç½®æˆ–é…ç½®å…¶ä»–å€¼åˆ™ä¸º tcp
å‚é˜… [ä¼ è¾“å±‚é…ç½®](./transport.md)

---
# VLESS
# VLESS
```{.yaml linenums="1"}
proxies:
- name: "vless"
  type: vless
  server: server
  port: 443
  udp: true
  uuid: uuid
  flow: xtls-rprx-vision
  packet-encoding: xudp

  tls: true
  servername: example.com
  alpn:
  - h2
  - http/1.1
  fingerprint: xxxx
  client-fingerprint: chrome
  skip-cert-verify: true
  reality-opts:
    public-key: xxxx
    short-id: xxxx

  network: tcp

  smux:
    enabled: false
```
!!! note
    Meta çš„ `xtls-*` æµæ§å®é™…ä¸Šä¸ Xray-core ä¸­çš„ `xtls-*-udp443` ç­‰æ•ˆï¼Œå¦‚éœ€æ‹¦æˆª 443 ç«¯å£çš„ UDP æµé‡ï¼Œè¯·ä½¿ç”¨é€»è¾‘è§„åˆ™ï¼š`AND,((NETWORK,UDP),(DST-PORT,443)),REJECT`
[é€šç”¨å­—æ®µ](./index.md)
[TLS å­—æ®µ](./tls.md)
## uuid
å¿…é¡»ï¼ŒVLESS ç”¨æˆ· ID
## flow

VLESS å­åè®®ï¼Œå¯ç”¨å€¼ä¸º `xtls-rprx-vision`
## packet-encoding

UDP åŒ…ç¼–ç ï¼Œä¸ºç©ºåˆ™ä½¿ç”¨åŸå§‹ç¼–ç ï¼Œå¯é€‰ `packetaddr` (ç”± `v2ray 5+` æ”¯æŒ)/ `xudp` (ç”± `xray` æ”¯æŒ)
## network
ä¼ è¾“å±‚ï¼Œæ”¯æŒ ws/http/h2/grpcï¼Œä¸é…ç½®æˆ–é…ç½®å…¶ä»–å€¼åˆ™ä¸º tcp
å‚é˜… [ä¼ è¾“å±‚é…ç½®](./transport.md)

---
# Trojan
# Trojan
```{.yaml linenums="1"}
proxies:
- name: "trojan"
  type: trojan
  server: server
  port: 443
  password: yourpsk
  udp: true

  sni: example.com
  alpn:
  - h2
  - http/1.1
  client-fingerprint: random
  fingerprint: xxxx
  skip-cert-verify: true
  ss-opts:
    enabled: false
    method: aes-128-gcm
    password: "example"
  reality-opts:
    public-key: xxxx
    short-id: xxxx

  network: tcp

  smux:
    enabled: false
```
[é€šç”¨å­—æ®µ](./index.md)
[TLS å­—æ®µ](./tls.md)
## password
å¿…é¡»ï¼Œtrojan æœåŠ¡å™¨å¯†ç 
## ss-opts
### ss-opfs.enabled
å¯ç”¨ trojan-go çš„ shadowsocks AEAD åŠ å¯†
### ss-opfs.method
åŠ å¯†æ–¹æ³•ï¼Œæ”¯æŒ aes-128-gcm/aes-256-gcm/chacha20-ietf-poly1305
### ss-opfs.password

trojan-go çš„ shadowsocks AEAD åŠ å¯†å¯†ç 
## network
ä¼ è¾“å±‚ï¼Œæ”¯æŒ ws/grpcï¼Œä¸é…ç½®æˆ–é…ç½®å…¶ä»–å€¼åˆ™ä¸º tcp
å‚é˜… [ä¼ è¾“å±‚é…ç½®](./transport.md)

---
# AnyTLS
# AnyTLS
```{.yaml linenums="1"}
proxies:
- name: anytls
  type: anytls
  server: 1.2.3.4
  port: 443
  password: "<your password>"
  client-fingerprint: chrome
  udp: true
  idle-session-check-interval: 30
  idle-session-timeout: 30
  min-idle-session: 0
  sni: "example.com"
  alpn:
    - h2
    - http/1.1
  skip-cert-verify: true
```
[é€šç”¨å­—æ®µ](./index.md)
[TLS å­—æ®µ](./tls.md)
## idle-session-check-interval
æ£€æŸ¥ç©ºé—²ä¼šè¯çš„æ—¶é—´é—´éš”ã€‚é»˜è®¤å€¼ï¼š30 ç§’ã€‚
## idle-session-timeout
åœ¨æ£€æŸ¥ä¸­ï¼Œå…³é—­é—²ç½®æ—¶é—´è¶…è¿‡æ­¤å€¼çš„ä¼šè¯ã€‚é»˜è®¤å€¼ï¼š30 ç§’ã€‚
## min-idle-session
åœ¨æ£€æŸ¥ä¸­ï¼Œè‡³å°‘å‰ n ä¸ªç©ºé—²ä¼šè¯ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚é»˜è®¤å€¼ï¼šn=0

---
# Hysteria
# Hysteria
```{.yaml linenums="1"}
proxies:
- name: "hysteria"
  type: hysteria
  server: server.com
  port: 443
  # ports: 1000,2000-3000,4000 # port ä¸å¯çœç•¥
  auth-str: yourpassword
  # obfs: obfs_str
  # alpn:
  #   - h3
  protocol: udp # æ”¯æŒ udp/wechat-video/faketcp
  up: "30 Mbps" # è‹¥ä¸å†™å•ä½,é»˜è®¤ä¸º Mbps
  down: "200 Mbps" # è‹¥ä¸å†™å•ä½,é»˜è®¤ä¸º Mbps
  # sni: server.com
  # skip-cert-verify: false
  # recv-window-conn: 12582912
  # recv-window: 52428800
  # ca: "./my.ca"
  # ca-str: "xyz"
  # disable_mtu_discovery: false
  # fingerprint: xxxx
  # fast-open: true # å¯ç”¨ Fast Open (é™ä½è¿æ¥å»ºç«‹å»¶è¿Ÿ),é»˜è®¤ä¸º false
```
[é€šç”¨å­—æ®µ](./index.md)

---
# Hysteria2
# Hysteria2
[é…ç½®å‚è€ƒ](https://hysteria.network/zh/docs/advanced-usage/#%e5%ae%a2%e6%88%b7%e7%ab%af)
```{.yaml linenums="1"}
proxies:
- name: "hysteria2"
  type: hysteria2
  server: server.com
  port: 443
  ports: 443-8443
  password: yourpassword
  up: "30 Mbps"
  down: "200 Mbps"
  obfs: salamander # é»˜è®¤ä¸ºç©ºï¼Œå¦‚æœå¡«å†™åˆ™å¼€å¯obfsï¼Œç›®å‰ä»…æ”¯æŒsalamander
  obfs-password: yourpassword

  sni: server.com
  skip-cert-verify: false
  fingerprint: xxxx
  alpn:
    - h3
  ca: "./my.ca"
  ca-str: "xyz"
  ###quic-goç‰¹æ®Šé…ç½®é¡¹ï¼Œä¸è¦éšæ„ä¿®æ”¹é™¤éä½ çŸ¥é“ä½ åœ¨å¹²ä»€ä¹ˆ###
  # initial-stream-receive-windowï¼š 8388608
  # max-stream-receive-windowï¼š 8388608
  # initial-connection-receive-windowï¼š 20971520
  # max-connection-receive-windowï¼š 20971520
```
[é€šç”¨å­—æ®µ](./index.md)
[TLS å­—æ®µ](./tls.md)
## ports
é…ç½®åˆ™å¯ç”¨ç«¯å£è·³è·ƒï¼Œå¿½ç•¥`port`ï¼Œæ ¼å¼å‚è€ƒ[ç«¯å£èŒƒå›´](../../handbook/syntax.md#_14)
## password
è®¤è¯å¯†ç 
## up/down

brutal é€Ÿç‡æ§åˆ¶ï¼Œè‹¥ä¸å†™å•ä½ï¼Œé»˜è®¤ä¸º Mbps
## obfs

QUIC æµé‡æ··æ·†å™¨ç±»å‹ï¼Œä»…å¯è®¾ä¸º `salamander`ï¼Œå¦‚æœä¸ºç©ºåˆ™ç¦ç”¨
## obfs-password

QUIC æµé‡æ··æ·†å™¨å¯†ç 

---
# TUIC
# TUIC
```{.yaml linenums="1"}
proxies:
- name: tuic
  server: www.example.com
  port: 10443
  type: tuic
  token: TOKEN
  uuid: 00000000-0000-0000-0000-000000000001
  password: PASSWORD_1
  # ip: 127.0.0.1
  # heartbeat-interval: 10000
  # alpn: [h3]
  disable-sni: true
  reduce-rtt: true
  request-timeout: 8000
  udp-relay-mode: native
  # congestion-controller: bbr
  # max-udp-relay-packet-size: 1500
  # fast-open: true
  # skip-cert-verify: true
  # max-open-streams: 20
  # sni: example.com
```
[é€šç”¨å­—æ®µ](./index.md)
[TLS å­—æ®µ](./tls.md)
## token
å¿…é¡»ï¼Œç”¨äº TUIC V4 çš„ç”¨æˆ·æ ‡è¯†ï¼Œä½¿ç”¨ TUIC V5 æ—¶ä¸å¯ä¹¦å†™
## uuid
å¿…é¡»ï¼Œç”¨äº TUICV5 çš„ç”¨æˆ·å”¯ä¸€è¯†åˆ«ç ï¼Œä½¿ç”¨ TUIC V4 æ—¶ä¸å¯ä¹¦å†™
## password
å¿…é¡»ï¼Œç”¨äº TUICV5 çš„ç”¨æˆ·å¯†ç ï¼Œä½¿ç”¨ TUIC V4 æ—¶ä¸å¯ä¹¦å†™
## ip
ç”¨äºè¦†ç›–â€œserverâ€é€‰é¡¹ä¸­è®¾ç½®çš„æœåŠ¡å™¨åœ°å€çš„ DNS æŸ¥æ‰¾ç»“æœ
## heartbeat-interval
å‘é€ä¿æŒè¿æ¥æ´»åŠ¨çš„å¿ƒè·³åŒ…çš„é—´éš”æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’
## disable-sni
è®¾ç½®æ˜¯å¦åœ¨ TLS æ¡æ‰‹ä¸­ç¦ç”¨ SNIï¼ˆæœåŠ¡å™¨åç§°æŒ‡ç¤ºï¼‰SNI ç”¨äºåœ¨åŒä¸€ IP åœ°å€ä¸Šæ‰¿è½½å¤šä¸ª HTTPS ç«™ç‚¹
## reduce-rtt
è®¾ç½®æ˜¯å¦åœ¨å®¢æˆ·ç«¯å¯ç”¨ QUIC çš„ 0-RTT æ¡æ‰‹è¿™å¯ä»¥å‡å°‘è¿æ¥å»ºç«‹æ—¶é—´ï¼Œä½†å¯èƒ½å¢åŠ é‡æ”¾æ”»å‡»çš„é£é™©
## request-timeout
è®¾ç½®å»ºç«‹åˆ° TUIC ä»£ç†æœåŠ¡å™¨çš„è¿æ¥çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’
## udp-relay-mode
è®¾ç½® UDP æ•°æ®åŒ…ä¸­ç»§æ¨¡å¼ï¼Œå¯ä»¥æ˜¯ `native`/`quic`
## congestion-controller
è®¾ç½®æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼Œå¯é€‰é¡¹ä¸º `cubic`/`new_reno`/`bbr`
## max-udp-relay-packet-size
è®¾ç½®æœ€å¤§çš„ UDP æ•°æ®åŒ…ä¸­ç»§å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚
## fast-open
è®¾ç½®æ˜¯å¦å¯ç”¨ Fast Openï¼Œè¿™å¯ä»¥å‡å°‘è¿æ¥å»ºç«‹æ—¶é—´
## max-open-streams
è®¾ç½®æœ€å¤§æ‰“å¼€æµçš„æ•°é‡è¿‡å¤šçš„æ‰“å¼€æµå¯èƒ½ä¼šå½±å“æ€§èƒ½

---
# WireGuard
# WireGuard
## ç®€åŒ–å†™æ³•
å¦‚æœåªæœ‰ä¸€ä¸ª peerï¼Œå¯ä»¥ä½¿ç”¨ç®€åŒ–å†™æ³•ã€‚
```{.yaml linenums="1"}
proxies:
- name: "wg"
  type: wireguard
  private-key: eCtXsJZ27+4PbhDkHnB923tkUn2Gj59wZw5wFA75MnU=
  server: 162.159.192.1
  port: 2480
  ip: 172.16.0.2
  ipv6: fd01:5ca1:ab1e:80fa:ab85:6eea:213f:f4a5
  public-key: Cr8hWlKvtDt7nrvf+f0brNQQzabAqrjfBvas9pmowjo=
  allowed-ips: ['0.0.0.0/0']
  # pre-shared-key: 31aIhAPwktDGpH4JDhA8GNvjFXEf/a6+UaQRyOAiyfM=
  # reserved: [209,98,59]  # å­—ç¬¦ä¸²æ ¼å¼ä¹Ÿæ˜¯åˆæ³•çš„ï¼Œå¦‚"U4An"
  udp: true
  # mtu: 1408
  # dialer-proxy: "ss1"  # ä¸€ä¸ªå‡ºç«™ä»£ç†çš„æ ‡è¯†ã€‚å½“å€¼ä¸ä¸ºç©ºæ—¶ï¼Œå°†ä½¿ç”¨æŒ‡å®šçš„ proxy/proxy-group å‘å‡ºè¿æ¥
  # remote-dns-resolve: true # å¼ºåˆ¶dnsè¿œç¨‹è§£æï¼Œé»˜è®¤å€¼ä¸ºfalse
  # dns: [ 1.1.1.1, 8.8.8.8 ] # ä»…åœ¨remote-dns-resolveä¸ºtrueæ—¶ç”Ÿæ•ˆ
  # å¦‚æœå­˜åœ¨åˆ™å¼€å¯AmneziaWGåŠŸèƒ½
  # amnezia-wg-option:
  #   jc: 5
  #   jmin: 500
  #   jmax: 501
  #   s1: 30
  #   s2: 40
  #   h1: 123456
  #   h2: 67543
  #   h4: 32345
  #   h3: 123123
```
## å®Œæ•´å†™æ³•
å®Œæ•´å†™æ³•å¯ä»¥æŒ‡å®šå¤šä¸ª peerã€‚
å¦‚æœä½¿ç”¨å¤šä¸ª peerï¼Œæ¯ä¸€ä¸ª peer çš„`allowed-ips`éœ€è¦åšåŒºåˆ†ï¼›æ­¤æ—¶é¡¶å±‚æ®µè½çš„`server, port, public-key, pre-shared-key, reserved`ç­‰å­—æ®µå‡ä¼šè¢«å¿½ç•¥ï¼Œä¸è¿‡`private-key`ä»ç„¶åœ¨é¡¶å±‚æŒ‡å®šã€‚
```{.yaml linenums="1"}
proxies:
- name: "wg"
  type: wireguard
  ip: 172.16.0.2
  ipv6: fd01:5ca1:ab1e:80fa:ab85:6eea:213f:f4a5
  private-key: eCtXsJZ27+4PbhDkHnB923tkUn2Gj59wZw5wFA75MnU=
  peers:
    - server: 162.159.192.1
      port: 2480
      public-key: Cr8hWlKvtDt7nrvf+f0brNQQzabAqrjfBvas9pmowjo=
      allowed-ips: ['0.0.0.0/0']
      # pre-shared-key: 31aIhAPwktDGpH4JDhA8GNvjFXEf/a6+UaQRyOAiyfM=
      # reserved: [209,98,59]  # å­—ç¬¦ä¸²æ ¼å¼ä¹Ÿæ˜¯åˆæ³•çš„ï¼Œå¦‚"U4An"
  udp: true
  # mtu: 1408
  # dialer-proxy: "ss1"  # ä¸€ä¸ªå‡ºç«™ä»£ç†çš„æ ‡è¯†ã€‚å½“å€¼ä¸ä¸ºç©ºæ—¶ï¼Œå°†ä½¿ç”¨æŒ‡å®šçš„ proxy/proxy-group å‘å‡ºè¿æ¥
  # remote-dns-resolve: true # å¼ºåˆ¶dnsè¿œç¨‹è§£æï¼Œé»˜è®¤å€¼ä¸ºfalse
  # dns: [ 1.1.1.1, 8.8.8.8 ] # ä»…åœ¨remote-dns-resolveä¸ºtrueæ—¶ç”Ÿæ•ˆ
```
[é€šç”¨å­—æ®µ](./index.md)
### ip
æœ¬æœºåœ¨ Wireguard ç½‘ç»œä¸­ä½¿ç”¨çš„ IPv4 åœ°å€
### ipv6
å¯é€‰å­—æ®µï¼Œæœ¬æœºåœ¨ Wireguard ç½‘ç»œä¸­ä½¿ç”¨çš„ IPv6 åœ°å€
### private-key

base64 ç¼–ç çš„ Wireguard å®¢æˆ·ç«¯ç§é’¥
å¯ä»¥ä½¿ç”¨`wg genkey | tee privatekey | wg pubkey > publickey`å‘½ä»¤ç”Ÿæˆä¸€å¯¹å¯ç”¨çš„å…¬ç§é’¥æ–‡ä»¶
### public-key

base64 ç¼–ç çš„ Wireguard æœåŠ¡ç«¯å…¬é’¥
### allowed-ips
å¯é€‰å­—æ®µï¼Œé™åˆ¶å®¢æˆ·ç«¯çš„å“ªäº› IP æ®µçš„æµé‡ç”±æœåŠ¡ç«¯è¿›è¡Œè½¬å‘ã€‚ä¸€èˆ¬æƒ…å†µä¸‹å¯å¡«`['0.0.0.0/0']`
### pre-shared-key
å¯é€‰å­—æ®µï¼Œé¢„å…±äº«å¯†é’¥
### reserved
å¯é€‰å­—æ®µï¼ŒWireguard åè®®ä¿ç•™å­—æ®µçš„å€¼ï¼Œéƒ¨åˆ† WARP èŠ‚ç‚¹éœ€è¦ä½¿ç”¨
### mtu
å¯é€‰å­—æ®µï¼Œè®¾ç½® MTU å€¼
### remote-dns-resolve
å¯é€‰å­—æ®µï¼Œæ˜¯å¦å¼ºåˆ¶ dns è¿œç¨‹è§£æï¼Œé»˜è®¤å€¼ä¸º false
### dns
å¯é€‰å­—æ®µï¼Œå½“`remote-dns-resolve`ä¸º true æ—¶ç”Ÿæ•ˆï¼ŒæŒ‡å®šè¿œç¨‹è§£æä½¿ç”¨çš„ dns æœåŠ¡å™¨
## ä» Wireguard æ ‡å‡†é…ç½®æ–‡ä»¶ç¿»è¯‘
å‡è®¾æœ‰å¦‚ä¸‹ Wireguard æ ‡å‡†é…ç½®æ–‡ä»¶ï¼š
```ini
[Interface]
Address = <æœ¬æœºç»„ç½‘IP>
ListenPort = <æœ¬åœ°ç›‘å¬ç«¯å£>
PrivateKey = <æœ¬æœºç§é’¥>
DNS = <ä½¿ç”¨çš„DNS>
MTU = <é¢„è®¾MTU>
[Peer]
AllowedIPs = <è½¬å‘IPæ®µ>
Endpoint = <è¿œç«¯åœ°å€>:<è¿œç«¯ç«¯å£>
PublicKey = <è¿œç«¯å…¬é’¥>
```
å¯¹åº”çš„ clash èŠ‚ç‚¹é…ç½®ä¸ºï¼š
```{.yaml linenums="1"}
- name: "wg"
  type: wireguard
  ip: <æœ¬æœºç»„ç½‘IPï¼ŒIPv4å¾€è¿™é‡Œå¡«>
  ipv6: <æœ¬æœºç»„ç½‘IPï¼ŒIPv6å¾€è¿™é‡Œå¡«>  # æ²¡æœ‰v6åœ°å€ç›´æ¥åˆ é™¤
  private-key: <æœ¬æœºç§é’¥>
  peers:
    - server: <è¿œç«¯åœ°å€>
      port: <è¿œç«¯ç«¯å£>
      public-key: <è¿œç«¯å…¬é’¥>
      allowed-ips: ['0.0.0.0/0']     # åˆ†æµç”±clashå¤„ç†
      # reserved: [209,98,59]        # å¦‚æœéœ€è¦è‡ªå·±å¡«
  udp: true
  mtu: <é¢„è®¾MTU>               # æŒ‰éœ€è®¾ç½®ï¼Œä¸ç”¨ç›´æ¥åˆ é™¤
  remote-dns-resolve: true    # æŒ‰éœ€è®¾ç½®ï¼Œä¸ç”¨ç›´æ¥åˆ é™¤
  dns: <ä½¿ç”¨çš„DNS>             # æŒ‰éœ€è®¾ç½®ï¼Œä¸ç”¨ç›´æ¥åˆ é™¤
```

---
# SSH
# SSH
```{.yaml linenums="1"}
proxies:
- name: "ssh-out"
  type: ssh

  server: 127.0.0.1
  port: 22
  username: root
  password: password
  private-key: key
  private-key-passphrase: key_password
  host-key:
  - "ssh-rsa AAAAB3NzaC1yc2EAA..."
  host-key-algorithms:
  - rsa
```
[é€šç”¨å­—æ®µ](./index.md)
## username

SSH ç”¨æˆ·
## password

SSH å¯†ç 
## private-key
å¯†é’¥å†…å®¹/è·¯å¾„
## private_key_passphrase
å¯†é’¥å¯†ç 
## host-key
ä¸»æœºå¯†é’¥ï¼Œç•™ç©ºæ¥å—æ‰€æœ‰
## host-key-algorithms
ä¸»æœºå¯†é’¥ç®—æ³•

---
# ä»£ç†é›†åˆé…ç½®
# ä»£ç†é›†åˆ
```{.yaml linenums="1"}
proxy-providers:
  provider1:
    type: http
    url: "http://test.com"
    path: ./proxy_providers/provider1.yaml
    interval: 3600
    proxy: DIRECT
    size-limit: 0
    header:
      User-Agent:
      - "Clash/v1.18.0"
      - "mihomo/1.18.3"
      Authorization:
      - 'token 1231231'
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
      timeout: 5000
      lazy: true
      expected-status: 204
    override:
      tfo: false
      mptcp: false
      udp: true
      udp-over-tcp: false
      down: "50 Mbps"
      up: "10 Mbps"
      skip-cert-verify: true
      dialer-proxy: proxy
      interface-name: tailscale0
      routing-mark: 233
      ip-version: ipv4-prefer
      additional-prefix: "provider1 prefix |"
      additional-suffix: "| provider1 suffix"
      proxy-name:
      - pattern: "IPLC-(.*?)å€"
        target: "iplc x $1"
    filter: "(?i)æ¸¯|hk|hongkong|hong kong"
    exclude-filter: "xxx"
    exclude-type: "ss|http"
    payload:
      - name: "ss1"
        type: ss
        server: server
        port: 443
        cipher: chacha20-ietf-poly1305
        password: "password"
```
## name
å¿…é¡»ï¼Œå¦‚`provider1`ï¼Œä¸èƒ½é‡å¤ï¼Œå»ºè®®ä¸è¦å’Œ[ç­–ç•¥ç»„](../proxy-groups/index.md#name)åç§°é‡å¤
## type
å¿…é¡»ï¼Œ`provider`ç±»å‹ï¼Œå¯é€‰`http` / `file` / `inline`
## url
ç±»å‹ä¸º`http`æ˜¯åˆ™éœ€è¦é…ç½®
## path
å¯é€‰ï¼Œæ–‡ä»¶è·¯å¾„ï¼Œä¸å¯é‡å¤ï¼Œä¸å¡«å†™æ—¶ä¼šä½¿ç”¨ url çš„ MD5 ä½œä¸ºæ­¤æ–‡ä»¶çš„æ–‡ä»¶å
ç”±äºå®‰å…¨é—®é¢˜ï¼Œæ­¤è·¯å¾„å°†é™åˆ¶åªå…è®¸åœ¨ `HomeDir`(æœ‰å¯åŠ¨å‚æ•° -d é…ç½®) ä¸­ï¼Œå¦‚æœæƒ³å­˜å‚¨åˆ°ä»»æ„ä½ç½®é…ç½®ç¯å¢ƒå˜é‡ `SKIP_SAFE_PATH_CHECK=1`
## interval
æ›´æ–°`provider`çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’
## proxy
ç»è¿‡æŒ‡å®šä»£ç†è¿›è¡Œä¸‹è½½/æ›´æ–°
## size-limit
é™åˆ¶ä¸‹è½½æ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼Œé»˜è®¤ä¸º 0 å³ä¸é™åˆ¶æ–‡ä»¶å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ (`b`)
## header
è‡ªå®šä¹‰ http è¯·æ±‚å¤´
## health-check
å¥åº·æ£€æŸ¥ (å»¶è¿Ÿæµ‹è¯•)
### health-check.enable
æ˜¯å¦å¯ç”¨ï¼Œå¯é€‰ `true/false`
### health-check.url
å¥åº·æ£€æŸ¥åœ°å€ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹åœ°å€ä¹‹ä¸€
=== "Cloudflare"
    ```yaml
    https://cp.cloudflare.com
    ```
=== "Google"
    ```yaml
    https://www.gstatic.com/generate_204
    ```
### health-check.interval
å¥åº·æ£€æŸ¥é—´éš”æ—¶é—´ï¼Œå•ä½ä¸ºç§’
### health-check.timeout
å¥åº·æ£€æŸ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’
### health-check.lazy
æ‡’æƒ°çŠ¶æ€ï¼Œé»˜è®¤ä¸º`true`,ä¸ä½¿ç”¨è¯¥é›†åˆèŠ‚ç‚¹æ—¶ï¼Œä¸è¿›è¡Œæµ‹è¯•
### health-check.expected-status
å‚é˜… [æœŸæœ›çŠ¶æ€](../proxy-groups/index.md#expected-status)
## override
è¦†å†™èŠ‚ç‚¹å†…å®¹ï¼Œä»¥ä¸‹ä¸ºæ”¯æŒçš„å­—æ®µ
### override.additional-prefix
ä¸ºèŠ‚ç‚¹åç§°æ·»åŠ å›ºå®šå‰ç¼€
### override.additional-suffix
ä¸ºèŠ‚ç‚¹åç§°æ·»åŠ å›ºå®šåç¼€
### override.proxy-name
å¯¹èŠ‚ç‚¹åç§°å†…å®¹è¿›è¡Œæ›¿æ¢ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œpattern ä¸ºæ›¿æ¢å†…å®¹ï¼Œtarget ä¸ºæ›¿æ¢ç›®æ ‡
### override.å…¶ä½™é…ç½®é¡¹
å‚é˜…é€šç”¨å­—æ®µ  [tfo](../proxies/index.md#tfo)
å‚é˜…é€šç”¨å­—æ®µ  [mptcp](../proxies/index.md#mptcp)
å‚é˜…é€šç”¨å­—æ®µ  [udp](../proxies/index.md#udp)
å‚é˜…`Shadowsocks`  [udp-over-tcp](../proxies/ss.md#udp-over-tcp)
å‚é˜…`Hysteria`/`Hysteria2`  [up](../proxies/hysteria2.md#updown)
å‚é˜…`Hysteria`/`Hysteria2`  [down](../proxies/hysteria2.md#updown)
å‚é˜…é€šç”¨å­—æ®µ  [skip-cert-verify](../proxies/tls.md#skip-cert-verify)
å‚é˜…é€šç”¨å­—æ®µ  [dialer-proxy](../proxies/index.md#dialer-proxy)
å‚é˜…é€šç”¨å­—æ®µ  [interface-name](../proxies/index.md#interface-name)
å‚é˜…é€šç”¨å­—æ®µ  [routing-mark](../proxies/index.md#routing-mark)
å‚é˜…é€šç”¨å­—æ®µ  [ip-version](../proxies/index.md#ip-version)
## filter
ç­›é€‰æ»¡è¶³å…³é”®è¯æˆ–[æ­£åˆ™è¡¨è¾¾å¼](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)çš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ ` åŒºåˆ†å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼
## exclude-filter
æ’é™¤æ»¡è¶³å…³é”®è¯æˆ–[æ­£åˆ™è¡¨è¾¾å¼](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)çš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ ` åŒºåˆ†å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼
## exclude-type
ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šè¿‡ `|` åˆ†å‰²ï¼Œæ ¹æ®èŠ‚ç‚¹ç±»å‹æ’é™¤

provider çš„ `exclude-type` ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„ `type` ç±»å‹è¿›è¡Œæ’é™¤
## payload
å†…å®¹ï¼Œä»… `type` ä¸º `inline` æ—¶ç”Ÿæ•ˆ

---
# ä»£ç†é›†åˆå†…å®¹
# proxy-providers æ–‡ä»¶å†…å®¹
=== "yaml"
    ```{.yaml linenums="1"}
    proxies:
    - name: "ss1"
      type: ss
      server: server
      port: 443
      cipher: chacha20-ietf-poly1305
      password: "password"
    - name: "ss2"
      type: ss
      server: server
      port: 443
      cipher: chacha20-ietf-poly1305
      password: "password"
    ```
=== "uri"
    ```{.yaml linenums="1"}
    ss://YWVzLTI1Ni1nY206bWV0YUAxMjcuMC4wLjE6NDQz#home
    vmess://eyJhZGQiOiIxMjcuMC4wLjEiLCJhaWQiOiIwIiwiYWxwbiI6IiIsImZwIjoiIiwiaG9zdCI6IiIsImlkIjoiMTIyMzQ1Njc4OSIsIm5ldCI6InRjcCIsInBhdGgiOiIiLCJwb3J0IjoiNDQzIiwicHMiOiJ2bWVzcyIsInNjeSI6ImF1dG8iLCJzbmkiOiIiLCJ0bHMiOiIiLCJ0eXBlIjoibm9uZSIsInYiOiIyIn0=
    ```
=== "base64"
    ```{.text linenums="1"}
    c3M6Ly9ZV1Z6TFRJMU5pMW5ZMjA2YldWMFlVQXhNamN1TUM0d0xqRTZORFF6I2hvbWUKdm1lc3M6Ly9leUpoWkdRaU9pSXhNamN1TUM0d0xqRWlMQ0poYVdRaU9pSXdJaXdpWVd4d2JpSTZJaUlzSW1ad0lqb2lJaXdpYUc5emRDSTZJaUlzSW1sa0lqb2lNVEl5TXpRMU5qYzRPU0lzSW01bGRDSTZJblJqY0NJc0luQmhkR2dpT2lJaUxDSndiM0owSWpvaU5EUXpJaXdpY0hNaU9pSjJiV1Z6Y3lJc0luTmplU0k2SW1GMWRHOGlMQ0p6Ym1raU9pSWlMQ0owYkhNaU9pSWlMQ0owZVhCbElqb2libTl1WlNJc0luWWlPaUl5SW4wPQ==
    ```
!!! note
    base64 çš„ uri é€šå¸¸ä¸ºæä¾›å•†æä¾›ç»™ v2ray/xray çš„è®¢é˜…é“¾æ¥å†…å®¹
`YAML`/`uri`/`base64`ä¸å¯å†™åœ¨åŒä¸€æ–‡ä»¶,`uri`/`base64`ä¸éœ€è¦`proxies:`å­—æ®µ,ç›´æ¥ä¹¦å†™å³å¯

---
# ä»£ç†ç»„é…ç½®
# é€šç”¨å­—æ®µ
```{.yaml linenums="1"}
proxy-groups:
- name: "proxy"
  type: select
  proxies:
  - DIRECT
  - ss
  use:
  - provider1
  - provider1

  url: 'https://www.gstatic.com/generate_204'
  interval: 300
  lazy: true
  timeout: 5000
  max-failed-times: 5

  disable-udp: true
  interface-name: en0
  routing-mark: 11451
  include-all: false
  include-all-proxies: false
  include-all-providers: false
  filter: "(?i)æ¸¯|hk|hongkong|hong kong"
  exclude-filter: "ç¾|æ—¥"
  exclude-type: "Shadowsocks|Http"
  expected-status: 204
  hidden: true
  icon: xxx
```
## name
å¿…é¡»ï¼Œç­–ç•¥ç»„çš„åå­—
!!! note
    å¦‚æœ‰ç‰¹æ®Šç¬¦å·ï¼Œåº”å½“ä½¿ç”¨å¼•å·å°†å…¶åŒ…è£¹
## type
å¿…é¡»ï¼Œç­–ç•¥ç»„çš„ç±»å‹
## proxies
å¼•å…¥[å‡ºç«™ä»£ç†](../proxies/index.md)æˆ–å…¶ä»–ç­–ç•¥ç»„
## use
å¼•å…¥[ä»£ç†é›†åˆ](../proxy-providers/index.md)
## url
å¥åº·æ£€æŸ¥æµ‹è¯•åœ°å€
!!! note
    åªä¼šæ£€æŸ¥ä»£ç†ç»„çš„ proxies å­—æ®µçš„ä»£ç†ï¼Œä¸ä¼šæ£€æŸ¥ä»£ç†é›†åˆï¼ˆproxy-providersï¼‰çš„ä»£ç†ï¼ˆé€šè¿‡ use å¼•å…¥çš„ï¼‰ã€‚
## interval
å¥åº·æ£€æŸ¥é—´éš”ï¼Œå¦‚ä¸ä¸º 0 åˆ™å¯ç”¨å®šæ—¶æµ‹è¯•ï¼Œå•ä½ä¸ºç§’
## lazy
æ‡’æƒ°çŠ¶æ€ï¼Œé»˜è®¤ä¸º`true`,æœªé€‰æ‹©åˆ°å½“å‰ç­–ç•¥ç»„æ—¶ï¼Œä¸è¿›è¡Œæµ‹è¯•
## timeout
å¥åº·æ£€æŸ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’
## max-failed-times
æœ€å¤§å¤±è´¥æ¬¡æ•°ï¼Œè¶…è¿‡åˆ™è§¦å‘ä¸€æ¬¡å¼ºåˆ¶å¥åº·æ£€æŸ¥ï¼Œé»˜è®¤ 5
## disable-udp
ç¦ç”¨è¯¥ç­–ç•¥ç»„çš„`UDP`
## interface-name
!!! warning
    ä»£ç†ç»„ä¸­çš„ interface-name å·²å¼ƒç”¨ï¼Œè¯·ä½¿ç”¨ä»£ç†èŠ‚ç‚¹ä¸­çš„[interface-name](../proxies/index.md#interface-name)
æŒ‡å®šç­–ç•¥ç»„çš„[å‡ºç«™æ¥å£](../general.md#_11)
!!! info ""
    ä¼˜å…ˆçº§: ä»£ç†èŠ‚ç‚¹ > ä»£ç†ç­–ç•¥ > å…¨å±€
## routing-mark
!!! warning
    ä»£ç†ç»„ä¸­çš„ routing-mark å·²å¼ƒç”¨ï¼Œè¯·ä½¿ç”¨ä»£ç†èŠ‚ç‚¹ä¸­çš„[routing-mark](../proxies/index.md#routing-mark)
ç­–ç•¥ç»„å‡ºç«™æ—¶é™„å¸¦[è·¯ç”±æ ‡è®°](../general.md#_12)
!!! info ""
    ä¼˜å…ˆçº§: ä»£ç†èŠ‚ç‚¹ > ä»£ç†ç­–ç•¥ > å…¨å±€
## include-all
å¼•å…¥æ‰€æœ‰[å‡ºç«™ä»£ç†](../proxies/index.md)ä»¥åŠ[ä»£ç†é›†åˆ](../proxy-providers/index.md)ï¼Œé¡ºåºå°†æŒ‰ç…§åç§°æ’åº
!!! info ""
    å¼•å…¥ä¸åŒ…å«ç­–ç•¥ç»„,å¯åœ¨[proxies](./index.md#proxies)å¼•å…¥å…¶ä»–ç­–ç•¥ç»„
## include-all-proxies
å¼•å…¥æ‰€æœ‰[å‡ºç«™ä»£ç†](../proxies/index.md)ï¼Œé¡ºåºå°†æŒ‰ç…§åç§°æ’åº
!!! info ""
    å¼•å…¥ä¸åŒ…å«ç­–ç•¥ç»„,å¯åœ¨[`proxies`](./index.md#proxies)å¼•å…¥å…¶ä»–ç­–ç•¥ç»„
## include-all-providers
å¼•å…¥æ‰€æœ‰[ä»£ç†é›†åˆ](../proxy-providers/index.md)ï¼Œé¡ºåºå°†æŒ‰ç…§åç§°æ’åº
!!! info ""
    ä¼šä½¿[å¼•å…¥ä»£ç†é›†åˆ](./index.md#use)å¤±æ•ˆ
## filter
ç­›é€‰æ»¡è¶³å…³é”®è¯æˆ–[æ­£åˆ™è¡¨è¾¾å¼](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)çš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ ` åŒºåˆ†å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼
!!! info ""
    ä»…ä½œç”¨äºå¼•å…¥ä»£ç†é›†åˆä»¥åŠ[å¼•å…¥æ‰€æœ‰å‡ºç«™ä»£ç†](./index.md#include-all-proxies)
## exclude-filter
æ’é™¤æ»¡è¶³å…³é”®è¯æˆ–[æ­£åˆ™è¡¨è¾¾å¼](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)çš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ ` åŒºåˆ†å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼
## exclude-type
ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šè¿‡ `|` åˆ†å‰²ï¼Œæ ¹æ®èŠ‚ç‚¹ç±»å‹æ’é™¤ï¼Œä»…æ’é™¤[å¼•å…¥å‡ºç«™ä»£ç†](#proxies)
æ”¯æŒç±»å‹è¯·å‚é˜…[Adapter Type](https://github.com/MetaCubeX/mihomo/blob/fbead56ec97ae93f904f4476df1741af718c9c2a/constant/adapters.go#L18-L45)ï¼Œæ— è§†å¤§å°å†™
## expected-status
å¥åº·æ£€æŸ¥æ—¶æœŸæœ›çš„ HTTP å“åº”çŠ¶æ€ç ã€‚è‹¥é…ç½®äº†è¯¥å­—æ®µï¼Œåˆ™åªæœ‰å½“å“åº”çŠ¶æ€ç ä¸æœŸæœ›çŠ¶æ€ä¸€è‡´æ—¶æ‰è®¤ä¸ºèŠ‚ç‚¹å¯ç”¨ã€‚é»˜è®¤ä¸º `*`ï¼Œè¡¨ç¤ºå¯¹å“åº”çŠ¶æ€ä¸åšè¦æ±‚
### å†™æ³•
å¯ä½¿ç”¨ `/` åŒ¹é…å¤šä¸ªçŠ¶æ€ç ï¼Œä½¿ç”¨ `-` åŒ¹é…çŠ¶æ€èŒƒå›´ï¼Œå¯æ··åˆä¹¦å†™
#### ç¤ºä¾‹
åŒ¹é… 200 å’Œ 302 çŠ¶æ€ç 
```{.yaml linenums="1"}
expected-status: 200/302
```
åŒ¹é… 400 åˆ° 503 çŠ¶æ€ç 
```{.yaml linenums="1"}
expected-status: 400-503
```
åŒ¹é… 200 å’Œ 302 ä»¥åŠ 400 åˆ° 503 çŠ¶æ€ç 
```{.yaml linenums="1"}
expected-status: 200/302/400-503
```
## hidden
åœ¨ api è¿”å›`hidden`çŠ¶æ€ï¼Œä»¥éšè—è¯¥ç­–ç•¥ç»„å±•ç¤º (éœ€è¦ä½¿ç”¨ api çš„å‰ç«¯é€‚é…)
## icon
åœ¨ api è¿”å›`icon`æ‰€è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œä»¥åœ¨è¯¥ç­–ç•¥ç»„æ˜¾ç¤º (éœ€è¦ä½¿ç”¨ api çš„å‰ç«¯é€‚é…)

---
# å†…ç½®ä»£ç†ç»„
# é¢„ç½®ä»£ç†ç»„
## GLOBAL
é»˜è®¤å¡«å……æ‰€æœ‰ä»£ç†ç»„å’Œä»£ç†èŠ‚ç‚¹
è¯¥ç­–ç•¥ç»„ä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰
ä½† web é¢æ¿ä»¥åŠéƒ¨åˆ†å®¢æˆ·ç«¯ä½¿ç”¨ GLOBAL ç­–ç•¥ç»„å†…çš„ ç­–ç•¥ç»„é¡ºåº è¿›è¡Œæ’åº
å»ºè®®åœ¨è‡ªå®šä¹‰ GLOBAL ç­–ç•¥ç»„æ—¶ï¼Œä¹¦å†™å®Œæ•´å½“å‰é…ç½®æ‰€æœ‰çš„ç­–ç•¥ç»„ (é™¤äº† GLOBAL æœ¬èº«)

---
# æ‰‹åŠ¨é€‰æ‹©
# Select
```{.yaml linenums="1"}
proxy-groups:
- name: Proxy
  type: select
  proxies:
  - ss
  - vmess
  - auto
  #disable-udp: true
```
## é€šç”¨å­—æ®µ
å‚é˜… [é€šç”¨å­—æ®µ](./index.md)

---
# è‡ªåŠ¨é€‰æ‹©
# Url-test
```{.yaml linenums="1"}
proxy-groups:
- name: "è‡ªåŠ¨é€‰æ‹©"
  type: url-test
  proxies:
  - ss
  - vmess
  url: 'https://www.gstatic.com/generate_204'
  interval: 300
  #tolerance: 50
  #lazy: true
```
## é€šç”¨å­—æ®µ
å‚é˜… [é€šç”¨å­—æ®µ](./index.md)
## tolerance
èŠ‚ç‚¹åˆ‡æ¢å®¹å·®ï¼Œå•ä½ ms

---
# è‡ªåŠ¨å›é€€
# Fallback
```{.yaml linenums="1"}
proxy-groups:
- name: "fallback"
  type: fallback
  proxies:
  - ss
  - vmess
  url: 'https://www.gstatic.com/generate_204'
  interval: 300
  #lazy: true
```
å½“å‰èŠ‚ç‚¹è¶…æ—¶æ—¶ï¼Œåˆ™ä¼šæŒ‰ä»£ç†é¡ºåºé€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨èŠ‚ç‚¹
## é€šç”¨å­—æ®µ
å‚é˜… [é€šç”¨å­—æ®µ](./index.md)

---
# è´Ÿè½½å‡è¡¡
# Load-balance
```{.yaml linenums="1"}
proxy-groups:
- name: "load-balance"
  type: load-balance
  proxies:
  - ss1
  - ss2
  - vmess1
  url: 'https://www.gstatic.com/generate_204'
  interval: 300
  #lazy: true
  #strategy: consistent-hashing
```
## é€šç”¨å­—æ®µ
å‚é˜… [é€šç”¨å­—æ®µ](./index.md)
## strategy
è´Ÿè½½å‡è¡¡ç­–ç•¥
* `round-robin` å°†ä¼šæŠŠæ‰€æœ‰çš„è¯·æ±‚åˆ†é…ç»™ç­–ç•¥ç»„å†…ä¸åŒçš„ä»£ç†èŠ‚ç‚¹
* `consistent-hashing` å°†ç›¸åŒçš„ `ç›®æ ‡åœ°å€` çš„è¯·æ±‚åˆ†é…ç»™ç­–ç•¥ç»„å†…çš„åŒä¸€ä¸ªä»£ç†èŠ‚ç‚¹
* `sticky-sessions`: å°†ç›¸åŒçš„ `æ¥æºåœ°å€` å’Œ `ç›®æ ‡åœ°å€` çš„è¯·æ±‚åˆ†é…ç»™ç­–ç•¥ç»„å†…çš„åŒä¸€ä¸ªä»£ç†èŠ‚ç‚¹ï¼Œç¼“å­˜ 10 åˆ†é’Ÿè¿‡æœŸ
!!! note
    `ç›®æ ‡åœ°å€` ä¸ºåŸŸåæ—¶ï¼Œä½¿ç”¨é¡¶çº§åŸŸååŒ¹é…

---
# é“¾å¼ä»£ç†
# Relay
```{.yaml linenums="1"}
Proxy Groups:
# Traffic: Clash <-> http <-> vmess <-> ss1 <-> ss2 <-> Internet
- name: "relay"
  type: relay
  proxies:
    - http
    - vmess
    - ss1
    - ss2
```
!!! warning
    relay ç­–ç•¥å³å°†è¢«å¼ƒç”¨ï¼Œè¯·ä½¿ç”¨[dialer-proxy](../proxies/index.md#dialer-proxy)

    wireguard ç›®å‰ä¸æ”¯æŒåœ¨ relay ä¸­ä½¿ç”¨ï¼Œä¹Ÿè¯·ä½¿ç”¨[dialer-proxy](../proxies/index.md#dialer-proxy)
æµé‡å»å‘ä¸º Clash <-> http <-> vmess <-> ss1 <-> ss2 <-> Internet
## å…³äº UDP

relay æ”¯æŒä¼ è¾“ UDPï¼Œå‰ææ˜¯ä»£ç†é“¾çš„å¤´å°¾èŠ‚ç‚¹éƒ½è¦æ”¯æŒ UDP over TCPã€‚ç›®å‰æ”¯æŒ udp çš„åè®®æœ‰ `vmess`/`vless`/`trojan`/`ss`/`ssr`/`tuic`

---
# è·¯ç”±è§„åˆ™
# è·¯ç”±è§„åˆ™
```{.yaml linenums="1"}
rules:
- DOMAIN,ad.com,REJECT
- DOMAIN-SUFFIX,google.com,auto
- DOMAIN-KEYWORD,google,auto
- DOMAIN-REGEX,^abc.*com,PROXY
- GEOSITE,youtube,PROXY

- IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
- IP-CIDR6,2620:0:2d0:200::7/32,auto
- IP-SUFFIX,8.8.8.8/24,PROXY
- IP-ASN,13335,DIRECT
- GEOIP,CN,DIRECT

- SRC-GEOIP,cn,DIRECT
- SRC-IP-ASN,9808,DIRECT
- SRC-IP-CIDR,192.168.1.201/32,DIRECT
- SRC-IP-SUFFIX,192.168.1.201/8,DIRECT

- DST-PORT,80,DIRECT
- SRC-PORT,7777,DIRECT

- IN-PORT,7890,PROXY
- IN-TYPE,SOCKS/HTTP,PROXY
- IN-USER,mihomo,PROXY
- IN-NAME,ss,PROXY

- PROCESS-PATH,/usr/bin/wget,PROXY
- PROCESS-PATH,C:\Program Files\Google\Chrome\Application\chrome.exe,PROXY
- PROCESS-PATH-REGEX,.*bin/wget,PROXY
- PROCESS-PATH-REGEX,(?i).*Application\\chrome.*,PROXY

- PROCESS-NAME,curl,PROXY
- PROCESS-NAME,chrome.exe,PROXY
- PROCESS-NAME,com.termux,PROXY
- PROCESS-NAME-REGEX,curl$,PROXY
- PROCESS-NAME-REGEX,(?i)Telegram,PROXY
- PROCESS-NAME-REGEX,.*telegram.*,PROXY
- UID,1001,DIRECT

- NETWORK,udp,DIRECT
- DSCP,4,DIRECT

- RULE-SET,providername,proxy
- AND,((DOMAIN,baidu.com),(NETWORK,UDP)),DIRECT
- OR,((NETWORK,UDP),(DOMAIN,baidu.com)),REJECT
- NOT,((DOMAIN,baidu.com)),PROXY
- SUB-RULE,(NETWORK,tcp),sub-rule

- MATCH,auto
```
## ä¼˜å…ˆçº§
è§„åˆ™å°†æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºåŒ¹é…ï¼Œåˆ—è¡¨é¡¶éƒ¨çš„è§„åˆ™ä¼˜å…ˆçº§é«˜äºå…¶åº•ä¸‹çš„è§„åˆ™
!!! warning ""
    å¦‚è¯·æ±‚ä¸º udpï¼Œè€Œä»£ç†èŠ‚ç‚¹æ²¡æœ‰ udp æ”¯æŒ (ä¾‹å¦‚`ss`èŠ‚ç‚¹æ²¡å†™`udp: true`),åˆ™ä¼šç»§ç»­å‘ä¸‹åŒ¹é…
### DOMAIN
åŒ¹é…å®Œæ•´åŸŸå
### DOMAIN-SUFFIX
åŒ¹é…åŸŸååç¼€
ä¾‹ï¼š`google.com`åŒ¹é…`www.google.com`/`mail.google.com`å’Œ`google.com`,ä½†ä¸åŒ¹é…`content-google.com`
### DOMAIN-KEYWORD
ä½¿ç”¨åŸŸåå…³é”®å­—åŒ¹é…
### DOMAIN-REGEX
åŸŸåæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
### GEOSITE
åŒ¹é… Geosite å†…çš„åŸŸåï¼Œéƒ¨åˆ†å†…å®¹å‚è€ƒ [v2fly/domain-list-community](https://github.com/v2fly/domain-list-community/tree/master/data)
### IP-CIDR & IP-CIDR6
åŒ¹é… IP åœ°å€èŒƒå›´ï¼Œ`IP-CIDR`å’Œ`IP-CIDR6`æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œ`IP-CIDR6`åªæ˜¯ä¸€ä¸ªåˆ«å
### IP-SUFFIX
åŒ¹é… IP åç¼€èŒƒå›´
### IP-ASN
åŒ¹é… IP æ‰€å± ASN
### GEOIP
åŒ¹é… IP æ‰€å±å›½å®¶ä»£ç 
### SRC-GEOIP
åŒ¹é…æ¥æº IP æ‰€å±å›½å®¶ä»£ç 
### SRC-IP-ASN
åŒ¹é…æ¥æº IP æ‰€å± ASN
### SRC-IP-CIDR
åŒ¹é…æ¥æº IP åœ°å€èŒƒå›´
### SRC-IP-SUFFIX
åŒ¹é…æ¥æº IP åç¼€èŒƒå›´
### DST-PORT
åŒ¹é…è¯·æ±‚ç›®æ ‡[ç«¯å£èŒƒå›´](../../handbook/syntax.md#_14)
### SRC-PORT
åŒ¹é…è¯·æ±‚æ¥æº[ç«¯å£èŒƒå›´](../../handbook/syntax.md#_14)
### IN-PORT
åŒ¹é…[å…¥ç«™ç«¯å£](../inbound/listeners/index.md#port),å¯ç”¨[ç«¯å£èŒƒå›´](../../handbook/syntax.md#_14)
### IN-TYPE
åŒ¹é…[å…¥ç«™ç±»å‹](../inbound/listeners/index.md#type)
### IN-USER
åŒ¹é…[å…¥ç«™](../inbound/listeners/index.md)ç”¨æˆ·åï¼Œæ”¯æŒä½¿ç”¨ `/` åˆ†éš”å¤šä¸ªç”¨æˆ·å
### IN-NAME
åŒ¹é…[å…¥ç«™åç§°](../inbound/listeners/index.md#name)
### PROCESS-PATH
ä½¿ç”¨å®Œæ•´è¿›ç¨‹è·¯å¾„åŒ¹é…
### PROCESS-PATH-REGEX
ä½¿ç”¨è¿›ç¨‹è·¯å¾„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
### PROCESS-NAME
ä½¿ç”¨è¿›ç¨‹åŒ¹é…ï¼Œåœ¨`Android`å¹³å°å¯ä»¥åŒ¹é…åŒ…å
### PROCESS-NAME-REGEX
ä½¿ç”¨è¿›ç¨‹åç§°æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œåœ¨`Android`å¹³å°å¯ä»¥åŒ¹é…åŒ…å
### UID
åŒ¹é… Linux USER ID
### NETWORK
åŒ¹é…`tcp`æˆ–è€…`udp`
### DSCP
åŒ¹é…`DSCP`æ ‡è®° (ä»…é™ tproxy udp å…¥ç«™)
### RULE-SET
å¼•ç”¨è§„åˆ™é›†åˆï¼Œéœ€é…ç½®[rule-providers](../rule-providers/index.md)
### AND & OR & NOT
`LOGIC_TYPE,((payload1),(payload2)),Proxy`
*payload1*ã€*payload2* ä¸º è§„åˆ™ç±»å‹å’Œå…¶ä»– payloadï¼Œå¦‚ï¼š`DOMAIN,google.com`
é€»è¾‘è§„åˆ™ï¼Œéœ€è¦**æ³¨æ„æ‹¬å·**çš„ä½¿ç”¨
### SUB-RULE
åŒ¹é…è‡³[å­è§„åˆ™](../sub-rule.md),éœ€è¦æ³¨æ„æ‹¬å·çš„ä½¿ç”¨
### MATCH
åŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ— éœ€æ¡ä»¶
## é™„åŠ å‚æ•°
### no-resolve
ä»…æ”¯æŒå…³äº `ç›®æ ‡IP` çš„è§„åˆ™
åŸŸåå¼€å§‹åŒ¹é…å…³äº `ç›®æ ‡IP` è§„åˆ™æ—¶ï¼Œmihomo å°†è§¦å‘ dns è§£ææ¥æ£€æŸ¥åŸŸåçš„ `ç›®æ ‡IP` æ˜¯å¦åŒ¹é…è§„åˆ™ï¼Œå¯ä»¥é€‰æ‹© `no-resolve` é€‰é¡¹ä»¥è·³è¿‡ dns è§£æ
å¦‚åœ¨æ›´æ—©çš„åŒ¹é…ä¸­è§¦å‘äº† dns è§£æï¼Œåˆ™ä¾æ—§ä¼šåŒ¹é…åˆ°æ·»åŠ äº† `no-resolve` é€‰é¡¹çš„ `ç›®æ ‡IP` ç±»è§„åˆ™
### src
ä»…æ”¯æŒå…³äº `ç›®æ ‡IP` çš„è§„åˆ™
å°† `ç›®æ ‡IP` åŒ¹é…è½¬ä¸º `æ¥æºIP` åŒ¹é…

---
# è§„åˆ™é›†åˆ
# rule-provider
```{.yaml linenums="1"}
rule-providers:
  google:
    type: http
    path: ./rule1.yaml
    url: "https://raw.githubusercontent.com/../Google.yaml"
    interval: 600
    proxy: DIRECT
    behavior: classical
    format: yaml
    size-limit: 0
    payload:
      - 'DOMAIN-SUFFIX,google.com'
```
## name
å¿…é¡»ï¼Œå¦‚`google`,ä¸èƒ½é‡å¤
## type
å¿…é¡»ï¼Œ`provider`ç±»å‹ï¼Œå¯é€‰`http` / `file` / `inline`
## url
ç±»å‹ä¸º`http`åˆ™å¿…é¡»é…ç½®
## path
å¯é€‰ï¼Œæ–‡ä»¶è·¯å¾„ï¼Œä¸å¯é‡å¤ï¼Œä¸å¡«å†™æ—¶ä¼šä½¿ç”¨ url çš„ MD5 ä½œä¸ºæ­¤æ–‡ä»¶çš„æ–‡ä»¶å
ç”±äºå®‰å…¨é—®é¢˜ï¼Œæ­¤è·¯å¾„å°†é™åˆ¶åªå…è®¸åœ¨ `HomeDir`(æœ‰å¯åŠ¨å‚æ•° -d é…ç½®) ä¸­ï¼Œå¦‚æœæƒ³å­˜å‚¨åˆ°ä»»æ„ä½ç½®é…ç½®ç¯å¢ƒå˜é‡ `SKIP_SAFE_PATH_CHECK=1`
## interval
æ›´æ–°`provider`çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’
## proxy
ç»è¿‡æŒ‡å®šä»£ç†è¿›è¡Œä¸‹è½½/æ›´æ–°
## behavior
è¡Œä¸ºï¼Œå¯é€‰`domain`/`ipcidr`/`classical`ï¼Œå¯¹åº”ä¸åŒæ ¼å¼çš„ rule-provider æ–‡ä»¶æ ¼å¼ï¼Œè¯·æŒ‰å®é™…æ ¼å¼å¡«å†™
## format
æ ¼å¼ï¼Œå¯é€‰ `yaml`/`text`/`mrs`ï¼Œé»˜è®¤ `yaml`
`mrs`ç›®å‰ `behavior` ä»…æ”¯æŒ `domain`/`ipcidr`ï¼Œå¯ä»¥é€šè¿‡`mihomo convert-ruleset domain/ipcidr yaml/text XXX.yaml XXX.mrs`è½¬æ¢å¾—åˆ°
## size-limit
é™åˆ¶ä¸‹è½½æ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼Œé»˜è®¤ä¸º 0 å³ä¸é™åˆ¶æ–‡ä»¶å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ (`b`)
## payload
å†…å®¹ï¼Œä»… `type` ä¸º `inline` æ—¶ç”Ÿæ•ˆ

---
# è§„åˆ™é›†åˆå†…å®¹
# rule-providers æ–‡ä»¶å†…å®¹
## classical
`classical` æ”¯æŒ[è·¯ç”±è§„åˆ™](../rules/index.md)çš„å…¨éƒ¨ç±»å‹ (rule-set/sub-rule é™¤å¤–)
=== "yaml"
    ```{.yaml linenums="1"}
    payload:
    - DOMAIN-SUFFIX,google.com
    - DOMAIN-KEYWORD,google
    - DOMAIN,ad.com
    - SRC-IP-CIDR,192.168.1.201/32
    - IP-CIDR,127.0.0.0/8
    - GEOIP,CN
    - DST-PORT,80
    - SRC-PORT,7777
    ```
=== "text"
    ```text
    DOMAIN-SUFFIX,google.com
    DOMAIN-KEYWORD,google
    DOMAIN,ad.com
    SRC-IP-CIDR,192.168.1.201/32
    IP-CIDR,127.0.0.0/8
    GEOIP,CN
    DST-PORT,80
    SRC-PORT,7777
    ```
## domain
`domain`ç±»è§„åˆ™é›†åˆå†…å®¹é€šé…åº”éµå®ˆ[clash é€šé…ç¬¦](../../handbook/syntax.md#_8)
=== "yaml"
    ```{.yaml linenums="1"}
    payload:
    - '.blogger.com'
    - '*.*.microsoft.com'
    - 'books.itunes.apple.com'
    ```
=== "text"
    ```text
    .blogger.com
    *.*.microsoft.com
    books.itunes.apple.com
    ```
## ipcidr
=== "yaml"
    ```{.yaml linenums="1"}
    payload:
    - '192.168.1.0/24'
    - '10.0.0.0.1/32'
    ```
=== "text"
    ```text
    192.168.1.0/24
    10.0.0.0.1/32
    ```

---
# å­è§„åˆ™
# SUB-RULE
```{.yaml linenums="1"}
sub-rules:
  rule1:
    - DOMAIN-SUFFIX,baidu.com,DIRECT
    - MATCH,PROXY
  sub-rule2:
    - IP-CIDR,1.1.1.1/32,REJECT
    - IP-CIDR,8.8.8.8/32,ss1
    - DOMAIN,dns.alidns.com,REJECT
```

---
# æµé‡éš§é“
# TUNNEL
æµé‡è½¬å‘éš§é“ï¼Œå¯ä»¥è½¬å‘ tcp/udp æµé‡ï¼Œä¹Ÿå¯ç»è¿‡ä»£ç†è½¬å‘
```{.yaml linenums="1"}
tunnels:
- tcp/udp,127.0.0.1:6553,114.114.114.114:53,proxy
- network: [tcp, udp]
  address: 127.0.0.1:7777
  target: target.com
  proxy: proxy
```
## å•è¡Œ
```{.yaml linenums="1"}
tunnels:
- tcp/udp,127.0.0.1:6553,8.8.8.8:53,proxy
```
## å¤šè¡Œ
```{.yaml linenums="1"}
tunnels:
- network: [tcp, udp]
  address: 127.0.0.1:6553
  target: 8.8.8.8:53
  proxy: proxy
```
å•è¡Œé¡ºåºåˆ†åˆ«å¯¹åº”å¤šè¡Œçš„ `network`/`address`/`target`/`proxy`
### network
éœ€è¦ç›‘å¬çš„ç½‘ç»œç±»å‹ï¼Œå¯ä¸º tcp/udp
### address
æœ¬åœ°ç›‘å¬åœ°å€
### target
è½¬å‘çš„ç›®æ ‡åœ°å€
### proxy
å¯é€‰é¡¹ï¼Œç»è¿‡æŸä¸ª `proxies`/`proxy-groups` å‘é€æµé‡
å¦‚ä¸Šç¤ºä¾‹ä¸º   è®¿é—®`127.0.0.1:6553`ä¸ºç»è¿‡`proxy`è¿™ä¸ª`proxies`/`proxy-groups`è®¿é—®`8.8.8.8:53`

---
# NTP
# NTP
```{.yaml linenums="1"}
ntp:
  enable: true
  write-to-system: true
  server: time.apple.com
  port: 123
  interval: 30
```
## enable
æ˜¯å¦å¯ç”¨ NTP æœåŠ¡
## write-to-system
æ˜¯å¦åŒæ­¥è‡³ç³»ç»Ÿæ—¶é—´ï¼Œéœ€è¦ rootã€ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œã€‚
## server

NTP æœåŠ¡åœ°å€ï¼Œé»˜è®¤ `time.apple.com`
## port

NTP æœåŠ¡ç«¯å£ï¼Œé»˜è®¤ `123`
## interval
åŒæ­¥æ—¶é—´é—´éš”ï¼Œå•ä½ï¼ˆåˆ†ï¼‰ï¼Œé»˜è®¤åŒæ­¥é—´éš”ä¸º 30 åˆ†

---
# å®éªŒæ€§é…ç½®
# å®éªŒæ€§é…ç½®
```{.yaml linenums="1"}
experimental:
  quic-go-disable-gso: false
  quic-go-disable-ecn: false
  dialer-ip4p-convert: false
```
## quic-go-disable-gso
ç¦ç”¨`GSO`
## quic-go-disable-ecn
ç¦ç”¨`ECN`
## dialer-ip4p-convert
å¯ç”¨[IP4P](https://github.com/heiher/natmap/wiki/faq#åŸŸåè®¿é—®æ˜¯å¦‚ä½•å®ç°çš„)åœ°å€è½¬æ¢

---
# APIs
# API
## è¯·æ±‚ç¤ºä¾‹

curl ç¤ºä¾‹ `curl -H 'Authorization: Bearer ${secret}'  http://${controller-api}/configs?force=true -d '{"path": "", "payload": ""}' -X PUT`
æ­¤è¯·æ±‚é™„å¸¦ `'Authorization: Bearer ${secret}'` è¯·æ±‚å¤´ï¼Œå…¶ä¸­ï¼š

- `${secret}` ä¸ºé…ç½®æ–‡ä»¶è®¾ç½®çš„[api](../config/general.md#api)å¯†é’¥
- `${controller-api}` ä¸ºé…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„[api](../config/general.md#api)ç›‘å¬åœ°å€
- `?force=true` ä¸ºæºå¸¦å‚æ•°ï¼Œéƒ¨åˆ†è¯·æ±‚éœ€æºå¸¦
- `'{"path": "", "payload": ""}'` ä¸ºè¦æ›´æ–°çš„èµ„æºçš„æ•°æ®
å¤§å¤šæ•°æƒ…å†µä¼ å…¥çš„æ•°æ®éƒ½ä¸º`'{"path": "", "payload": ""}'`ï¼Œå¯ä»¥é™„å¸¦æ–°çš„é…ç½®æ–‡ä»¶è·¯å¾„
!!! note
    æ³¨æ„ï¼Œå¦‚æœè·¯å¾„ä¸åœ¨ Clash å·¥ä½œç›®å½•ï¼Œè¯·æ‰‹åŠ¨è®¾ç½®`SAFE_PATHS`ç¯å¢ƒå˜é‡å°†å…¶åŠ å…¥å®‰å…¨è·¯å¾„ï¼Œè¯¥ç¯å¢ƒå˜é‡çš„è¯­æ³•åŒæœ¬æ“ä½œç³»ç»Ÿçš„PATHç¯å¢ƒå˜é‡è§£æè§„åˆ™ï¼ˆå³Windowsä¸‹ä»¥åˆ†å·åˆ†å‰²ï¼Œå…¶ä»–ç³»ç»Ÿä¸‹ä»¥å†’å·åˆ†å‰²ï¼‰ã€‚
## æ—¥å¿—
### `/logs`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–å®æ—¶æ—¥å¿—
## æµé‡ä¿¡æ¯
### `/traffic`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–å®æ—¶æµé‡ï¼Œå•ä½ kbps
## å†…å­˜ä¿¡æ¯
### `/memory`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–å®æ—¶å†…å­˜å ç”¨ï¼Œå•ä½ kb
## ç‰ˆæœ¬ä¿¡æ¯
### `/version`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å– Clash ç‰ˆæœ¬
## ç¼“å­˜
### `/cache/fakeip/flush`
è¯·æ±‚æ–¹æ³•ï¼š`POST`

- æ¸…é™¤ fakeip ç¼“å­˜
## è¿è¡Œé…ç½®
### `/configs`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–åŸºæœ¬é…ç½®
è¯·æ±‚æ–¹æ³•ï¼š`PUT`

- é‡æ–°åŠ è½½åŸºæœ¬é…ç½®ï¼Œå¿…é¡»å‘é€æ•°æ®ï¼ŒURL éœ€æºå¸¦ `?force=true` å¼ºåˆ¶æ‰§è¡Œ
è¯·æ±‚æ–¹æ³•ï¼š`PATCH`

- æ›´æ–°åŸºæœ¬é…ç½®ï¼Œå¿…é¡»å‘é€æ•°æ®ï¼Œæ ¼å¼ä¸º`'{"mixed-port": 7890}'`ï¼ŒæŒ‰éœ€ä¿®æ”¹ä¸ºéœ€è¦æ›´æ–°çš„é…ç½®é¡¹
### `/configs/geo`
è¯·æ±‚æ–¹æ³•ï¼š`POST`

- æ›´æ–° GEO æ•°æ®åº“ï¼Œå¿…é¡»å‘é€æ•°æ®
### `/restart`
è¯·æ±‚æ–¹æ³•ï¼š`POST`

- é‡å¯å†…æ ¸ï¼Œå¿…é¡»å‘é€æ•°æ®
## æ›´æ–°
### `/upgrade`
è¯·æ±‚æ–¹æ³•ï¼š`POST`

- æ›´æ–°å†…æ ¸ï¼Œå¿…é¡»å‘é€æ•°æ®
### `/upgrade/ui`
è¯·æ±‚æ–¹æ³•ï¼š`POST`

- æ›´æ–°é¢æ¿ï¼Œé¡»è®¾ç½® [external-ui](../config/general.md#_7)
### `/upgrade/geo`
è¯·æ±‚æ–¹æ³•ï¼š`POST`

- æ›´æ–° GEO æ•°æ®åº“ï¼Œå¿…é¡»å‘é€æ•°æ®
## ç­–ç•¥ç»„
### `/group`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–ç­–ç•¥ç»„ä¿¡æ¯
### `/group/group_name`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–å…·ä½“çš„ç­–ç•¥ç»„ä¿¡æ¯
è¯·æ±‚æ–¹æ³•ï¼š`DELETE`

- æ¸…é™¤è‡ªåŠ¨ç­–ç•¥ç»„ fixed é€‰æ‹©
### `/group/group_name/delay`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- å¯¹æŒ‡å®šç­–ç•¥ç»„å†…çš„èŠ‚ç‚¹/ç­–ç•¥ç»„è¿›è¡Œæµ‹è¯•ï¼Œè¿”å›æ–°çš„å»¶è¿Ÿä¿¡æ¯ï¼Œ,å¹¶æ¸…é™¤è‡ªåŠ¨ç­–ç•¥ç»„çš„ fixed é€‰æ‹©
- URL éœ€æºå¸¦`?url=xxx&timeout=5000`ï¼ŒæŒ‰éœ€ä¿®æ”¹
## ä»£ç†
### `/proxies`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–ä»£ç†ä¿¡æ¯
### `/proxies/proxies_name`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–å…·ä½“çš„ä»£ç†ä¿¡æ¯
è¯·æ±‚æ–¹æ³•ï¼š`PUT`

- é€‰æ‹©ç‰¹å®šçš„ä»£ç†ï¼Œéœ€æºå¸¦æ•°æ®ï¼Œæ ¼å¼ä¸º`'{"name":"æ—¥æœ¬"}'`
### `/proxies/proxies_name/delay`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- å¯¹æŒ‡å®šä»£ç†è¿›è¡Œæµ‹è¯•ï¼Œå¹¶è¿”å›æ–°çš„å»¶è¿Ÿä¿¡æ¯
- URL éœ€æºå¸¦`?url=xxx&timeout=5000`ï¼ŒæŒ‰éœ€ä¿®æ”¹
## ä»£ç†é›†åˆ
### `/providers/proxies`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–æ‰€æœ‰ä»£ç†é›†åˆçš„æ‰€æœ‰ä¿¡æ¯
### `/providers/proxies/providers_name`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–ç‰¹å®šä»£ç†é›†åˆçš„ä¿¡æ¯
è¯·æ±‚æ–¹æ³•ï¼š`PUT`

- æ›´æ–°ä»£ç†é›†åˆ
### `/providers/proxies/providers_name/healthcheck`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è§¦å‘ç‰¹å®šä»£ç†é›†åˆçš„å¥åº·æ£€æŸ¥
### `/providers/proxies/providers_name/proxies_name/healthcheck`

- å¯¹ä»£ç†é›†åˆå†…çš„æŒ‡å®šä»£ç†è¿›è¡Œæµ‹è¯•ï¼Œå¹¶è¿”å›æ–°çš„å»¶è¿Ÿä¿¡æ¯
- URL éœ€æºå¸¦`?url=xxx&timeout=5000`ï¼ŒæŒ‰éœ€ä¿®æ”¹
## è§„åˆ™
### `/rules`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–è§„åˆ™ä¿¡æ¯
## è§„åˆ™é›†åˆ
### `/providers/rules`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–æ‰€æœ‰è§„åˆ™é›†åˆçš„æ‰€æœ‰ä¿¡æ¯
### `/providers/rules/providers_name`
è¯·æ±‚æ–¹æ³•ï¼š`PUT`

- æ›´æ–°è§„åˆ™é›†åˆ
## è¿æ¥
### `/connections`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–è¿æ¥ä¿¡æ¯
è¯·æ±‚æ–¹æ³•ï¼š`DELETE`

- å…³é—­æ‰€æœ‰è¿æ¥
### `/connections/:id`
è¯·æ±‚æ–¹æ³•ï¼š`DELETE`

- å…³é—­ç‰¹å®šè¿æ¥
## åŸŸåæŸ¥è¯¢
### `/dns/query`
è¯·æ±‚æ–¹æ³•ï¼š`GET`

- è·å–æŒ‡å®šåç§°å’Œç±»å‹çš„ DNS æŸ¥è¯¢æ•°æ®
- URL éœ€æºå¸¦`?name=example.com&type=A`ï¼ŒæŒ‰éœ€ä¿®æ”¹
## DEBUG
`/debug` éœ€è¦å†…æ ¸å¯åŠ¨æ—¶ [æ—¥å¿—çº§åˆ«](../config/general.md#_5) ä¸º `debug`
### `/debug/gc`
è¯·æ±‚æ–¹æ³•ï¼š`PUT`

- è¿›è¡Œä¸»åŠ¨ GC
### `/debug/pprof`
æµè§ˆå™¨æ‰“å¼€ `http://${controller-api}/debug/pprof` å¯æŸ¥çœ‹åŸå§‹ DEBUG ä¿¡æ¯ï¼Œå…¶ä¸­ï¼š

- allocs è¡¨ç¤ºæ¯ä¸ªå‡½æ•°è°ƒç”¨çš„å†…å­˜åˆ†é…æƒ…å†µï¼ŒåŒ…æ‹¬åœ¨å †æ ˆä¸Šå’Œå †ä¸Šåˆ†é…çš„å†…å­˜å¤§å°ä»¥åŠå†…å­˜åˆ†é…æ¬¡æ•°ã€‚è¿™ä¸ªæŠ¥å‘Šä¸»è¦æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°ä»£ç ä¸­å­˜åœ¨çš„å†…å­˜æ³„æ¼ã€å†…å­˜é¢‘ç¹ç”³è¯·ç­‰é—®é¢˜ã€‚
- heap æŠ¥å‘Šåˆ™ç»™å‡ºäº†ç¨‹åºåœ¨å †ä¸Šä½¿ç”¨çš„å†…å­˜çš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬è¢«åˆ†é…çš„å†…å­˜å—çš„å¤§å°ã€æ•°é‡å’Œåœ°å€ï¼Œå¹¶ä¸”æŒ‰ç…§å¤§å°æ’åºã€‚è¿™ä¸ªæŠ¥å‘Šä¸»è¦æ˜¯ä¸ºäº†æœå¯»å†…å­˜ä½¿ç”¨è¿‡é«˜çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ heap æŠ¥å‘Šä¸­æŸ¥çœ‹å¯¹è±¡çš„å¤§å°ï¼Œä»è€Œæ‰¾åˆ°å†…å­˜ä½¿ç”¨è¿‡é«˜çš„åœ°æ–¹ã€‚
#### å®‰è£… [Graphviz](https://graphviz.org/download/),å¯æŸ¥çœ‹å›¾å½¢åŒ–çš„ debug ä¿¡æ¯
##### æŸ¥çœ‹å›¾å½¢åŒ– Heap æŠ¥å‘Š
```shell
go tool pprof -http=:8080 http://127.0.0.1:xxxx/debug/pprof/heap
```
[Full image](../assets/image/api/heap.svg)
##### æŸ¥çœ‹å›¾å½¢åŒ– Allocs æŠ¥å‘Š
```shell
go tool pprof -http=:8080 http://127.0.0.1:xxxx/debug/pprof/allocs
```
[ç¤ºä¾‹è¾“å‡º](../assets/image/api/allocs.svg)
##### æäº¤è¾“å‡ºæŠ¥å‘Š
æµè§ˆå™¨è®¿é—® `http://${controller-api}/debug/pprof/heap?raw=true` å³å¯ä¸‹è½½è¿™ä¸ªæ–‡ä»¶ï¼Œé€šè¿‡ä¸Šä¼ åˆ° [issues](https://github.com/MetaCubeX/mihomo/issues) æäº¤ä½ é‡åˆ°çš„é—®é¢˜ã€‚
