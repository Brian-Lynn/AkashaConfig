#!name=Bean-ProxiesGroup
#!desc=Proxy Group
# Shadowrocket: 2025-02-26 22:31:11
[General]
bypass-system = true

# è·³è¿‡ä»£ç†ã€‚æ­¤é€‰é¡¹å¼ºåˆ¶è¿™äº›åŸŸåæˆ– IP çš„è¿æ¥èŒƒå›´ç”± Shadowrocket TUN æ¥å£æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯ Shadowrocket ä»£ç†æœåŠ¡å™¨ã€‚æ­¤é€‰é¡¹ç”¨äºè§£å†³ä¸€äº›åº”ç”¨ç¨‹åºçš„ä¸€äº›å…¼å®¹æ€§é—®é¢˜ã€‚
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,*.ccb.com,*.abchina.com.cn,*.psbc.com,www.baidu.com

# TUN æ—è·¯è·¯ç”±ã€‚Shadowrocket TUN æ¥å£åªèƒ½å¤„ç† TCP åè®®ã€‚ä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥ç»•è¿‡æŒ‡å®šçš„ IP èŒƒå›´ï¼Œè®©å…¶ä»–åè®®é€šè¿‡ã€‚
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32

# DNS è¦†å†™ã€‚ä½¿ç”¨æ™®é€š DNS æˆ–åŠ å¯† DNSï¼ˆå¦‚ DoHã€DoQã€DoT ç­‰ï¼‰è¦†ç›–é»˜è®¤çš„ç³»ç»Ÿ DNSã€‚å¡« system è¡¨ç¤ºä½¿ç”¨ç³»ç»Ÿ DNSã€‚
# åŠ å¯† DNS ç¤ºä¾‹ï¼š
# 1ã€DNS-over-HTTPSï¼ˆDoHï¼‰
# dns-server = https://dns.alidns.com/dns-query
# 2ã€DNS-over-HTTP/3ï¼ˆDoH3ï¼‰
# dns-server = h3://dns.alidns.com/dns-query
# 3ã€DNS-over-QUICï¼ˆDoQï¼‰
# dns-server = quic://223.5.5.5
# 4ã€DNS-over-TLSï¼ˆDoTï¼‰
# dns-server = tls://223.5.5.5

# é€šè¿‡ä»£ç†è½¬å‘ DNS æŸ¥è¯¢è¯·æ±‚ï¼ˆdns over proxyï¼‰ã€‚ç¤ºä¾‹ï¼š
# dns-server = https://dns.google/dns-query#proxy=server1
# dns-server = https://dns.google/dns-query#ecs=120.76.0.0/14|2620:149:af0::10/56&ecs-override=true
# dns-server = https://dns.google/dns-query#proxy=name&ecs=1.1.0.0/14|2620:149:af0::10/56&ecs-override=true
# å‚æ•°è¯´æ˜ï¼š
# 1ã€proxy=nameã€‚æŒ‡å®šä»£ç†æœåŠ¡å™¨ï¼Œåç§°éœ€è¦ URL ç¼–ç ã€‚
# 2ã€ecs=å­ç½‘èŒƒå›´ã€‚ecs å‚æ•°ç”¨äºè®¾ç½® EDNS Client Subnet (ECS)ï¼Œå‘ DNS æœåŠ¡å™¨ä¼ é€’å®¢æˆ·ç«¯çš„å­ç½‘ä¿¡æ¯ã€‚ECS å…è®¸ DNS æœåŠ¡å™¨æ ¹æ®æŒ‡å®šçš„å­ç½‘èŒƒå›´ï¼ˆè€Œéå®é™…å®¢æˆ·ç«¯ IPï¼‰æ¥è¿”å›æœ€ä¼˜ç»“æœã€‚
# 3ã€ecs-override=trueã€‚ecs å‚æ•°çš„å¼ºåˆ¶è¦†ç›–ã€‚å³ä½¿å®¢æˆ·ç«¯çš„å®é™… IP æä¾›äº†ä¸åŒçš„åœ°ç†ä½ç½®ï¼ŒæŸ¥è¯¢ä¼šå¼ºåˆ¶ä½¿ç”¨ ecs æŒ‡å®šçš„å­ç½‘èŒƒå›´ã€‚

dns-server = https://doh.pub/dns-query,https://dns.alidns.com/dns-query,tls://223.5.5.5,tls://119.29.29.29

# å¤‡ç”¨ DNSã€‚å½“è¦†å†™ DNS æŸ¥è¯¢å¤±è´¥æˆ–æŸ¥è¯¢æ—¶é—´è¶…è¿‡ 2 ç§’ï¼ŒShadowrocket ä¼šè‡ªåŠ¨å›é€€å¤‡ç”¨ DNSã€‚å¦‚éœ€æŒ‡å®šå¤šä¸ª DNSï¼Œå¯ç”¨é€—å·åˆ†éš”ã€‚system è¡¨ç¤ºå›é€€åˆ°ç³»ç»Ÿ DNSã€‚
fallback-dns-server = system

# å¯ç”¨ IPv6 æ”¯æŒã€‚false è¡¨ç¤ºä¸å¯ç”¨ï¼Œtrue è¡¨ç¤ºå¯ç”¨ã€‚å¯ç”¨ä¼šåŒæ—¶æŸ¥è¯¢ A è®°å½•å’Œ AAAA è®°å½•ï¼Œä¼˜å…ˆä½¿ç”¨ IPv4 åœ°å€è§£æã€‚
ipv6 = false

# é¦–é€‰ IPv6ã€‚ä¼˜å…ˆå‘ IPv6 çš„ DNS æœåŠ¡å™¨æŸ¥è¯¢ AAAA è®°å½•ï¼Œä¼˜å…ˆä½¿ç”¨ IPv6 åœ°å€è§£æã€‚false è¡¨ç¤ºä¸å¯ç”¨ã€‚
prefer-ipv6 = false

# ç›´è¿çš„åŸŸåç±»è§„åˆ™ä½¿ç”¨ç³»ç»Ÿ DNS è¿›è¡ŒæŸ¥è¯¢ã€‚false è¡¨ç¤ºä¸å¯ç”¨ã€‚
dns-direct-system = ture

# ping æ•°æ®åŒ…è‡ªåŠ¨å›å¤ã€‚
icmp-auto-reply = true

# ä¸å¼€å¯æ—¶ï¼Œã€Œé‡å†™çš„ REJECT ç­–ç•¥ã€é»˜è®¤åªæœ‰åœ¨é…ç½®æ¨¡å¼ä¸‹ç”Ÿæ•ˆã€‚å¼€å¯åï¼Œå¯ä»¥ä»¤è¯¥ç­–ç•¥åœ¨å…¶ä»–å…¨å±€è·¯ç”±æ¨¡å¼ä¸‹éƒ½ç”Ÿæ•ˆã€‚
always-reject-url-rewrite = false

# ç§æœ‰ IP åº”ç­”ã€‚å¦‚æœä¸å¯ç”¨æ­¤é€‰é¡¹ï¼ŒåŸŸåè§£æè¿”å›ç§æœ‰ IPï¼ŒShadowrocket ä¼šè®¤ä¸ºè¯¥åŸŸåè¢«åŠ«æŒè€Œå¼ºåˆ¶ä½¿ç”¨ä»£ç†ã€‚
private-ip-answer = true

# ç›´è¿åŸŸåè§£æå¤±è´¥åä½¿ç”¨ä»£ç†ã€‚false è¡¨ç¤ºä¸å¯ç”¨ã€‚
dns-direct-fallback-proxy = true

# TUN åŒ…å«è·¯ç”±ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒShadowrocket æ¥å£ä¼šå£°æ˜è‡ªå·±ä¸ºé»˜è®¤è·¯ç”±ï¼Œä½†ç”±äº Wi-Fi æ¥å£çš„è·¯ç”±è¾ƒå°ï¼Œæœ‰äº›æµé‡å¯èƒ½ä¸ä¼šé€šè¿‡ Shadowrocket æ¥å£ã€‚ä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥æ·»åŠ ä¸€ä¸ªè¾ƒå°çš„è·¯ç”±è¡¨ã€‚
# tun-included-routes =

# æ€»æ˜¯çœŸå® IPã€‚æ­¤é€‰é¡¹è¦æ±‚ Shadowrocket åœ¨ TUN å¤„ç† DNS è¯·æ±‚æ—¶è¿”å›ä¸€ä¸ªçœŸå®çš„ IP åœ°å€è€Œä¸æ˜¯å‡çš„ IP åœ°å€ã€‚
# always-real-ip =

# DNS åŠ«æŒã€‚æœ‰äº›è®¾å¤‡æˆ–è½¯ä»¶æ€»æ˜¯ä½¿ç”¨ç¡¬ç¼–ç çš„ DNS æœåŠ¡å™¨ï¼Œä¾‹å¦‚ Netflix é€šè¿‡ Google DNS(8.8.8.8æˆ–8.8.4.4)å‘é€è¯·æ±‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹æ¥åŠ«æŒæŸ¥è¯¢ã€‚
hijack-dns = 8.8.8.8:53,8.8.4.4:53

# å½“ UDP æµé‡åŒ¹é…åˆ°è§„åˆ™é‡Œä¸æ”¯æŒ UDP è½¬å‘çš„èŠ‚ç‚¹ç­–ç•¥æ—¶é‡æ–°é€‰æ‹©å›é€€è¡Œä¸ºï¼Œå¯é€‰è¡Œä¸ºåŒ…æ‹¬ DIRECTã€REJECTã€‚DIRECT è¡¨ç¤ºç›´è¿è½¬å‘ UDP æµé‡ï¼ŒREJECT è¡¨ç¤ºæ‹’ç»è½¬å‘ UDP æµé‡ã€‚
udp-policy-not-supported-behaviour = REJECT

# åŒ…å«é…ç½®ã€‚å¦‚â€œinclude=a.confâ€è¡¨ç¤ºå½“å‰é…ç½®åŒ…å«å¦ä¸€ä¸ªé…ç½® a.conf çš„å†…å®¹ï¼Œå½“å‰é…ç½®çš„ä¼˜å…ˆçº§é«˜äº a.confã€‚æ­¤é€‰é¡¹æ˜¯å¯¹é…ç½®å»ºç«‹åŒ…å«å…³ç³»ï¼Œä»¥æ»¡è¶³åŒæ—¶ä½¿ç”¨å¤šä¸ªé…ç½®çš„éœ€æ±‚ã€‚
# include =

# æ­¤é€‰é¡¹å…è®¸è¿”å›ä¸€ä¸ªè™šå‡çš„ IP åœ°å€ï¼Œå¦‚â€œstun-response-ip=1.1.1.1â€ã€â€œstun-response-ipv6=::1â€ï¼Œç›®çš„æ˜¯é˜²æ­¢çœŸå® IP åœ°å€æ³„æ¼ï¼Œæé«˜ WebRTC çš„éšç§å’Œå®‰å…¨æ€§ã€‚
# stun-response-ip =
# stun-response-ipv6 =

# ç½‘ç»œå…¼å®¹æ¨¡å¼ã€‚å½“å‚æ•°çš„å€¼è®¾å®šä¸º 3 æ—¶çš„æ•ˆæœç­‰åŒäºï¼šè®¾ç½® > ä»£ç† > ä»£ç†ç±»å‹ > Noneã€‚
# compatibility-mode =

# å¼ºåˆ¶æ‰€æœ‰åŸŸåä½¿ç”¨æœ¬åœ° DNS è§£æã€‚è®¾ç½®ä¸º true è¡¨ç¤ºå¯ç”¨ï¼ˆæ­¤å‚æ•°ä¸ºéšè—å±æ€§ï¼Œå»ºè®®è°¨æ…è®¾ç½®ï¼Œå¯èƒ½å¯¼è‡´ç›¸å…³åŸŸåçš„ CDN å¤±æ•ˆï¼‰ã€‚
# always-ip-address =

[Proxy Group]
  ğŸš€Proxy = select, â™»ï¸auto, âš™ï¸Fallback, ğŸ‡­ğŸ‡°HK, ğŸ‡¼ğŸ‡¸TW, ğŸ‡ºğŸ‡¸US, ğŸ‡¯ğŸ‡µJP, ğŸ‡¸ğŸ‡¬SG, ğŸ´â€â˜ ï¸other, policy-select-name=ğŸ‡­ğŸ‡°HK
  
  ğŸŒGoogle = select, select=0, ğŸš€Proxy, ğŸ‡­ğŸ‡°HK, ğŸ‡¼ğŸ‡¸TW, ğŸ‡ºğŸ‡¸US, ğŸ‡¯ğŸ‡µJP, ğŸ‡¸ğŸ‡¬SG, ğŸ´â€â˜ ï¸other-UKHome 
  ğŸ‡­ğŸ‡°HK = select, select=2, policy-regex-filter=(?i)(?=.*(é¦™æ¸¯|hk))(?=^(?!.*Hy2).*$)^.*$
  ğŸ‡¼ğŸ‡¸TW = select, select=2, policy-regex-filter=(?i)(?=.*(å°|tw))(?=^(?!.*Hy2).*$)^.*$
  ğŸ‡ºğŸ‡¸US = select, select=2, policy-regex-filter=(?i)(?=.*(ç¾|us))(?=^(?!.*Hy2).*$)^.*$
  ğŸ‡¯ğŸ‡µJP = select, select=2, policy-regex-filter=(?i)(?=.*(æ—¥|jp))(?=^(?!.*Hy2).*$)^.*$
  ğŸ‡¸ğŸ‡¬SG = select, select=2, policy-regex-filter=(?i)(?=.*(æ–°|sg))(?=^(?!.*Hy2).*$)^.*$
  ğŸ´â€â˜ ï¸other = select, select=2, policy-regex-filter=(?i)(?=.*(^(?!.*(å®˜ç½‘|å‰©ä½™|æµé‡|å¥—é¤|.com|é¦™æ¸¯|hk|å°|tw|ç¾|us|å¡|æ–°|sg|æ—¥|jp|ä¸‹æ–¹)).*$))(?=^(?!.*Hy2).*$)^.*$
  ğŸAPPLE = select, select=0, DIRECT, ğŸš€Proxy, ğŸ‡­ğŸ‡°HK, ğŸ‡¼ğŸ‡¸TW, ğŸ‡ºğŸ‡¸US, ğŸ‡¯ğŸ‡µJP, ğŸ‡¸ğŸ‡¬SG, ğŸ´â€â˜ ï¸other-UKHome,
  âœˆï¸Telegram = select, ğŸ‡¸ğŸ‡¬SG,ğŸš€Proxy, ğŸ‡­ğŸ‡°HK, ğŸ‡¼ğŸ‡¸TW, ğŸ‡ºğŸ‡¸US, ğŸ‡¯ğŸ‡µJP, policy-select-name=ğŸ‡¸ğŸ‡¬SG
  ğŸ¤–AI service = select, ğŸ‡¼ğŸ‡¸TW, ğŸ‡ºğŸ‡¸US, ğŸ‡¯ğŸ‡µJP, ğŸ‡¸ğŸ‡¬SG, policy-select-name=ğŸ‡¼ğŸ‡¸TW 
  â“‚ï¸Microsoft = select, select=0, DIRECT, ğŸš€Proxy, ğŸ‡­ğŸ‡°HK, ğŸ‡¼ğŸ‡¸TW, ğŸ‡ºğŸ‡¸US, ğŸ‡¯ğŸ‡µJP, ğŸ‡¸ğŸ‡¬SG, ğŸ´â€â˜ ï¸other-UKHome
  â™»ï¸auto = url-test, policy-regex-filter=(?i)(?=.*(^(?!.*(å®˜ç½‘|å‰©ä½™|æµé‡|å¥—é¤|.com)).*$))(?=^(?!.*Hy2).*$)^.*$
  âš™ï¸Fallback = fallback, policy-regex-filter=(?i)(?=.*(^(?!.*(å®˜ç½‘|å‰©ä½™|æµé‡|å¥—é¤|.com)).*$))(?=^(?!.*Hy2).*$)^.*$
[Rule]
### é IP ç±»è§„åˆ™
#ä¸ªäººè§„åˆ™
RULE-SET,https://raw.githubusercontent.com/Brian-Lynn/AkashaConfig/main/BeanRules.conf,DIRECT
# > AIGC ç±»æœåŠ¡åŸŸå
RULE-SET,https://raw.githubusercontent.com/Brian-Lynn/AkashaConfig/main/AI-Service.list,ğŸ¤–AI Service 
# > å»å¹¿å‘Š éIP
# DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT
# RULE-SET,https://ruleset.skk.moe/List/non_ip/reject.conf,REJECT
# > é™æ€ CDN åŸŸå
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/cdn.conf,ğŸš€Proxy
RULE-SET,https://ruleset.skk.moe/List/non_ip/cdn.conf,ğŸš€Proxy
# > æµåª’ä½“åŸŸå (å·²åˆ é™¤)
# > Telegram åŸŸå
RULE-SET,https://ruleset.skk.moe/List/non_ip/telegram.conf,âœˆï¸Telegram
# > Apple & Microsoft å›½å†… CDN åŸŸå
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cdn.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft_cdn.conf,DIRECT
# > Apple CN åŸŸå
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cn.conf,DIRECT
# > è‹¹æœå’Œå¾®è½¯æœåŠ¡åŸŸå
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_services.conf,ğŸAPPLE
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft.conf,â“‚ï¸Microsoft  

# > Google æœåŠ¡åŸŸå (æ–°å¢)
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Google/Google.list,ğŸŒGoogle
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/YouTube/YouTube_Resolve.list,ğŸŒGoogle
# > å¸¸è§æµ·å¤–åŸŸå
RULE-SET,https://ruleset.skk.moe/List/non_ip/global.conf,ğŸš€Proxy
# > å›½å†…å¸¸è§åŸŸå
RULE-SET,https://ruleset.skk.moe/List/non_ip/domestic.conf,DIRECT
# > å†…ç½‘åŸŸå
RULE-SET,https://ruleset.skk.moe/List/non_ip/lan.conf,DIRECT

### IP ç±»è§„åˆ™
# > å»å¹¿å‘Š IP
# RULE-SET,https://ruleset.skk.moe/List/ip/reject.conf,REJECT-DROP
# > Telegram IP è§„åˆ™
RULE-SET,https://ruleset.skk.moe/List/ip/telegram.conf,âœˆï¸Telegram
# > æµåª’ä½“ IP (å·²åˆ é™¤)
# > å±€åŸŸç½‘ IP
RULE-SET,https://ruleset.skk.moe/List/ip/lan.conf,DIRECT
# > å›½å†… IP æ®µ
RULE-SET,https://ruleset.skk.moe/List/ip/domestic.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/ip/china_ip.conf,DIRECT
#GEOIP,CN,DIRECT
# > FINAL
FINAL,ğŸš€Proxy

[Host]
# åŸŸåæŒ‡å®šæœ¬åœ°å€¼ï¼š
# example.com = 1.2.3.4

# åŸŸåæŒ‡å®š DNS æœåŠ¡å™¨ï¼š
# example.com = server:1.2.3.4

# wifiåç§°æŒ‡å®š DNS æœåŠ¡å™¨ï¼Œå¦‚éœ€æŒ‡å®šå¤šä¸ª DNSï¼Œå¯ç”¨é€—å·åˆ†éš”ï¼š
# ssid:wifiåç§° = server:1.2.3.4

*.apple.com = server:system
*.icloud.com = server:system
localhost = 127.0.0.1

[URL Rewrite]
# Googleæœç´¢å¼•æ“é˜²è·³è½¬çš„é‡å†™ã€‚
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302
