# Stash é…ç½®æ–‡ä»¶ (EOF ä¿®æ­£ç‰ˆ)
# æ—¨åœ¨æ›´æ¥è¿‘ mihomo çš„è¡Œä¸ºå¹¶åŒ…å«ä¼˜åŒ–å»ºè®®

# æ··åˆç«¯å£ï¼ŒåŒæ—¶æ”¯æŒ HTTP å’Œ SOCKS5
mixed-port: 7890
# å…è®¸å±€åŸŸç½‘è¿æ¥
allow-lan: true
# è§„åˆ™æ¨¡å¼
mode: rule
# æ—¥å¿—çº§åˆ« (info, warning, error, debug, silent)
log-level: info
# IPv6 æ”¯æŒ (æ ¹æ®åŸ mihomo é…ç½®)
ipv6: false
# å¤–éƒ¨æ§åˆ¶ API åœ°å€
external-controller: 127.0.0.1:9090
# å¤–éƒ¨ UI æ–‡ä»¶å¤¹è·¯å¾„ (ä¾‹å¦‚ yacd-dashboard)
# external-ui: dashboard
# é…ç½®æ–‡ä»¶æ›´æ”¹æ—¶è‡ªåŠ¨é‡è½½ (Stash Mac/iOS ç‰¹æœ‰)
auto-reload: true
# (å¯é€‰) ç»Ÿä¸€å»¶è¿Ÿè®¡ç®— (url-test, fallback ç»„ä¸­çš„å»¶è¿Ÿä¼šåŠ ä¸Š TCP æ¡æ‰‹æ—¶é—´)
# unified-delay: true


# DNS é…ç½®
dns:
  enable: true
  ipv6: false # å…¨å±€ç¦ç”¨ IPv6 DNS è§£æ (AAAA è®°å½•)
  enhanced-mode: fake-ip # ä½¿ç”¨ Fake IP æ¨¡å¼æ˜¯é˜²æ­¢ DNS æ³„éœ²çš„å…³é”®
  fake-ip-range: 198.18.0.1/16 # Fake IP åœ°å€æ± 
  # å½“åŸŸååŒ¹é…ä»¥ä¸‹è§„åˆ™æ—¶ï¼Œä¸ä½¿ç”¨ Fake IPï¼Œè€Œæ˜¯è¿”å›çœŸå® IP (é€šå¸¸ç”¨äºå±€åŸŸç½‘ã€ç‰¹å®šæœåŠ¡)
  fake-ip-filter:
    - '+.lan'
    - '+.local'
    - '+.internal' # å¸¸è§å†…éƒ¨åŸŸååç¼€
    - '+.home.arpa'
    - 'localhost'
    - 'router.asus.com' # ç¤ºä¾‹ï¼šè·¯ç”±å™¨ç®¡ç†é¡µé¢
    - 'dns.msftncsi.com'
    - '*.srv.nintendo.net'
    - '*.stun.playstation.net'
    - 'xbox.*.microsoft.com'
    - '*.xboxlive.com'
    - '*.turn.twilio.com'
    - '*.stun.twilio.com'
    - 'stun.syncthing.net'
    - 'stun.*'
    - '*.sslip.io'
    - '*.nip.io'
    - '+.+m2m'
    - '+.$injections.adguard.org'
    - '+.$local.adguard.org'
    - '+.+bogon'
  # é»˜è®¤ DNS æœåŠ¡å™¨ï¼Œç”¨äºè§£æ nameserver ä¸­é…ç½®çš„ DNS æœåŠ¡å™¨åŸŸå (å¦‚æœå®ƒä»¬æ˜¯åŸŸåè€Œé IP)
  # ä»¥åŠåœ¨ Stash å¯åŠ¨æ—©æœŸæˆ–ç‰¹å®šæƒ…å†µä¸‹ä½¿ç”¨ã€‚å»ºè®®ä½¿ç”¨ç¨³å®šå¿«é€Ÿçš„ IP åœ°å€ã€‚
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  # ä¸Šæ¸¸ DNS æœåŠ¡å™¨ã€‚Fake IP æ¨¡å¼ä¸‹ï¼Œè¿™äº›æœåŠ¡å™¨ä¸»è¦ç”¨äºè§£æé‚£äº›ä¸ç”±ä»£ç†å¤„ç†çš„ç›´è¿åŸŸåã€‚
  # å¯¹äºé€šè¿‡ä»£ç†çš„åŸŸåï¼ŒDNS è§£æé€šå¸¸ç”±ä»£ç†æœåŠ¡å™¨å®Œæˆã€‚
  nameserver:
    - https://dns.alidns.com/dns-query # é˜¿é‡Œäº‘ DNS (DoH)
    - https://doh.pub/dns-query      # DNSPod DNS (DoH)
  # (å¯é€‰) Stash ç‰¹å®šåŠŸèƒ½ï¼šä¸ºç‰¹å®šåŸŸåæŒ‡å®š DNS æœåŠ¡å™¨
  # è¿™ä¸»è¦å½±å“ç›´è¿åŸŸåçš„è§£æã€‚
  nameserver-policy:
    # å¯¹äºä¸­å›½å¤§é™†çš„åŸŸå (å¦‚æœè§„åˆ™åŒ¹é…åˆ° GEOIP,CN,DIRECT)ï¼Œä½¿ç”¨ç³»ç»Ÿ DNS
    # æ³¨æ„ï¼šStash çš„ nameserver-policy çš„é”®æ˜¯åŸŸåæˆ–åŸŸåé€šé…ç¬¦ï¼Œä¸æ˜¯ GEOIPã€‚
    # å®ç° mihomo ä¸­ geosite:cn èµ°ç‰¹å®š DNS çš„æ–¹å¼ï¼Œé€šå¸¸æ˜¯ç»“åˆè§„åˆ™å’Œè¿™é‡Œçš„ policyã€‚
    # å¦‚æœå¸Œæœ›æ‰€æœ‰ DIRECT çš„ CN åŸŸåéƒ½èµ° system DNSï¼Œå¯ä»¥åœ¨è§„åˆ™ä¸­ç¡®ä¿å®ƒä»¬è¢« DIRECTï¼Œ
    # ç„¶ååœ¨è¿™é‡Œé…ç½®ä¸€ä¸ªå¹¿æ³›çš„å›½å†…åŸŸåé€šé…ç¬¦ (å¦‚æœå¯è¡Œ) æˆ–ä¾èµ– nameserver ä¸­çš„å›½å†… DNSã€‚
    # æˆ–è€…ï¼Œæ›´ç®€å•çš„æ–¹å¼æ˜¯ï¼Œå¦‚æœ GEOIP,CN,DIRECT è§„åˆ™å­˜åœ¨ï¼Œå¹¶ä¸” nameserver åˆ—è¡¨åŒ…å«å›½å†… DNSï¼Œ
    # Stash ä¼šä¼˜å…ˆé€‰æ‹©å›½å†… DNS è§£æè¿™äº›ç›´è¿çš„å›½å†…åŸŸåã€‚
    # 'GEOIP,CN': system # Stash ä¸æ”¯æŒæ­¤æ ¼å¼ï¼Œæ­¤è¡Œä»…ä¸ºç¤ºæ„åŸ mihomo æ„å›¾
    '+.cn': system # ç¤ºä¾‹ï¼šæ‰€æœ‰ .cn åç¼€åŸŸåä½¿ç”¨ç³»ç»Ÿ DNS
    '+.com.cn': system
    # ä¸ºå…¶ä»–ç‰¹å®šç›´è¿åŸŸåæŒ‡å®š DNSï¼š
    # 'specific-direct-domain.com': 223.6.6.6
  # (å¯é€‰) è·³è¿‡ DoH/DoT æœåŠ¡å™¨çš„è¯ä¹¦éªŒè¯ (ä¸æ¨èï¼Œé™¤éå¿…è¦)
  # skip-cert-verify: false
  # (å¯é€‰) DNS æŸ¥è¯¢æ˜¯å¦éµå¾ªä»£ç†è§„åˆ™ (é€šå¸¸ä¸æ¨èï¼Œå¯èƒ½å¯¼è‡´ DNS æ±¡æŸ“æˆ–æ€§èƒ½é—®é¢˜)
  # follow-rule: false

# (å¯é€‰) Sniffer é…ç½®ï¼šç”¨äºå—…æ¢æµé‡ä¸­çš„åŸŸåï¼Œæé«˜è§„åˆ™åŒ¹é…å‡†ç¡®æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨ IP è§„åˆ™ä¹‹å‰ã€‚
sniffer:
  enable: true
  # å¼ºåˆ¶å—…æ¢çš„ç«¯å£ (å¦‚æœæµé‡ç›®çš„åœ°æ˜¯è¿™äº›ç«¯å£ï¼Œå³ä½¿å·²æœ‰åŸŸåä¿¡æ¯ä¹Ÿå°è¯•å—…æ¢)
  # force-domain:
  #   - '+.example.com' # å¼ºåˆ¶å—…æ¢ example.com åŠå…¶å­åŸŸå
  # è·³è¿‡å—…æ¢çš„åŸŸå
  skip-domain:
    - 'Mijia Cloud'
    - '*.push.apple.com'
  # å—…æ¢çš„åè®®å’Œç«¯å£ï¼Œoverride-destination è¡¨ç¤ºæ˜¯å¦ç”¨å—…æ¢åˆ°çš„åŸŸåè¦†ç›–åŸå§‹ç›®æ ‡ (å¦‚æœåŸå§‹ç›®æ ‡æ˜¯ IP)
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
      override-destination: true
    QUIC: # QUIC å—…æ¢ç›¸å¯¹å®éªŒæ€§ï¼Œå¦‚æœé‡åˆ°é—®é¢˜å¯ä»¥ç¦ç”¨
      ports: [443, 8443]
      override-destination: true

# (å¯é€‰) Hosts é…ç½®ï¼šè‡ªå®šä¹‰åŸŸåè§£æï¼Œä¼˜å…ˆçº§é«˜äº DNS æŸ¥è¯¢
# hosts:
#   'example.com': 192.168.1.100
#   '*.dev': 127.0.0.1

# (å¯é€‰) TUN æ¨¡å¼é…ç½® (å¦‚æœéœ€è¦å…¨å±€ä»£ç†æ‰€æœ‰æµé‡)
# æ³¨æ„ï¼šç¡®ä¿ tun åŠå…¶å­é…ç½®é¡¹çš„ç¼©è¿›æ­£ç¡®ï¼Œå¹¶ä¸”æ²¡æœ‰å‰å¯¼ç©ºæ ¼ã€‚
tun:
  enable: true
  stack: system # æˆ– gvisor, mixed (macOS/iOS æ¨è system)
  dns-hijack: # åŠ«æŒå‘å¾€è¿™äº›åœ°å€çš„ DNS è¯·æ±‚åˆ° Stash å†…ç½® DNS
    - any:53
  auto-route: true # è‡ªåŠ¨é…ç½®ç³»ç»Ÿè·¯ç”±è¡¨ (éœ€è¦ç®¡ç†å‘˜æƒé™)
  auto-detect-interface: true # è‡ªåŠ¨æ£€æµ‹å‡ºå£ç½‘ç»œæ¥å£
  strict-route: true # æ›´ä¸¥æ ¼çš„è·¯ç”±ï¼Œé˜²æ­¢æ³„éœ² (æŸäº›æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´å±€åŸŸç½‘è®¿é—®é—®é¢˜)

# ä»£ç†é›† (Proxy Providers)
proxy-providers:
  ikuu:
    type: http
    url: "https://b67vt.no-mad-world.club/link/AAkoK0lWLhvo21gm?clash=3&extend=1"
    interval: 86400
    path: ./providers/ikuu.yaml
    # Stash çš„è¦†å†™ (override) æ˜¯é€šè¿‡ç‹¬ç«‹çš„ .stoverride æ–‡ä»¶å®ç°çš„ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§
    # å¦‚æœéœ€è¦ä¿®æ”¹èŠ‚ç‚¹åç§°ï¼Œå»ºè®®ä½¿ç”¨ Stash Override
    # vehicle-type: http # Stash è‡ªåŠ¨æ£€æµ‹è®¢é˜…ç±»å‹ï¼Œé€šå¸¸ä¸éœ€è¦æŒ‡å®š

  eggtart:
    type: http
    url: "https://45.137.181.206/api/v1/client/subscribe?token=6010ec506e1ec4370dfa1f8fbdb44b72"
    interval: 86400
    path: ./providers/eggtart.yaml

  CAC:
    type: http
    url: "https://submit.xz61.cn:23443/api/v1/client/subscribe?token=d36552f2715b6d06ebb56320551e7d70"
    interval: 86400
    path: ./providers/CAC.yaml

# ç­–ç•¥ç»„ (Proxy Groups)
proxy-groups:
  - name: 'ğŸš€ Proxy' # å»ºè®®å°†åŒ…å«ç‰¹æ®Šå­—ç¬¦æˆ– Emoji çš„åç§°ç”¨å¼•å·åŒ…è£¹
    type: select
    proxies:
      - 'ğŸ‡­ğŸ‡° HK'
      - 'ğŸ‡¼ğŸ‡¸ TW'
      - 'ğŸ‡¯ğŸ‡µ JP'
      - 'ğŸ‡¸ğŸ‡¬ SG'
      - 'ğŸ‡ºğŸ‡¸ US'
      - 'ğŸ´â€â˜ ï¸ Other'
      - DIRECT # ç¡®ä¿ DIRECT åœ¨éœ€è¦çš„åœ°æ–¹

  - name: 'âœˆï¸ Telegram'
    type: select
    proxies:
      - 'ğŸš€ Proxy'
      - 'ğŸ“‰ Low Rate'
    use:
      - ikuu
      - eggtart
      - CAC
    filter: "(?i)(?=.*(ğŸ‡¸ğŸ‡¬|æ–°|å¡|é¦™æ¸¯|hk|å°|tw))(?=^(?!.*(ä¸“çº¿|å®¶å®½|home)).*$)^.*$"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸ¤– AI Service'
    type: select
    use:
      - ikuu
      - eggtart
      - CAC
    filter: "(?i)(?=.*è›‹æŒ)(?=.*(?:å°æ¹¾|tw|ğŸ‡¹ğŸ‡¼|ğŸ‡¼ğŸ‡¸)).*"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸŒ Google'
    type: select
    proxies:
      - 'ğŸ‡¼ğŸ‡¸ TW'
      - 'ğŸš€ Proxy'
      - 'ğŸ‡­ğŸ‡° HK'
      - 'ğŸ‡ºğŸ‡¸ US'
      - 'ğŸ‡¯ğŸ‡µ JP'
      - 'ğŸ‡¸ğŸ‡¬ SG'
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'â–¶ï¸ YouTube'
    type: select
    proxies:
      - 'ğŸ“‰ Low Rate'
      - 'ğŸš€ Proxy'
      - 'ğŸŒ Google'
    use:
      - ikuu
      - eggtart
      - CAC
    filter: "(?i)(?=.*(é¦™æ¸¯|hk|å°|tw))(?=^(?!.*(ä¸“çº¿|å®¶å®½|home)).*$)^.*$"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸ“‰ Low Rate'
    type: select
    proxies:
      - 'ğŸš€ Proxy'
      - 'ğŸ†“ikuu'
    use:
      - ikuu
      - eggtart
      - CAC
    filter: '(?i)(?=.*CAC)(?=.*(é¦™æ¸¯|hk|å°|tw|å¡|sg|æ—¥|jp)).*$' # YAMLä¸­å•å¼•å·å†…çš„å†…å®¹å¦‚æœåŒ…å«ç‰¹æ®Šæ­£åˆ™å…ƒå­—ç¬¦ï¼Œæœ‰æ—¶åŒå¼•å·æ›´å®‰å…¨ï¼Œä½†æ­¤å¤„å•å¼•å·é€šå¸¸ä¹Ÿå¯
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸ†“ikuu'
    type: fallback
    url: 'http://www.gstatic.com/generate_204'
    interval: 600
    lazy: true
    use:
      - ikuu
    filter: "(?i)(?=.*(ikuu))^.*$"
    hidden: true

  - name: 'ğŸ‡­ğŸ‡° HK'
    type: select
    use:
      - ikuu
      - eggtart
      - CAC
    filter: "(?i)(?=.*(é¦™æ¸¯|hk))^.*$"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸ‡¼ğŸ‡¸ TW'
    type: select
    use:
      - ikuu
      - eggtart
      - CAC
    filter: "(?i)(?=.*(å°|tw))^.*$"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸ‡¯ğŸ‡µ JP'
    type: select
    use:
      - ikuu
      - eggtart
      - CAC
    filter: "(?i)(?=.*(æ—¥|jp))^.*$"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸ‡¸ğŸ‡¬ SG'
    type: select
    use:
      - ikuu
      - eggtart
      - CAC
    filter: "(?i)(?=.*(æ–°|sg))^.*$"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸ‡ºğŸ‡¸ US'
    type: select
    use:
      - ikuu
      - eggtart
      - CAC
    filter: "(?i)(?=.*(ç¾|us))^.*$"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸ´â€â˜ ï¸ Other'
    type: select
    use:
      - ikuu
      - eggtart
      - CAC
    filter: "(?i)(?=.*(^(?!.*(é¦™æ¸¯|hk|å°|tw|ç¾|us|å¡|æ–°|sg|æ—¥|jp|ä¸‹æ–¹)).*$))^.*$"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'â“‚ï¸ Microsoft'
    type: select
    proxies:
      - DIRECT
      - 'ğŸš€ Proxy'
      - 'ğŸ‡­ğŸ‡° HK'
      - 'ğŸ‡¼ğŸ‡¸ TW'
      - 'ğŸ‡ºğŸ‡¸ US'
      - 'ğŸ‡¯ğŸ‡µ JP'
      - 'ğŸ‡¸ğŸ‡¬ SG'
      - 'ğŸ´â€â˜ ï¸ Other'
      - 'ğŸ“‰ Low Rate'
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: 'ğŸ APPLE'
    type: select
    proxies:
      - DIRECT
      - 'ğŸš€ Proxy'
      - 'ğŸ‡­ğŸ‡° HK'
      - 'ğŸ‡¼ğŸ‡¸ TW'
      - 'ğŸ‡ºğŸ‡¸ US'
      - 'ğŸ‡¯ğŸ‡µ JP'
      - 'ğŸ‡¸ğŸ‡¬ SG'
      - 'ğŸ´â€â˜ ï¸ Other'
      - 'ğŸ“‰ Low Rate'
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: GLOBAL
    type: select
    proxies:
      - 'ğŸš€ Proxy'
      - 'âœˆï¸ Telegram'
      - 'ğŸ¤– AI Service'
      - 'ğŸŒ Google'
      - 'â–¶ï¸ YouTube'
      - 'ğŸ“‰ Low Rate'
      - 'â“‚ï¸ Microsoft'
      - 'ğŸ APPLE'
      - DIRECT

# è§„åˆ™é›† (Rule Providers)
# Stash è§„åˆ™é›†æä¾›è€… (Rule Providers)
# ä¸¥æ ¼æŒ‰ç…§ç”¨æˆ·æä¾›çš„ Stash æ–‡æ¡£ç¤ºä¾‹è°ƒæ•´ï¼Œç§»é™¤äº† type, path, proxy å­—æ®µ

rule-providers:
  # QUIC ç›¸å…³è§„åˆ™é›†
  reject_non_ip_no_drop:
    behavior: classical # åŒ…å«å¤šç§è§„åˆ™ç±»å‹
    format: text      # æ–‡ä»¶ä¸ºçº¯æ–‡æœ¬åˆ—è¡¨
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/reject-no-drop.txt'

  reject_non_ip_drop:
    behavior: classical
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/reject-drop.txt'

  # CDN è§„åˆ™é›†
  cdn_domainset:
    behavior: domain # æ­¤è§„åˆ™é›†ä¸»è¦åŒ…å«åŸŸå
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/domainset/cdn.txt'

  cdn_non_ip:
    behavior: classical # non_ip é€šå¸¸æ„å‘³ç€åŒ…å«å¤šç§è§„åˆ™ç±»å‹
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/cdn.txt'

  # AI æœåŠ¡è§„åˆ™é›†
  AI_Service:
    behavior: classical # .list æ–‡ä»¶é€šå¸¸åŒ…å«å¤šç§è§„åˆ™
    format: text
    interval: 43200
    url: 'https://raw.githubusercontent.com/Brian-Lynn/AkashaConfig/main/AI-Service.list'

  # Telegram è§„åˆ™é›†
  telegram_non_ip:
    behavior: classical
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/telegram.txt'

  telegram_ip:
    behavior: ipcidr # skk.moe çš„ ip ç›®å½•ä¸‹çš„è§„åˆ™é›†é€šå¸¸æ˜¯çº¯ IP CIDR åˆ—è¡¨
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/ip/telegram.txt'

  # Apple æœåŠ¡è§„åˆ™é›†
  apple_cdn:
    behavior: domain
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt'

  apple_services:
    behavior: classical
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/apple_services.txt'

  apple_cn_non_ip:
    behavior: classical
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt'

  # Microsoft æœåŠ¡è§„åˆ™é›†
  microsoft_cdn_non_ip:
    behavior: classical # non_ip cdn å¯èƒ½åŒ…å« SRV ç­‰ï¼Œclassical æ›´å®‰å…¨
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt'

  microsoft_non_ip:
    behavior: classical
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/microsoft.txt'

  # Google è§„åˆ™é›†
  google_main:
    behavior: classical # .list æ–‡ä»¶é€šå¸¸åŒ…å«å¤šç§è§„åˆ™
    format: text
    interval: 43200
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Google/Google.list'

  google_youtube:
    behavior: classical # .list æ–‡ä»¶é€šå¸¸åŒ…å«å¤šç§è§„åˆ™
    format: text
    interval: 43200
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/YouTube/YouTube_Resolve.list'

  # ä¸‹è½½ç±»è§„åˆ™é›†
  download_domainset:
    behavior: domain
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/domainset/download.txt'

  download_non_ip:
    behavior: classical # non_ip download è§„åˆ™å¯èƒ½åŒ…å«å¤šç§ç±»å‹
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/download.txt'

  # ä¸ªäººè§„åˆ™é›†
  BeanRules:
    behavior: classical # .conf æ–‡ä»¶é€šå¸¸åŒ…å«å¤šç§è§„åˆ™
    format: text
    interval: 43200
    url: 'https://raw.githubusercontent.com/Brian-Lynn/AkashaConfig/main/BeanRules.conf'

  # å±€åŸŸç½‘è§„åˆ™é›†
  lan_non_ip:
    behavior: classical
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/lan.txt'

  lan_ip:
    behavior: ipcidr # å±€åŸŸç½‘ IP é€šå¸¸æ˜¯çº¯ CIDR
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/ip/lan.txt'

  # å›½å†…è§„åˆ™é›†
  domestic_non_ip:
    behavior: classical
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/domestic.txt'

  direct_non_ip: # é€šå¸¸ä¹Ÿæ˜¯å›½å†…ç›¸å…³çš„ç›´è¿è§„åˆ™
    behavior: classical
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/direct.txt'

  global_non_ip: # éœ€è¦ä»£ç†çš„è§„åˆ™
    behavior: classical
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/non_ip/global.txt'

  domestic_ip:
    behavior: ipcidr # å›½å†… IP é€šå¸¸æ˜¯çº¯ CIDR
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/ip/domestic.txt'

  china_ip:
    behavior: ipcidr # ä¸­å›½ IP æ®µï¼Œçº¯ CIDR
    format: text
    interval: 43200
    url: 'https://ruleset.skk.moe/Clash/ip/china_ip.txt'


# è§„åˆ™ (Rules)
rules:
  # ä¼˜å…ˆå¤„ç† QUIC (ä¾‹å¦‚é˜»æ­¢å¸¸ç”¨ç«¯å£çš„ QUIC æµé‡ï¼Œå¼ºåˆ¶å›é€€åˆ° TCP)
  # Stash æ”¯æŒ SCRIPT è§„åˆ™ï¼Œä½†éœ€è¦ç¼–å†™ JS è„šæœ¬ï¼Œè¿™é‡Œç”¨æ›´é€šç”¨çš„æ–¹å¼
  # å¦‚æœæ‚¨å‘ç°æŸäº›åº”ç”¨ï¼ˆå¦‚ YouTubeï¼‰åœ¨ä»£ç†ä¸‹ä¼˜å…ˆä½¿ç”¨ QUIC å¯¼è‡´é€Ÿåº¦ä¸ä½³æˆ–è§„åˆ™ä¸ç”Ÿæ•ˆï¼Œå¯ä»¥è€ƒè™‘é˜»æ­¢ QUIC
  # - NETWORK,QUIC,REJECT # ç®€å•ç²—æš´åœ°é˜»æ­¢æ‰€æœ‰ QUIC
  # æˆ–è€…é’ˆå¯¹ç‰¹å®šç«¯å£çš„ UDP æµé‡ (QUIC é€šå¸¸è¿è¡Œåœ¨ 443/udp)
  - DST-PORT,443,UDP,REJECT # é˜»æ­¢ç›®æ ‡ç«¯å£ä¸º443çš„UDPæµé‡
  - DST-PORT,80,UDP,REJECT # é˜»æ­¢ç›®æ ‡ç«¯å£ä¸º80çš„UDPæµé‡ (HTTP/3 QUIC)

  # ä¸ªäººç›´è¿é›†
  - RULE-SET,BeanRules,DIRECT
  # ç›´è¿æˆ–å›½å†…æµé‡è§„åˆ™
  - RULE-SET,domestic_non_ip,DIRECT
  - RULE-SET,direct_non_ip,DIRECT
  - RULE-SET,lan_non_ip,DIRECT # å±€åŸŸç½‘åŸŸåç›´è¿

  # AIGC,Telegram
  - RULE-SET,AI_Service,'ğŸ¤– AI Service'
  - RULE-SET,telegram_non_ip,'âœˆï¸ Telegram'

  # Google è§„åˆ™ (YouTube ç‹¬ç«‹åˆ†æµ)
  - RULE-SET,google_main,'ğŸŒ Google'
  - RULE-SET,google_youtube,'â–¶ï¸ YouTube'

  # å¤§æ–‡ä»¶ä¸‹è½½è§„åˆ™
  - RULE-SET,download_domainset,'ğŸ“‰ Low Rate'
  - RULE-SET,download_non_ip,'ğŸ“‰ Low Rate'

  # å…¨çƒ CDN è§„åˆ™
  - RULE-SET,cdn_domainset,'ğŸ“‰ Low Rate'
  - RULE-SET,cdn_non_ip,'ğŸ“‰ Low Rate'

  # Apple æœåŠ¡è§„åˆ™
  - RULE-SET,apple_cdn,DIRECT
  - GEOIP,CN,DIRECT # å›½å†… Apple æœåŠ¡é€šå¸¸ä¹ŸåŒ…å«åœ¨æ­¤è§„åˆ™å†…
  - RULE-SET,apple_cn_non_ip,'ğŸ APPLE' # è¡¥å……è§„åˆ™
  - RULE-SET,apple_services,'ğŸ APPLE'

  # Microsoft æœåŠ¡è§„åˆ™
  - RULE-SET,microsoft_cdn_non_ip,DIRECT
  - RULE-SET,microsoft_non_ip,'â“‚ï¸ Microsoft'

  # å…¨å±€ä»£ç†è§„åˆ™ (é IP)
  - RULE-SET,global_non_ip,'ğŸš€ Proxy'

  # å¹¿å‘Šå’Œè·Ÿè¸ªå™¨é˜»æ­¢ (æ ¹æ®æ‚¨çš„ mihomo é…ç½®ï¼Œè¿™äº›æ˜¯æ³¨é‡Šæ‰çš„)
  # - RULE-SET,reject_non_ip,REJECT
  # - RULE-SET,reject_domainset,REJECT
  - RULE-SET,reject_non_ip_drop,REJECT-DROP
  - RULE-SET,reject_non_ip_no_drop,REJECT

  # IP ç±»è§„åˆ™ (é€šå¸¸æ”¾åœ¨åŸŸåè§„åˆ™ä¹‹åï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„ DNS è§£æ)
  - RULE-SET,telegram_ip,'âœˆï¸ Telegram',no-resolve
  - RULE-SET,lan_ip,DIRECT,no-resolve # å±€åŸŸç½‘ IP ç›´è¿
  - RULE-SET,domestic_ip,DIRECT,no-resolve # å›½å†… IP ç›´è¿
  - GEOIP,CN,DIRECT,no-resolve # ç¡®ä¿ä¸­å›½å¤§é™† IP ç›´è¿ (è¿™æ˜¯ Stash çš„æ ‡å‡†å†™æ³•)
  # - RULE-SET,china_ip,DIRECT,no-resolve # GEOIP,CN é€šå¸¸æ›´å¸¸ç”¨ä¸”æ•°æ®æ›´æ–°æ›´åŠæ—¶
  # - RULE-SET,reject_ip,REJECT,no-resolve

  # é»˜è®¤è§„åˆ™ï¼šæ‰€æœ‰æœªåŒ¹é…ä¸Šè¿°è§„åˆ™çš„æµé‡éƒ½å°†æŒ‡å‘ä¸»ä»£ç†ç»„
  - MATCH,'ğŸš€ Proxy'
