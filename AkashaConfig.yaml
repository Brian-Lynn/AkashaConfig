# DNS é…ç½®
dns:
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - +.+m2m
    - +.$injections.adguard.org
    - +.$local.adguard.org
    - +.+bogon
    - +.+lan
    - +.+localdomain
    - +.home.arpa
    - dns.msftncsi.com
    - "*.srv.nintendo.net"
    - "*.stun.playstation.net"
    - xbox.*.microsoft.com
    - "*.xboxlive.com"
    - "*.turn.twilio.com"
    - "*.stun.twilio.com"
    - stun.syncthing.net
    - stun.*
    - "*.sslip.io"
    - "*.nip.io"
  respect-rules: true
  nameserver:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
  nameserver-policy:
    geosite:cn:
      - https://1.12.12.12/dns-query
      - https://223.5.5.5/dns-query
  proxy-server-nameserver:
    - https://1.12.12.12/dns-query
    - https://223.5.5.5/dns-query


#-------------------------------------------------------
#ä»£ç†é›†é”šç‚¹
Proxy_group: &Proxy_group {type: http, interval: 86400, exclude-filter: "(?i)(å®˜ç½‘|å‰©ä½™|æµé‡|å¥—é¤|\\.com)"}

# ä»£ç†é›†
proxy-providers:
  ikuu:
    url: "https://b67vt.no-mad-world.club/link/AAkoK0lWLhvo21gm?clash=3&extend=1"
    <<: *Proxy_group
    override:
      additional-prefix: "[ikuu]"
    
  eggtart:
    url: "https://45.137.181.206/api/v1/client/subscribe?token=6010ec506e1ec4370dfa1f8fbdb44b72"
    <<: *Proxy_group
    override:
      additional-prefix: "[è›‹æŒ]"

  CAC:
    url: "https://submit.xz61.cn:23443/api/v1/client/subscribe?token=d36552f2715b6d06ebb56320551e7d70"
    <<: *Proxy_group
    override:
      additional-prefix: "[CAC]"


# -------------------------------------------------------
# ä»£ç†ç»„é…ç½® (proxy-groups) - å·²æŒ‰è¦æ±‚é‡æ–°æ’åºå¹¶è°ƒæ•´è¿‡æ»¤å™¨
proxy-groups:
  # 1. ä¸»ä»£ç†é€‰æ‹©ç»„
  - name: ğŸš€ Proxy
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¼ğŸ‡¸ TW
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ´â€â˜ ï¸ Other

  # 2. Telegram ä»£ç†ç»„
  - name: âœˆï¸ Telegram
    type: select
    proxies:
      - ğŸš€ Proxy
      - ğŸ“‰ Low Rate
    # ç­›é€‰åŒ…å«æ–°åŠ å¡ã€é¦™æ¸¯ã€å°æ¹¾å…³é”®è¯ä¸”ä¸å«ä¸“çº¿æˆ–å®¶å®½çš„èŠ‚ç‚¹
    filter: "(?i)(?=.*(ğŸ‡¸ğŸ‡¬|æ–°|å¡|é¦™æ¸¯|hk|å°|tw))(?=^(?!.*(ä¸“çº¿|å®¶å®½|home)).*$)^.*$"
    include-all: true

  # 3. AI æœåŠ¡ä»£ç†ç»„
  - name: ğŸ¤– AI Service
    type: select
    filter: "(?i)(?=.*è›‹æŒ)(?=.*(?:å°æ¹¾|tw|ğŸ‡¹ğŸ‡¼|ğŸ‡¼ğŸ‡¸)).*"
    include-all: true

  # 4. Google ä»£ç†ç»„ (é YouTube)
  - name: ğŸŒ Google
    type: select
    proxies:
      - ğŸ‡¼ğŸ‡¸ TW      
      - ğŸš€ Proxy
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG

  # 5. YouTube ä»£ç†ç»„
  - name: â–¶ï¸ YouTube
    type: select
    proxies:
      - ğŸ“‰ Low Rate
      - ğŸš€ Proxy
      - ğŸŒ Google
  # ç­›é€‰åŒ…å«é¦™æ¸¯æˆ–å°æ¹¾å…³é”®è¯ä¸”ä¸å«ä¸“çº¿æˆ–å®¶å®½çš„èŠ‚ç‚¹
    filter: "(?i)(?=.*(é¦™æ¸¯|hk|å°|tw))(?=^(?!.*(ä¸“çº¿|å®¶å®½|home)).*$)^.*$"
    include-all: true

  # 6. ä½å€ç‡èŠ‚ç‚¹ç»„
  - name: ğŸ“‰ Low Rate
    type: select
    proxies:
      - ğŸš€ Proxy      
      - ğŸ†“ikuu
    filter: (?i)(?=.*CAC)(?=.*(é¦™æ¸¯|hk|å°|tw|å¡|sg|æ—¥|jp)).*$
    include-all: true

  #ikun
  - name: ğŸ†“ikuu 
    type: fallback
    url: 'https://www.gstatic.com/generate_204'
    interval: 600
    lazy: true
    include-all: true
    filter: "(?i)(?=.*(ikuu))^.*$"
    hidden: true
    

  # 7. é¦™æ¸¯èŠ‚ç‚¹
  - name: ğŸ‡­ğŸ‡° HK
    type: select
    # ç­›é€‰åŒ…å«é¦™æ¸¯å…³é”®è¯çš„èŠ‚ç‚¹
    filter: "(?i)(?=.*(é¦™æ¸¯|hk))^.*$"
    include-all: true

  # 8. å°æ¹¾èŠ‚ç‚¹
  - name: ğŸ‡¼ğŸ‡¸ TW
    type: select
    # ç­›é€‰åŒ…å«å°æ¹¾å…³é”®è¯çš„èŠ‚ç‚¹
    filter: "(?i)(?=.*(å°|tw))^.*$"
    include-all: true

  # 9. æ—¥æœ¬èŠ‚ç‚¹
  - name: ğŸ‡¯ğŸ‡µ JP
    type: select
    # ç­›é€‰åŒ…å«æ—¥æœ¬å…³é”®è¯çš„èŠ‚ç‚¹
    filter: "(?i)(?=.*(æ—¥|jp))^.*$"
    include-all: true
  
  # 10. æ–°åŠ å¡èŠ‚ç‚¹
  - name: ğŸ‡¸ğŸ‡¬ SG
    type: select
    # ç­›é€‰åŒ…å«æ–°åŠ å¡å…³é”®è¯çš„èŠ‚ç‚¹
    filter: "(?i)(?=.*(æ–°|sg))^.*$"
    include-all: true

  # 11. ç¾å›½èŠ‚ç‚¹
  - name: ğŸ‡ºğŸ‡¸ US
    type: select
    # ç­›é€‰åŒ…å«ç¾å›½å…³é”®è¯çš„èŠ‚ç‚¹
    filter: "(?i)(?=.*(ç¾|us))^.*$"
    include-all: true

  # 12. å…¶ä»–åœ°åŒºèŠ‚ç‚¹
  - name: ğŸ´â€â˜ ï¸ Other
    type: select
    # ç­›é€‰ä¸åŒ…å«ä¸»è¦åœ°åŒºå…³é”®è¯åŠâ€œä¸‹æ–¹â€çš„èŠ‚ç‚¹
    filter: "(?i)(?=.*(^(?!.*(é¦™æ¸¯|hk|å°|tw|ç¾|us|å¡|æ–°|sg|æ—¥|jp|ä¸‹æ–¹)).*$))^.*$"
    include-all: true
  
  # 13. Microsoft æœåŠ¡ç»„
  - name: â“‚ï¸ Microsoft
    type: select
    proxies:
      - DIRECT
      - ğŸš€ Proxy
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¼ğŸ‡¸ TW
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG
      - ğŸ´â€â˜ ï¸ Other
      - ğŸ“‰ Low Rate
    # æ­¤å¤„ä¸å†éœ€è¦é€šç”¨æ’é™¤è¿‡æ»¤å™¨

  # 14. Apple æœåŠ¡ç»„
  - name: ğŸ APPLE
    type: select
    proxies:
      - DIRECT
      - ğŸš€ Proxy
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¼ğŸ‡¸ TW
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG
      - ğŸ´â€â˜ ï¸ Other
      - ğŸ“‰ Low Rate
    # æ­¤å¤„ä¸å†éœ€è¦é€šç”¨æ’é™¤è¿‡æ»¤å™¨

  - name: GLOBAL
    type: select
    include-all: true

# -------------------------------------------------------
# åŸŸåå’Œipé”šç‚¹
# classical: åŒ¹é…åŸŸåæˆ– IP çš„è§„åˆ™ç±»å‹
RuleSet_classical: &RuleSet_classical {type: http, behavior: classical, interval: 43200, format: text, proxy: ğŸš€ Proxy}
# domain: ä»…åŒ¹é…åŸŸåçš„è§„åˆ™ç±»å‹
RuleSet_domain: &RuleSet_domain {type: http, behavior: domain, interval: 43200, format: text, proxy: ğŸš€ Proxy}
# ipcidr: åŒ¹é… CIDR æ ¼å¼ IP æ®µçš„è§„åˆ™ç±»å‹
RuleSet_ipcidr: &RuleSet_ipcidr {type: http, behavior: ipcidr, interval: 43200, format: text, proxy: ğŸš€ Proxy}


# -------------------------------------------------------
# åŸŸåå’Œipé›†
# -------------------------------------------------------
rule-providers:
#-------------------- å¹¿å‘Šæ‹¦æˆªè§„åˆ™--------------------

  # reject_non_ip:
  #   <<: *RuleSet_classical
  #   url: https://ruleset.skk.moe/Clash/non_ip/reject.txt
  #   path: './rule_set/sukkaw_ruleset/reject_non_ip.txt'
  #
  # reject_domainset:
  #   <<: *RuleSet_domain
  #   url: https://ruleset.skk.moe/Clash/domainset/reject.txt
  #   path: './rule_set/sukkaw_ruleset/reject_domainset.txt'
  #
  # reject_ip:
  #   <<: *RuleSet_classical
  #   url: https://ruleset.skk.moe/Clash/ip/reject.txt
  #   path: './rule_set/sukkaw_ruleset/reject_ip.txt'
  # -----------------------------------------------------------------------------

  #åª’ä½“å¹³å°quicé˜»æ­¢
  reject_non_ip_no_drop:
    <<: *RuleSet_classical
    url: 'https://ruleset.skk.moe/Clash/non_ip/reject-no-drop.txt'
    path: './rule_set/sukkaw_ruleset/reject_non_ip_no_drop.txt'
  #é˜²æ­¢Adobeæ— é™è·Ÿè¸ª
  reject_non_ip_drop:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject-drop.txt
    path: './rule_set/sukkaw_ruleset/reject_non_ip_drop.txt'

  # CDN è§„åˆ™é›† (åŸŸåå’Œé IP)
  cdn_domainset:
    <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/cdn.txt
    path: ./rule_set/sukkaw_ruleset/cdn_domainset.txt
  cdn_non_ip:
    <<: *RuleSet_classical 
    url: https://ruleset.skk.moe/Clash/non_ip/cdn.txt
    path: ./rule_set/sukkaw_ruleset/cdn_non_ip.txt

  # AI æœåŠ¡è§„åˆ™é›† (ä» GitHub è·å–)
  AI_Service:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/Brian-Lynn/AkashaConfig/main/AI-Service.list
    path: ./rule_set/ai_service.txt # æœ¬åœ°ä¿å­˜è·¯å¾„

  # Telegram è§„åˆ™é›† (é IP å’Œ IP)
  telegram_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/telegram.txt
    path: './rule_set/sukkaw_ruleset/telegram_non_ip.txt'

  telegram_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/telegram.txt
    path: './rule_set/sukkaw_ruleset/telegram_ip.txt'

  # Apple æœåŠ¡è§„åˆ™é›† (CDN, æœåŠ¡, ä¸­å›½å¤§é™†)
  apple_cdn:
    <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt
    path: ./rule_set/sukkaw_ruleset/apple_cdn.txt

  apple_services:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_services.txt
    path: ./rule_set/sukkaw_ruleset/apple_services.txt

  apple_cn_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt
    path: ./rule_set/sukkaw_ruleset/apple_cn_non_ip.txt

  # Microsoft æœåŠ¡è§„åˆ™é›† (CDN, ä¸»æœåŠ¡)
  microsoft_cdn_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt
    path: ./rule_set/sukkaw_ruleset/microsoft_cdn_non_ip.txt

  microsoft_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft.txt
    path: ./rule_set/sukkaw_ruleset/microsoft_non_ip.txt

  # Google è§„åˆ™é›†
  google_main:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Google/Google.list
    path: ./rule_set/google_main.txt

  google_youtube:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/YouTube/YouTube_Resolve.list
    path: ./rule_set/google_resolve.txt # æ–‡ä»¶ååº”ä¸º google_youtube.txt æˆ–ç±»ä¼¼ï¼Œä¿æŒä¸€è‡´æ€§

  # è½¯ä»¶æ›´æ–°ã€æ“ä½œç³»ç»Ÿç­‰å¤§æ–‡ä»¶ä¸‹è½½è§„åˆ™ (æŒ‡å‘ä½å€ç‡èŠ‚ç‚¹ç»„)
  download_domainset:
    <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/download.txt
    path: ./rule_set/sukkaw_ruleset/download_domainset.txt

  download_non_ip:
    <<: *RuleSet_domain # åº”è¯¥æ˜¯ classical æˆ– domainï¼Œæ ¹æ®å®é™…å†…å®¹ï¼ŒåŸé…ç½®ä¸º domain
    url: https://ruleset.skk.moe/Clash/non_ip/download.txt
    path: ./rule_set/sukkaw_ruleset/download_non_ip.txt

  # ä¸ªäººè§„åˆ™é›†
  BeanRules:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/Brian-Lynn/AkashaConfig/main/BeanRules.conf
    path: ./rule_set/BeanRules.txt

  # å†…ç½‘åŸŸåå’Œå±€åŸŸç½‘ IP è§„åˆ™é›†
  lan_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/lan.txt
    path: ./rule_set/sukkaw_ruleset/lan_non_ip.txt

  lan_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/lan.txt
    path: './rule_set/sukkaw_ruleset/lan_ip.txt'

  # å›½å†…åŸŸåå’Œ IP è§„åˆ™é›†
  domestic_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/domestic.txt
    path: './rule_set/sukkaw_ruleset/domestic_non_ip.txt'

  # DIRECT è§„åˆ™é›† (ç›´æ¥è¿æ¥)
  direct_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/direct.txt
    path: './rule_set/sukkaw_ruleset/direct_non_ip.txt'

  # GLOBAL è§„åˆ™é›† (å…¨å±€ä»£ç†ï¼Œé IP)
  global_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/global.txt
    path: ./rule_set/sukkaw_ruleset/global_non_ip.txt

  # å›½å†… IP è§„åˆ™é›†
  domestic_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/domestic.txt
    path: './rule_set/sukkaw_ruleset/domestic_ip.txt'

  # ä¸­å›½ IP è§„åˆ™é›† (CIDR)
  china_ip:
    <<: *RuleSet_ipcidr
    url: https://ruleset.skk.moe/Clash/ip/china_ip.txt
    path: './rule_set/sukkaw_ruleset/china_ip.txt'

# -------------------------------------------------------
# è§„åˆ™é›†
# æµé‡æŒ‰é¡ºåºåŒ¹é…è§„åˆ™ï¼ŒåŒ¹é…åˆ°å³åœæ­¢ï¼Œå› æ­¤ipç±»ä¸€å®šè¦æ”¾åˆ°åŸŸåç±»ä¸‹é¢ï¼Œé¿å…ä¸å¿…è¦çš„dnsè§£æã€‚
# -------------------------------------------------------
rules:
  # ä¸ªäººç›´è¿é›†
  - RULE-SET,BeanRules,DIRECT

  # ç›´è¿æˆ–å›½å†…æµé‡è§„åˆ™
  - RULE-SET,domestic_non_ip,DIRECT
  - RULE-SET,direct_non_ip,DIRECT
  - RULE-SET,lan_non_ip,DIRECT


  # AIGC,Telegram
  - RULE-SET,AI_Service,ğŸ¤– AI Service # AI æœåŠ¡æµé‡æŒ‡å‘ AI Service ç»„
  - RULE-SET,telegram_non_ip,âœˆï¸ Telegram # Telegram (é IP) æµé‡æŒ‡å‘ Telegram ç»„

  # Google è§„åˆ™ (YouTube ç‹¬ç«‹åˆ†æµ)
  - RULE-SET,google_main,ğŸŒ Google # å…¶ä»– Google æµé‡æŒ‡å‘ Google ç»„
  - RULE-SET,google_youtube,â–¶ï¸ YouTube # YouTube æµé‡æŒ‡å‘ YouTube ç»„
  # å¤§æ–‡ä»¶ä¸‹è½½è§„åˆ™
  - RULE-SET,download_domainset,ğŸ“‰ Low Rate
  - RULE-SET,download_non_ip,ğŸ“‰ Low Rate

  # å…¨çƒ CDN è§„åˆ™ (ä½¿ç”¨ä¸»ä»£ç†)
  - RULE-SET,cdn_domainset, ğŸ“‰ Low Rate
  - RULE-SET,cdn_non_ip,ğŸ“‰ Low Rate

  # Apple æœåŠ¡è§„åˆ™ (è°ƒæ•´é¡ºåº)
  - RULE-SET,apple_cdn,DIRECT # Apple CDN æµé‡ç›´è¿
  - RULE-SET,apple_cn_non_ip,ğŸ APPLE # ä¸­å›½å¤§é™† Apple æœåŠ¡æµé‡æŒ‡å‘ Apple ç»„
  - RULE-SET,apple_services,ğŸ APPLE # å…¶ä»– Apple æœåŠ¡æµé‡æŒ‡å‘ Apple ç»„

  # Microsoft æœåŠ¡è§„åˆ™ (è°ƒæ•´é¡ºåº)
  - RULE-SET,microsoft_cdn_non_ip,DIRECT # Microsoft CDN æµé‡ç›´è¿
  - RULE-SET,microsoft_non_ip,â“‚ï¸ Microsoft # å…¶ä»– Microsoft æœåŠ¡æµé‡æŒ‡å‘ Microsoft ç»„

  # å…¨å±€ä»£ç†è§„åˆ™ (é IP)
  - RULE-SET,global_non_ip,ğŸš€ Proxy

  # -------------------- æ³¨é‡Šæ‰çš„å¹¿å‘Šæ‹¦æˆªè§„åˆ™ (å¦‚éœ€ä½¿ç”¨è¯·å–æ¶ˆæ³¨é‡Š) --------------------
  # - RULE-SET,reject_non_ip,REJECT
  # - RULE-SET,reject_domainset,REJECT
  # - RULE-SET,reject_non_ip_drop,REJECT-DROP
  # - RULE-SET,reject_non_ip_no_drop,REJECT
  # -----------------------------------------------------------------------------
  #æ‹’ç»QUIC
  - RULE-SET,reject_non_ip_drop,REJECT-DROP
  - RULE-SET,reject_non_ip_no_drop,REJECT
  # IP ç±»è§„åˆ™
  - RULE-SET,telegram_ip,âœˆï¸ Telegram # Telegram (IP) æµé‡æŒ‡å‘ Telegram ç»„
  - RULE-SET,lan_ip,DIRECT
  - RULE-SET,domestic_ip,DIRECT
  - RULE-SET,china_ip,DIRECT
  # - RULE-SET,reject_ip,REJECT


  # é»˜è®¤è§„åˆ™ï¼šæ‰€æœ‰æœªåŒ¹é…ä¸Šè¿°è§„åˆ™çš„æµé‡éƒ½å°†æŒ‡å‘ä¸»ä»£ç†ç»„
  - MATCH,ğŸš€ Proxy
